<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <title>平台券记录</title>
    
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<link rel="stylesheet" href="/weixin/style/wap.min.css"/>
<script src="/weixin/js/zepto.min.js"></script>
<script src="/weixin/js/callbacks.js"></script>
<script src="/weixin/js/deferred.js"></script>
<script src="/weixin/js/handlebars.min.js"></script>
<script src="/weixin/js/lazyload.min.js"></script>
<script src="/weixin/js/iSlider.min.js"></script>
<script src="/weixin/js/iSlider.animate.min.js"></script>
<script src="/weixin/js/fly.min.js"></script>
<script src="/weixin/js/requestAnimationFrame.js"></script>
<script src="/weixin/js/iscroll.js"></script>
<script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>


  

</head>
<body ontouchstart>
<div class="weui-toptips weui-toptips_warn js_tooltips">错误提示</div>
<script type="text/html" id="tpl_toast">

    <!--BEGIN toast-->
    <div id="toast" style="display: none;">
        <div class="weui-mask_transparent"></div>
        <div class="weui-toast">
            <i class="weui-icon-info-circle weui-icon_toast"></i>
            <p class="weui-toast__content">已完成</p>
        </div>
    </div>
    <!--end toast-->

    <!-- loading toast -->
    <div id="loadingToast" style="display:none;">
        <div class="weui-mask_transparent"></div>
        <div class="weui-toast">
            <i class="weui-loading weui-icon_toast"></i>
            <p class="weui-toast__content">努力加载</p>
        </div>
    </div>

</script>
<script type="text/html" id="tpl_dialog">

    <!--BEGIN dialog1-->
    <div id="dialog1" style="display: none;">
        <div class="weui-mask"></div>
        <div class="weui-dialog">
            <div class="weui-dialog__hd"><strong class="weui-dialog__title">弹窗标题</strong></div>
            <div class="weui-dialog__bd">弹窗内容，告知当前状态、信息和解决方法，描述文字尽量控制在三行内</div>
            <div class="weui-dialog__ft">
                <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_default">否</a>
                <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary">是</a>
            </div>
        </div>
    </div>
    <!--END dialog1-->
    <!--BEGIN dialog2-->
    <div id="dialog2" style="display: none;">
        <div class="weui-mask"></div>
        <div class="weui-dialog">
            <div class="weui-dialog__bd">弹窗内容，告知当前状态、信息和解决方法，描述文字尽量控制在三行内</div>
            <div class="weui-dialog__ft">
                <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary">知道了</a>
            </div>
        </div>
    </div>
    <!--END dialog2-->

</script>
<div class="container" id="container"></div>


<!--平台券-->
<script type="text/html" id="tpl_platformTicket">
<div class="page">
    <div class="page__bd" style="height: 100%">
        <div class="weui-tab__panel pageable" >
            <div class="ticket"> </div>
        </div>
    </div>
</div>
</script>

<script type="text/html" id="tpl_platform">
{{#each this}}
<div class="cd">
    <ul>
        <li class="f12">领取</li>
        <li class="f12">{{createDate}}</li>
        <li class="f12">+￥{{amount}}</li>
    </ul>
    <div class="weui-flex">
        <div class="weui-flex__item f12"></div>
        <div class="weui-flex__item f12">{{balance}}</div>
    </div>
</div>
{{/each}}
</script>



<script src="/weixin/js/wap.min.js"></script>



<script type="text/javascript">
    $(function () {
        pageManager.show("platformTicket");

            //加载列表
            var pges = $(".pageable").pageable({
                loadUpFn:function(me) {
                    var tu = new coupon(function (data) {
                        var h = render.fill($("#tpl_platform"),data);
                        $(".pageable .ticket").html(h);
                        //me.noData(false);
                        me.resetload();
                    });
                    tu.record({pageNumber:1,id: pageManager.GetQueryString("id")});
                },
                loadDownFn :function(me) {
                    var td = new coupon(function (data) {
                        me.pageNumber = me.pageNumber +1;
                        var h = render.fill($("#tpl_platform"),data);
                        $(".pageable .ticket").append(h);
                        if (data.length<20){
                            me.lock();
                            me.noData();
                        }
                        me.resetload();
                    });
                    td.record({pageNumber: me.pageNumber,id: pageManager.GetQueryString("id")});
                }
            });
     });
</script>
</body>
</html>

