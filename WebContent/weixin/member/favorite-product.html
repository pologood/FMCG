<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <title>收藏商品</title>
    
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<link rel="stylesheet" href="/weixin/style/wap.min.css"/>
<script src="/weixin/js/zepto.min.js"></script>
<script src="/weixin/js/callbacks.js"></script>
<script src="/weixin/js/deferred.js"></script>
<script src="/weixin/js/handlebars.min.js"></script>
<script src="/weixin/js/lazyload.min.js"></script>
<script src="/weixin/js/iSlider.min.js"></script>
<script src="/weixin/js/iSlider.animate.min.js"></script>
<script src="/weixin/js/fly.min.js"></script>
<script src="/weixin/js/requestAnimationFrame.js"></script>
<script src="/weixin/js/iscroll.js"></script>
<script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>


  

</head>
<body ontouchstart>
<div class="weui-toptips weui-toptips_warn js_tooltips">错误提示</div>
<script type="text/html" id="tpl_toast">

    <!--BEGIN toast-->
    <div id="toast" style="display: none;">
        <div class="weui-mask_transparent"></div>
        <div class="weui-toast">
            <i class="weui-icon-info-circle weui-icon_toast"></i>
            <p class="weui-toast__content">已完成</p>
        </div>
    </div>
    <!--end toast-->

    <!-- loading toast -->
    <div id="loadingToast" style="display:none;">
        <div class="weui-mask_transparent"></div>
        <div class="weui-toast">
            <i class="weui-loading weui-icon_toast"></i>
            <p class="weui-toast__content">努力加载</p>
        </div>
    </div>

</script>
<script type="text/html" id="tpl_dialog">

    <!--BEGIN dialog1-->
    <div id="dialog1" style="display: none;">
        <div class="weui-mask"></div>
        <div class="weui-dialog">
            <div class="weui-dialog__hd"><strong class="weui-dialog__title">弹窗标题</strong></div>
            <div class="weui-dialog__bd">弹窗内容，告知当前状态、信息和解决方法，描述文字尽量控制在三行内</div>
            <div class="weui-dialog__ft">
                <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_default">否</a>
                <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary">是</a>
            </div>
        </div>
    </div>
    <!--END dialog1-->
    <!--BEGIN dialog2-->
    <div id="dialog2" style="display: none;">
        <div class="weui-mask"></div>
        <div class="weui-dialog">
            <div class="weui-dialog__bd">弹窗内容，告知当前状态、信息和解决方法，描述文字尽量控制在三行内</div>
            <div class="weui-dialog__ft">
                <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary">知道了</a>
            </div>
        </div>
    </div>
    <!--END dialog2-->

</script>
<div class="container" id="container"></div>


<!--收藏-->
<script type="text/html" id="tpl_favorite-product">
<div class="page">
    

    <!--BEGIN toast-->
    <div id="toast" style="display: none;">
        <div class="weui-mask_transparent"></div>
        <div class="weui-toast">
            <i class="weui-icon-info-circle weui-icon_toast"></i>
            <p class="weui-toast__content">已完成</p>
        </div>
    </div>
    <!--end toast-->

    <!-- loading toast -->
    <div id="loadingToast" style="display:none;">
        <div class="weui-mask_transparent"></div>
        <div class="weui-toast">
            <!--<i class="weui-loading weui-icon_toast"></i>-->
            <p class="weui-toast__content">努力加载</p>
        </div>
    </div>


    

    <!--BEGIN dialog1-->
    <div id="dialog1" style="display: none;">
        <div class="weui-mask"></div>
        <div class="weui-dialog">
            <div class="weui-dialog__hd"><strong class="weui-dialog__title">操作提示</strong></div>
            <div class="weui-dialog__bd">弹窗内容，告知当前状态、信息和解决方法，描述文字尽量控制在三行内</div>
            <div class="weui-dialog__ft">
                <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_default">否</a>
                <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary">是</a>
            </div>
        </div>
    </div>
    <!--END dialog1-->
    <!--BEGIN dialog2-->
    <div id="dialog2" style="display: none;">
        <div class="weui-mask"></div>
        <div class="weui-dialog">
            <div class="weui-dialog__bd">弹窗内容，告知当前状态、信息和解决方法，描述文字尽量控制在三行内</div>
            <div class="weui-dialog__ft">
                <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary">知道了</a>
            </div>
        </div>
    </div>
    <!--END dialog2-->


    <div class="page__bd tabBer" style="height: 100%;">
        <div class="vux-tab">
            <div class="vux-tab-item vux-center f14"><a href="../member/favorite-tenant.html">收藏商家</a></div>
            <div class="vux-tab-item vux-center f14 vux-tab-selected"><a href="../member/favorite-product.html">收藏宝贝</a></div>
            <div class="vux-tab-item vux-center f14"><a href="../member/favorite-guide.html">收藏导购</a></div>
            <div class="vux-tab-ink-bar vux-tab-ink-bar-transition-forward" id="bor" style=" left:33.3333%; right:33.3333%;"></div>
        </div>
        <div class="weui-tab " style="clear:both">

            <!--加载收藏商品-->
            <div class="vux-swiper-item active weui-tab__panel pageable"  style="padding: 45px 0 0 0;">
                <div class="weui-cells product-grid" ></div>
            </div>

        </div>
    </div>
</div>
</div>


<script type="text/javascript">
    $(function () {
        tabBar.bind();
        //收藏商品
        var pged = $(".pageable").pageable({
            loadUpFn:function(me) {
                var tu = new favorite(function (data) {
                    var h = render.fill($("#tpl_productList"),data);
                    $(".pageable .product-grid").html(h);
                    me.resetload();
                });
                tu.productList({pageNumber: 1});
            },
            loadDownFn :function(me) {
                var td = new favorite(function (data) {
                    me.pageNumber = me.pageNumber +1;
                    var h = render.fill($("#tpl_productList"),data);

                    $(".pageable .product-grid").append(h);
                    if (data.length<20){
                        me.lock();
                        me.noData();
                    }
                    me.resetload();
                });
                td.productList({pageNumber: me.pageNumber});
            }
        });


        pushHistory();
        var bool=false;
        setTimeout(function(){
            bool=true;
        },100);
        window.addEventListener("popstate", function(e) {
            if(bool)
            {
                $('.pageable-down').remove();
                location.href=location.origin+"/weixin/member/member-home.html";
            }
            pushHistory();

        }, false);
        function pushHistory() {
            var state = {
                title: "title",
                url: "#"
            };
            window.history.pushState(state,"title","#");
        }

    });

</script>
</script>

<script type="text/html" id="tpl_productList">
<!-- product_list -->
{{#each this}}
<div class="position">
    <a class="weui-cell" href="../product/product-details.html?id={{id}}" data-id="{{id}}" >
        <div class="weui-cell__hd fly_img">
            {{#compare thumbnail '!=' null}}
            <img src="{{thumbnail}}" />
            {{/compare}}
            {{#compare thumbnail '==' null}}
            <img src="../images/placeholder/product.png" />
            {{/compare}}
        </div>
        <div class="weui-cell__bd">
            <p class="Ftitle">{{name}}</p>
            <p class="tag_list">
                {{#each promotions}}
                <i class="iconfont icon-{{type}}"></i>
                {{/each}}
            </p>
            <p class="price f14"><span>￥{{price}}
                {{#compare price '==' marketPrice}}
                {{/compare}}
                {{#compare price '!=' marketPrice}}
                    <i class="marketPrice">￥{{marketPrice}}</i></span>
                {{/compare}}
            </p>
            <p class="Fauxiliary">库存 {{favoriteCount}} /月销量 {{monthSales}}</p>

        </div>
    </a>
    <span class="cart fly_cart_start"  data-id="{{id}}" id="sheet_add_card" ><i class="icon iconfont icon-l-jia"></i></span>
</div>
{{/each}}
<!-- product_list end -->
</script>



<script src="/weixin/js/wap.min.js"></script>



<script type="text/javascript">
    $(function () {
        pageManager.show("favorite-product");
    });
</script>
</body>
</html>

