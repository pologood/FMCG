/**
 * Created by jf on 2015/9/11.
 * Modified by bear on 2016/9/7.
 */
    
/**
 * Created by jf on 2015/9/11.
 * Modified by bear on 2016/9/7.
 */
    
var base = location.origin == "http://localhost:8080" ? "http://www.ahxinying.cn:8080/" : location.origin + "/";
// var base = "http://localhost:8888/";

var winH = $(window).height();
var args = {};
var supportTouch = function(){
    try {
        document.createEvent("TouchEvent");
        return true;
    } catch (e) {
        return false;
    }
}();
var pages = {};
var pageManager = {
    $container: $('#container'),
    _pageStack: [],
    _configs: [],
    _pageAppend: function(){},
    _defaultPage: null,
    _pageIndex: 1,
    setDefault: function (defaultPage) {
        this._defaultPage = this._find('name', defaultPage);
        return this;
    },
    setPageAppend: function (pageAppend) {
        this._pageAppend = pageAppend;
        return this;
    },
    init: function () {
        var self = this;

        $(window).on('hashchange', function () {
            var state = history.state || {};
            var url = location.hash.indexOf('#') === 0 ? location.hash : '#';
            var page = self._find('url', url) || self._defaultPage;
            if (state._pageIndex <= self._pageIndex || self._findInStack(url)) {
                self._back(page);
            } else {
                self._go(page);
            }
        });

        if (history.state && history.state._pageIndex) {
            this._pageIndex = history.state._pageIndex;
        }

        this._pageIndex--;

        var url = location.hash.indexOf('#') === 0 ? location.hash : '#';
        var page = self._find('url', url) || self._defaultPage;
        this._go(page);
        return this;
    },
    push: function (config) {
        this._configs.push(config);
        return this;
    },
    go: function (to) {
        var config = this._find('name', to);
        if (!config) {
            return;
        }
        location.hash = config.url;
        location.reload();
    },
    _go: function (config) {
        this._pageIndex ++;

        history.replaceState && history.replaceState({_pageIndex: this._pageIndex}, '', location.href);

        var html = $(config.template).html();
        var $html = $(html).addClass('slideIn').addClass(config.name);
        $html.on('animationend webkitAnimationEnd', function(){
            $html.removeClass('slideIn').addClass('js_show');
        });
        this.$container.append($html);
        this._pageAppend.call(this, $html);
        this._pageStack.push({
            config: config,
            dom: $html
        });

        if (!config.isBind) {
            this._bind(config);
        }

        return this;
    },
    back: function () {
        history.back();
    },
    _back: function (config) {
        this._pageIndex --;
        var stack = this._pageStack.pop();
        if (!stack) {
            return;
        }
        var url = location.hash.indexOf('#') === 0 ? location.hash : '#';
        var found = this._findInStack(url);
        if (!found) {
            var html = $(config.template).html();
            var $html = $(html).addClass('js_show').addClass(config.name);
            $html.insertBefore(stack.dom);
            location.reload();
            if (!config.isBind) {
                this._bind(config);
            }

            this._pageStack.push({
                config: config,
                dom: $html
            });
        }
        stack.dom.addClass('slideOut').on('animationend webkitAnimationEnd', function () {
            stack.dom.remove();
        });
        return this;
    },

    _findInStack: function (url) {
        var found = null;
        for(var i = 0, len = this._pageStack.length; i < len; i++){
            var stack = this._pageStack[i];
            if (stack.config.url === url) {
                found = stack;
                break;
            }
        }
        return found;
    },
    _find: function (key, value) {
        var page = null;
        for (var i = 0, len = this._configs.length; i < len; i++) {
            if (this._configs[i][key] === value) {
                page = this._configs[i];
                break;
            }
        }
        return page;
    },
    _bind: function (page) {
        var events = page.events || {};
        for (var t in events) {
            for (var type in events[t]) {
                var that = this;
                if(type == 'click' && supportTouch){
                    (function(dom, event){
                        var touchStartY;
                        that.$container.on('touchstart', dom, function (e) {
                            touchStartY = e.changedTouches[0].clientY;
                        });
                        that.$container.on('touchend', dom, function (e) {
                            if (Math.abs(e.changedTouches[0].clientY - touchStartY) > 10) return;
                            e.preventDefault();

                            events[dom][event].call(this, e);
                        });
                    })(t, type);
                }else{
                    this.$container.on(type, t, events[t][type]);
                }
            }
        }
        page.isBind = true;
    },


    GetQueryString:function (name)
    {
        var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if(r!=null)return  unescape(r[2]); return null;
    },

    show:function (def) {
        var tpls = $('script[type="text/html"]');
        window.home = function(){
            location.hash = '';
        };

        for (var i = 0, len = tpls.length; i < len; ++i) {
            var tpl = tpls[i], name = tpl.id.replace(/tpl_/, '');

            pages[name] = {
                name: name,
                url: '#' + name,
                template: '#' + tpl.id
            };
        }

        for (var page in pages) {
            pageManager.push(pages[page]);

        }

        var home = "index";

        if (def!="") {
            home = def;
        }

        pageManager
            .setPageAppend(function($html){
                var $foot = $html.find('.page__ft');
                if($foot.length < 1) return;

                if($foot.position().top + $foot.height() < winH){
                    $foot.addClass('j_bottom');
                }else{
                    $foot.removeClass('j_bottom');
                }
            })
            .setDefault(home)
            .init();

        Handlebars.registerHelper('ifcond', function(v1, v2, options) {
            if(v1 > v2) {
                return options.fn(this);
            }
            return options.inverse(this);
        });



        Handlebars.registerHelper('compare', function(left, operator, right, options) {
            if (arguments.length < 3) {
                throw new Error('Handlerbars Helper "compare" needs 2 parameters');
            }
            var operators = {
                '==':     function(l, r) {return l == r; },
                '===':    function(l, r) {return l === r; },
                '!=':     function(l, r) {return l != r; },
                '!==':    function(l, r) {return l !== r; },
                '<':      function(l, r) {return l < r; },
                '>':      function(l, r) {return l > r; },
                '<=':     function(l, r) {return l <= r; },
                '>=':     function(l, r) {return l >= r; },
                'typeof': function(l, r) {return typeof l == r; }
            };


            if (!operators[operator]) {
                throw new Error('Handlerbars Helper "compare" doesn\'t know the operator ' + operator);
            }

            var result = operators[operator](left, right);

            if (result) {
                return options.fn(this);
            } else {
                return options.inverse(this);
            }
        });







        // 初始化控制
        accordion.bind();
        searchbar.init();

        // .container 设置了 overflow 属性, 导致 Android 手机下输入框获取焦点时, 输入法挡住输入框的 bug
        // 相关 issue: https://github.com/weui/weui/issues/15
        // 解决方法:
        // 0. .container 去掉 overflow 属性, 但此 demo 下会引发别的问题
        // 1. 参考 http://stackoverflow.com/questions/23757345/android-does-not-correctly-scroll-on-input-focus-if-not-body-element
        //    Android 手机下, input 或 textarea 元素聚焦时, 主动滚一把
        if (/Android/gi.test(navigator.userAgent)) {
            window.addEventListener('resize', function () {
                if (document.activeElement.tagName == 'INPUT' || document.activeElement.tagName == 'TEXTAREA') {
                    window.setTimeout(function () {
                        document.activeElement.scrollIntoViewIfNeeded();
                    }, 0);
                }
            })
        }
    }

};

/* ==========================================================================
 封装  ajax数据请求
 { options:url,  必选
 options:data,  必选
 success:function(data){},  必选
 error:function(message){}  可选
 }
 ============================================================================ */

var ajax={

    //标准 ajax get 方法
    get:function (options) {
        toast.show("加载中");
        return $.ajax({
            type: 'GET',
            url: options.url,
            data: options.data,
            dataType: 'json',
            context: $('body'),
            crossDomain: true,
            xhrFields: {
                withCredentials: true
            },
            success: function (data) {
                if (data.message.type == "success") {
                    toast.close();
                    options.success(data.data);
                } else {
                    if (options.error != null) {
                        options.error(data.message);
                    } else {
                        toast.show(data.message.content);
                    }
                }
            },
            error: function (xhr, type) {
                if (options.error) {
                    options.error(data.message);
                } else {
                    toast.show("获取数据失败");
                }
            }
        })
    },

    //标准 ajax post 方法
    post:function (options) {
        toast.show("加载中");
        $.ajax({
            type: 'POST',
            url: options.url,
            data: options.data,
            dataType: 'json',
            context: $('body'),
            crossDomain: true,
            xhrFields: {
                withCredentials: true
            },
            contentType:(options.contentType!==""&&options.contentType!==undefined)?options.contentType:"application/x-www-form-urlencoded",
            processData:(options.processData!==""&&options.processData!==undefined)?options.processData:true,
            traditional:options.traditional?options.traditional:false,
            success: function (data) {
                if (data.message.type == "success") {
                    toast.close();
                    options.success(data.data);
                } else {
                    if (options.error != null) {
                        options.error(data.message);
                    } else {
                        toast.show(data.message.content);
                    }
                }
            },
            error: function (xhr, type) {
                if (options.error != null) {
                    options.error(data.message);
                } else {
                    toast.show("获取数据失败");
                }
            }
        })
    }

};

var render={
    fill:function(el,data) {
        var tpl = Handlebars.compile(el.html());
        return tpl(data);
    }

};






    
/**
 * Created by jf on 2015/9/11.
 * Modified by bear on 2016/9/7.
 */
    
    var dialog = {
        // 选择对话框  msg 提示内容， yes主操作回调方法 no 辅操作回调方法
        query: function (msg,yes,no) {

                var $dialog = $('#dialog1');

                var $content = $('#dialog1 .weui-dialog__bd');
                $content.html(msg);
                $dialog.fadeIn(200);

                $dialog.find('.weui-dialog__btn_default').one('click', function () {
                    $dialog.fadeOut(200);
                    if(no){
                        no();
                    }
                });

                $dialog.find('.weui-dialog__btn_primary').one('click', function () {
                    $dialog.fadeOut(200);
                    if(yes){
                        yes();
                    }
                });
        },
        // 提示对话框 msg 提示内容
        show: function (msg) {

                var $dialog = $('#dialog2');

                var $content = $('#dialog2 .weui-dialog__bd');
                $content.html(msg);
                $dialog.fadeIn(200);
                $dialog.find('.weui-dialog__btn').one('click', function () {
                    $dialog.fadeOut(200);
                });

        }
    };


    
// 常用方法1 页内 tips 提示 2秒后关闭
var tips = {
    show: function (msg) {
        var $tooltips = $('.js_tooltips');
        if ($tooltips.css('display') != 'none') {
            return;
        }
        $tooltips.html(msg);
        // 如果有`animation`, `position: fixed`不生效
        $('.page.cell').removeClass('slideIn');
        $tooltips.css('display', 'block');
        setTimeout(function () {
            $tooltips.css('display', 'none');
        }, 2000);
    }

};

// 常用方法1 闪屏 toast 提示，2秒后关闭
var toast = {
    t:null,
    show: function (msg) {
        var $toast = $('#toast');
        if(this.t){
            clearTimeout(this.t);
        }
        if (msg) {
            var $toastContent = $('#toast .weui-toast__content');
            $toastContent.html(msg);
        }
        $toast.fadeIn(100);
        toast.t=setTimeout(function () {
            $toast.fadeOut(100);
        }, 2000);
    },
    loading: function () {
        var $toast = $('#loadingToast');
        if ($toast.css('display') != 'none') {
            return;
        }
        $toast.fadeIn(100);
        setTimeout(function () {
            $toast.fadeOut(100);
        }, 2000);
    },
    close:function () {
        if(this.t){
            clearTimeout(this.t);
        }
        var $toast = $('#toast');
        $toast.fadeOut(100);
    }

};



    
// 搜索控制 此组件要内页自已引入 div 结构
var searchbar = {
    init: function () {
        var $searchBar = $('#searchBar'),
            $searchResult = $('#searchResult'),
            $searchText = $('#searchText'),
            $searchInput = $('#searchInput'),
            $searchClear = $('#searchClear'),
            $searchCancel = $('#searchCancel');
        function hideSearchResult() {
            $searchResult.hide();
            $searchInput.val('');
        }
        function cancelSearch() {
            hideSearchResult();
            $searchBar.removeClass('weui-search-bar_focusing');
            $searchText.show();
        }
        $searchText.on('click', function () {
            $searchBar.addClass('weui-search-bar_focusing');
            $searchInput.focus();
        });
        $searchInput
            .on('blur', function () {
                if (!this.value.length) cancelSearch();
            })
            .on('input', function () {
                if (this.value.length) {
                    $searchResult.show();
                } else {
                    $searchResult.hide();
                }
            });
        $searchClear.on('click', function () {
            hideSearchResult();
            $searchInput.focus();
        });
        $searchCancel.on('click', function () {
            cancelSearch();
            $searchInput.blur();
        });
    }

};

    
// 下弹式，选择列表 此组件要内页自已引入 div 结构
var actionsheet = {
    show: function (obj) {
        var $mask = $(obj).find(".actionsheet__mask");
        var $weuiActionsheet = $(obj).find(".weui-actionsheet");
        var $actionsheetCancel=$(obj).find(".cancel");
        function hideActionSheet() {
            $weuiActionsheet.removeClass('weui-actionsheet_toggle');
            $mask.removeClass('actionsheet__mask_show');
            $weuiActionsheet.on('transitionend', function () {
                $mask.css('display', 'none');
            }).on('webkitTransitionEnd', function () {
                $mask.css('display', 'none');
            })
        }
        $weuiActionsheet.addClass('weui-actionsheet_toggle');
        $mask.show().focus().addClass('actionsheet__mask_show').on('click', function () {
            hideActionSheet();
        });
        $actionsheetCancel.on('click', function () {
            hideActionSheet();
        });
        $weuiActionsheet.unbind('transitionend').unbind('webkitTransitionEnd');
    },
    close:function (obj) {
        var $mask = $(obj).find(".actionsheet__mask");
        var $weuiActionsheet = $(obj).find(".weui-actionsheet");
        function hideActionSheet() {
            $weuiActionsheet.removeClass('weui-actionsheet_toggle');
            $mask.removeClass('actionsheet__mask_show');
            $weuiActionsheet.on('transitionend', function () {
                $mask.css('display', 'none');
            }).on('webkitTransitionEnd', function () {
                $mask.css('display', 'none');
            })
        }
        hideActionSheet();

    }

};

$.fn.actionsheet = function () {
    actionsheet.show(this);
};

$.fn.actionsheetClose = function () {
    actionsheet.close(this);
};

    
;(function(){
    "use strict";
    // 进度条，支持3种效果
    var progress = {
            show: function () {
                var progress = 0;
                var $progress = $('.js_progress');

                function next() {
                    $progress.css({width: progress + '%'});
                    progress = ++progress % 100;
                    setTimeout(next, 30);
                }

                next();
            }

    };
})(window||this);

    

/**
 * silder gallery begin  [{image:"322332",url:328932382939},{image:"8349",url:"23i32u3i2u"}]
 */
;(function(){
    "use strict";
    var time;
    var type;
    var pImage;

    var SilderGallery = function (el,jsons,atime,atype,apImage) {
        this.data = jsons;
        this.el = el;
        time = atime;
        type = atype;
        pImage = apImage;
    };
    SilderGallery.prototype = {
        show:function () {
            var list = [];
            if(pImage == "true"){
                for (var i = 0; i < this.data.length; i++) {
                    list.push({content:this.data[i].image});
                    console.log(pImage);
                }
            }else if(pImage == "false"){
                for (var i = 0; i < this.data.productImages.length; i++) {
                    list.push({content:this.data.productImages[i].large});
                    //console.log(this.data.productImages.length);
                }
                $(".totalNum").html(this.data.productImages.length);
            }


            var S = new iSlider({
                data: list,
                dom: this.el,
                // isOverspread: true,
                //isVertical: true,
                isVertical: false,
                isLooping: true,
                isAutoplay: true,
                fixPage: false,
                animateTime: time,
                duration: 2000,
                onRenderComplete: function(index, ele) {
                                $(".pagenum").children('span').eq(0).text(index + 1);
                            },
                onSlideChange: function(index, ele) {
                                $(".pagenum").children('span').eq(0).text(index + 1);
                            },
                animateType: type  //zoomout,fade
            });
        }
    };

    $.fn.silder = function(jsons,time,type,pImage) {

        var sg= new SilderGallery(document.getElementById(this.attr("id")), jsons,time,type,pImage);

        return sg.show();
    }


})();

/**
 * silder gallery end
 */

    
// 微信插件
var weixin = {
    url: base + 'weixin/mutual/get_config.jhtml',
    lat: 0, // 纬度，浮点数，范围为90 ~ -90
    lng: 0, // 经度，浮点数，范围为180 ~ -180。
    speed: 0, // 速度，以米/每秒计
    accuracy: 0, // 位置精度
    config: {},
    setting: "none",
    init: function () {
        var $def = $.Deferred();
        console.log("浏览器版本：" + (cookie.getCookie('browse_version') == 'MicroMessenger' ? 'weixin' : 'other'));
        if (cookie.getCookie('browse_version') != 'MicroMessenger') {
            $def.reject();
            return $def.promise();
        }
        console.log(weixin.setting);
        if (weixin.setting == "none") {
            weixin.setting = "pending";
            $.getJSON(weixin.url + '?url=' + encodeURIComponent(location.href.split('#')[0])).done(function (res) {
                var config = res.data;
                wx.config({
                    beta: true,
                    debug: false,
                    appId: config.appId,
                    timestamp: config.timestamp,
                    nonceStr: config.nonceStr,
                    signature: config.signature,
                    jsApiList: [
                        'onMenuShareTimeline',
                        'onMenuShareAppMessage',
                        'onMenuShareQQ',
                        'onMenuShareWeibo',
                        'onMenuShareQZone',
                        'getLocation',
                        'openLocation',
                        'scanQRCode'
                    ]
                });
                weixin.setting = "success";
                weixin.config = config;
                $def.resolve(weixin.config);
                console.log("测试resolve方法后是够继续执行");
            }).fail(function () {
                weixin.setting = "none";
                $def.reject();
            });
        } else if (weixin.setting == "pending") {
            var t = window.setInterval(function () {
                if (weixin.setting == "success") {
                    clearInterval(t);
                    $def.resolve(weixin.config);
                } else if (weixin.setting == "none") {
                    clearInterval(t);
                    $def.reject();
                }
            }, 300);
        } else if (weixin.setting == "success") {
            $def.resolve(weixin.config);
        }
        return $def.promise();
    },
    /**
     * 分享接口
     * title    分享标题
     * desc     分享描述
     * link     分享链接
     * imgUrl   分享图标
     */
    share: function (jsons) {
        weixin.init().done(function (config) {
            wx.ready(function () {
                //分享到朋友圈
                wx.onMenuShareTimeline({
                    title: jsons && jsons.title ? jsons.title : config.sharetitle,
                    desc: jsons && jsons.desc ? jsons.desc : config.sharedesc,
                    link: jsons && jsons.link ? jsons.link : config.sharelink,
                    imgUrl: jsons && jsons.imgUrl ? jsons.imgUrl : config.shareimage,
                    success: function () {
                        // 用户确认分享后执行的回调函数
                    },
                    cancel: function () {
                        // 用户取消分享后执行的回调函数
                    }
                });
                //分享给朋友
                wx.onMenuShareAppMessage({
                    title: jsons && jsons.title ? jsons.title : config.sharetitle,
                    desc: jsons && jsons.desc ? jsons.desc : config.sharedesc,
                    link: jsons && jsons.link ? jsons.link : config.sharelink,
                    imgUrl: jsons && jsons.imgUrl ? jsons.imgUrl : config.shareimage,
                    success: function () {
                        // 用户确认分享后执行的回调函数
                    },
                    cancel: function () {
                        // 用户取消分享后执行的回调函数
                    }
                });
                //分享到QQ
                wx.onMenuShareQQ({
                    title: jsons && jsons.title ? jsons.title : config.sharetitle,   // 分享标题
                    desc: jsons && jsons.desc ? jsons.desc : config.sharedesc,   // 分享描述
                    link: jsons && jsons.link ? jsons.link : config.sharelink,   // 分享链接
                    imgUrl: jsons && jsons.imgUrl ? jsons.imgUrl : config.shareimage,   // 分享图标
                    success: function () {
                        // 用户确认分享后执行的回调函数
                    },
                    cancel: function () {
                        // 用户取消分享后执行的回调函数
                    }
                });
                //分享到腾讯微博
                wx.onMenuShareWeibo({
                    title: jsons && jsons.title ? jsons.title : config.sharetitle,   // 分享标题
                    desc: jsons && jsons.desc ? jsons.desc : config.sharedesc,   // 分享描述
                    link: jsons && jsons.link ? jsons.link : config.sharelink,   // 分享链接
                    imgUrl: jsons && jsons.imgUrl ? jsons.imgUrl : config.shareimage,   // 分享图标
                    success: function () {
                        // 用户确认分享后执行的回调函数
                    },
                    cancel: function () {
                        // 用户取消分享后执行的回调函数
                    }
                });
                //分享到QQ空间
                wx.onMenuShareQZone({
                    title: jsons && jsons.title ? jsons.title : config.sharetitle,   // 分享标题
                    desc: jsons && jsons.desc ? jsons.desc : config.sharedesc,   // 分享描述
                    link: jsons && jsons.link ? jsons.link : config.sharelink,   // 分享链接
                    imgUrl: jsons && jsons.imgUrl ? jsons.imgUrl : config.shareimage,   // 分享图标
                    success: function () {
                        // 用户确认分享后执行的回调函数
                    },
                    cancel: function () {
                        // 用户取消分享后执行的回调函数
                    }
                });

            });
        });
    },
    /**
     * 获取地理位置接口
     */
    location: function (fn) {
        weixin.init().done(function (config) {
            wx.ready(function () {
                wx.getLocation({
                    type: 'gcj02',
                    success: function (res) {
                        weixin.lat = res.latitude; // 纬度，浮点数，范围为90 ~ -90
                        weixin.lng = res.longitude; // 经度，浮点数，范围为180 ~ -180。
                        weixin.speed = res.speed; // 速度，以米/每秒计
                        weixin.accuracy = res.accuracy; // 位置精度
                        console.log("定位到的经纬度：");
                        console.log("lat:" + weixin.lat);
                        console.log("lng:" + weixin.lng);
                        if(fn) fn(true);//true表示已获取经纬度
                        new lbs(function (data) {
                            console.log("经纬度获取到的城市：");
                            console.log(data);

                            if (data.update) {
                                // if (confirm("检测当前所在城市为" + data.area.name + ",是否切换？")) {
                                //     new lbs(function () {
                                //         location.reload();
                                //     }).update({lat: weixin.lat, lng: weixin.lng})
                                // }
                                dialog.query("检测当前所在城市为" + data.area.name + ",是否切换？",function () {
                                    new lbs(function () {
                                        location.reload();
                                    }).update({lat: weixin.lat, lng: weixin.lng})
                                });

                            }
                        }).get({lat: weixin.lat, lng: weixin.lng});
                    },
                    fail: function () {
                        console.log("定位失败");
                        if (fn) fn();
                    }
                });
                wx.error(function (res) {
                    console.log(res);
                    if (fn) fn();
                });

            });
        }).fail(function () {
            if (fn) fn();
        });
    },
    /**
     * 使用微信内置地图查看位置接口
     * lat  纬度
     * lng  经度
     * name 位置名
     * address  地址详情说明
     * url  在查看位置界面底部显示的超链接,可点击跳转
     */
    openLocation: function (jsons) {
        weixin.init().done(function (config) {
            wx.ready(function () {
                wx.openLocation({
                    latitude: jsons.lat,
                    longitude: jsons.lng,
                    name: jsons.name,
                    address: jsons.address,
                    scale: 18,
                    infoUrl: jsons.url ? jsons.url : ''
                });
                wx.error(function (res) {
                    console.log(res);
                });
            });
        });
    },
    /**
     * 首页扫一扫
     */
    scanQRCode: function () {
        weixin.init().done(function (config) {
            wx.ready(function () {
                wx.scanQRCode({
                    desc: '扫一扫',
                    needResult: 0, // 默认为0，扫描结果由微信处理，1则直接返回扫描结果，
                    scanType: ["qrCode", "barCode"] // 可以指定扫二维码还是一维码，默认二者都有
                });
                wx.error(function (res) {
                    console.log(res);
                });

            });
        });
    },
    /**
     * 商家首页扫一扫
     * tenantId 商家Id
     */
    scanQRCode1: function (tenantId) {
        weixin.init().done(function (config) {
            wx.ready(function () {
                wx.scanQRCode({
                    desc: '扫一扫',
                    needResult: 1, // 默认为0，扫描结果由微信处理，1则直接返回扫描结果，
                    scanType: ["qrCode", "barCode"], // 可以指定扫二维码还是一维码，默认二者都有
                    success: function (res) {
                        var result = res.resultStr; // 当needResult 为 1 时，扫码返回的结果
                        if (result.substr(0, 4) == 'http') {
                            location.href = result;
                            return;
                        }
                        var arr_result = result.split(',');
                        var barcode = arr_result[arr_result.length - 1];
                        new tenant(function (data) {
                            if (data.length > 0) {
                                location.href = '/weixin/product/product-details.html' + data[0].id;
                            } else {
                                toast.show("此商品没有上架");
                            }
                        }).barcode({
                            id: tenantId,
                            barcode: barcode
                        });

                    }
                });
                wx.error(function (res) {
                    console.log(res);
                });

            });
        });
    }
};


    

    // 底部导航选中变色

    ;(function(){
        "use strict";
        var footernav = {
            click: function(e){
                var $this=e.target;
                $this.addClass('weui-bar__item_on').siblings('.weui__item_on').removeClass('weui-bar__item_on');
            }
        };
    })(window||this);



    
var dropmenu = {
    init: function (navbar1, navbar2, navbar3) {
        if (navbar1) $(".navbar1").text(navbar1);
        if (navbar2) $(".navbar2").text(navbar2);
        if (navbar3) $(".navbar3").text(navbar3);
        $('.dropmenu #navbar .weui-navbar__item').on('click', function () {
            //$(this).addClass("active").siblings().removeClass("active");
            $('.dropmenu #nav_menu .menu').eq($(this).index()).toggle().siblings('div').hide();
            if($('.dropmenu #nav_menu .menu').eq($(this).index()).css("display") == "block"){
                $(this).addClass("active").siblings().removeClass("active");
            }else{
                $(this).removeClass("active");

            }
            $('.dropmenu #nav_menu').addClass('bg');


            document.getElementById('mask').addEventListener('touchmove', function (event) {     //对蒙版绑定touchmove的属性
                //判断条件,条件成立才阻止背景页面滚动,其他情况不会再影响到页面滚动
                if ($('#mask').css("display","block")) {
                    event.preventDefault();
                }
            });

            if($(".dropmenu #navbar .weui-navbar__item").hasClass("active")){
                $('#mask').css("display","block");
            }else{
                $('#mask').css("display","none");
            }




        });
        $(".dropmenu").on("click", "#nav_menu ul li", function () {
            $(this).addClass("active").siblings().removeClass("active");
            $(this).parent().parent().children("ol").eq($(this).index()).show().siblings('ol').hide();

            if($(this).parent().parent().children("ol").eq($(this).index()).children('li').length == 0){
                $(this).parent().parent().children("ol").eq($(this).index()).html('<div class="data_none" style="line-height: 40vh; font-size: 18px;">暂无数据</div>');
            }
        });



        $('#mask').click(function () {
            $('.dropmenu #nav_menu').removeClass('bg');
            $('#mask').css("display","none");
            $('.dropmenu #nav_menu .menu').hide();
            $('#navbar .weui-navbar__item').removeClass("active");
        })
    },
    bindCity: function (data, fn) {
        var html = '';
        var chtml = '';
        html += '<ul class="menu-item weui-flex__item f14 areas">';
        html += '<li class="weui-cell hot_area"><span>热门商圈</span><span class="hotregion none"></span></li>';
        html += '<li class="weui-cell" id="area_all" areaid="" communityid=""><span>全城</span></li>';
        $.each(data.area, function (index, area) {
            html += '<li class="weui-cell">';
            html += '<span>' + area.name + '</span>';
            html += '</li>';
            chtml += '<ol class="menu-item weui-flex__item non f14">';
            chtml += '<li class="weui-cell region_all"><span areaid="' + area.id + '" communityid="">全部</span></li>';
            $.each(area.communities, function (ind, community) {
                chtml += '<li class="weui-cell">';
                chtml += '<span areaId="' + area.id + '" communityId="' + community.id + '">' + community.name + '</span>';
                chtml += '</li>';
            });
            chtml += '</ol>';
        });
        html += "</ul>";
        html += chtml;


        $(".dropmenu #nav_menu .aread").html(html);
        $(".areas").after("<ol class='menu-item weui-flex__item hot non f14'></ol><ol class='menu-item weui-flex__item non f14'></ol>");
        $(".dropmenu").on("click", "#nav_menu .aread ol li", function () {
            $(this).addClass("active").siblings().removeClass("active");
            $(this).parent().parent().hide();

            $('.dropmenu #nav_menu').removeClass('bg');
            $('#mask').css("display","none");

            $(".dropmenu #navbar div").eq($(this).parent().parent().index()).find('.navbar1').html($(this).html());
            if (fn) {
                fn({
                    "areaId": $(this).find("span").attr("areaId"),
                    "communityId": $(this).find("span").attr("communityId")
                });
            }
            $('#navbar .weui-navbar__item').removeClass("active");
        });
        $(".dropmenu").on("click", "#area_all", function () {
            $(this).addClass("active").siblings().removeClass("active");
            $(this).parent().parent().hide();
            $(".aread").find('ol').hide();
            $('.dropmenu #nav_menu').removeClass('bg');
            $('#mask').css("display","none");
            $(".dropmenu #navbar div").eq($(this).parent().index()).find('.navbar1').html($(this).html());
            if (fn) {
                fn({
                    "areaId": "",
                    "communityId": ""
                });
            }
            $('#navbar .weui-navbar__item').removeClass("active");
        });


        new lbs(function (data) {
            console.log("当前城市：");
            console.log(data);
            $('.hotregion').html(data.id);
        }).current();
        $(".dropmenu").on("click", ".hot li", function () {
            var all = $('.hotregion').html();
            if (fn) {
                fn({
                    "areaId": all,
                    "communityId": $(this).find("span").attr("communityId")
                });
            }

        });

        $(".dropmenu").on("click", ".region_all", function () {
            if (fn) {
                fn({
                    "areaId": $(this).find("span").attr("areaId"),
                    "communityId": ""
                });
            }
        });

    },
    bindCategory: function (data, fn) {
        var html = '';
        var chtml = '';
        html += '<ul class="menu-item weui-flex__item f14 goods_category">';
        html += '<li class="weui-cell" id="class_all" categoryid=""><span>全部类别</span></li>';
        $.each(data, function (index, category) {
            html += '<li class="weui-cell">';
            html += '<span>' + category.name + '</span>';
            html += '</li>';
            chtml += '<ol class="menu-item weui-flex__item non f14">';
            $.each(category.childrens, function (ind, child) {
                chtml += '<li class="weui-cell">';
                chtml += '<span categoryId="' + child.id + '">' + child.name + '</span>';
                chtml += '</li>';
            });
            chtml += '</ol>';
        });
        html += "</ul>";
        html += chtml;
        $(".dropmenu #nav_menu .categoryd").html(html);
        $(".goods_category").after("<ol class='menu-item weui-flex__item non f14 ff'></ol>");
        $(".dropmenu").on("click", "#nav_menu .categoryd ol li", function () {
            $(this).addClass("active").siblings().removeClass("active");
            $(this).parent().parent().hide();

            $('.dropmenu #nav_menu').removeClass('bg');
            $('#mask').css("display","none");

            $("#navbar div").eq($(this).parent().parent().index()).find('.navbar2').html($(this).html());
            if (fn) {
                fn({"categoryId": $(this).find("span").attr("categoryId")});
            }
            $('#navbar .weui-navbar__item').removeClass("active");
        });
        $(".dropmenu").on("click", "#class_all", function () {
            $(this).addClass("active").siblings().removeClass("active");
            $(this).parent().parent().hide();
            $("categoryd").find('ol').addClass('non');
            $('.dropmenu #nav_menu').removeClass('bg');
            $('#mask').css("display","none");
            $("#navbar div").eq($(this).parent().parent().index()).find('.navbar2').html($(this).html());
            if (fn) {
                fn({"categoryId": ""});
            }
            $('#navbar .weui-navbar__item').removeClass("active");
        });
    },
    bindOrder: function (data, fn) {
        var html = '';
        html += '<ol class="menu-item weui-flex__item f14" style="width:100vw">';
        $.each(data, function (i, v) {
            html += '<li class="weui-cell' + (i == 0 ? " active" : "") + '">';
            html += '<span>' + v + '</span>';
            html += '</li>';
        });
        html += '</ol>';
        $(".dropmenu #nav_menu .orderd").html(html);
        $(".dropmenu").on("click", "#nav_menu .orderd ol li", function () {
            $(this).addClass("active").siblings().removeClass("active");
            $(this).parent().parent().hide();

            $('.dropmenu #nav_menu').removeClass('bg');
            $('#mask').css("display","none");

            $("#navbar div").eq($(this).parent().parent().index()).find('.navbar3').html($(this).html());
            if (fn) {
                fn($(this).index());
            }
            $('#navbar .weui-navbar__item').removeClass("active");
        });
    }


};


    
// 选项卡    此组件要内页自已引入 div 结构
var tabBar = {
        bind: function () {
            var $div_li = $("div.vux-tab .vux-tab-item");
            var num = $div_li.length;
            var $bor = document.getElementById("bor");

            $div_li.on('click', function () {
                $(this).addClass("selected").siblings().removeClass("selected");
                var index = $div_li.index(this);
                var c = 100 / num;
                var a = index * c;
                var b = 100 - c - a;
                $bor.style.left = a + "%";
                $bor.style.right = b + "%";
                $("div.vux-swiper-item")
                    .eq(index).show()
                    .siblings().hide();
            })
        }
    };



    
;(function(){
    'use strict';
    var win = window;
    var doc = document;
    var $win = $(win);
    var $doc = $(doc);
    $.fn.pageable = function(options){
        return new Pageable(this, options);
    };
    var Pageable = function(element, options){
        var me = this;
        me.$element = element;
        // 上方是否插入DOM
        me.upInsertDOM = false;
        // loading状态
        me.loading = false;
        // 是否锁定
        me.isLockUp = false;
        me.isLockDown = false;
        // 是否有数据
        me.isData = true;
        me._scrollTop = 0;
        me._threshold = 50;
        me.pageNumber = 1;
        me.init(options);
    };

    // 初始化
    Pageable.prototype.init = function(options){
        var me = this;
        // console.log(me.$element.html());
        me.opts = $.extend(true, {}, {
            scrollArea : me.$element,                                            // 滑动区域
            domUp : {                                                            // 上方DOM
                domClass   : 'pageable-up',
                domRefresh : '<div class="pageable-refresh">↓下拉刷新</div>',
                domUpdate  : '<div class="pageable-update">↑释放更新</div>',
                domLoad    : '<div class="pageable-load "><span class="loading"></span>加载中...</div>'
            },
            domDown : {                                                          // 下方DOM
                domClass   : 'pageable-down',
                domRefresh : '<div class="pageable-refresh">↑上拉加载更多</div>',
                domLoad    : '<div class="pageable-load"><span class="loading"></span>加载中...</div>',
                domNoData  : '<div class="pageable-noData">亲，已经到底了</div>'
            },
            autoLoad : true,                                                     // 自动加载
            distance : 50,                                                       // 拉动距离
            threshold : '',                                                      // 提前加载距离
            loadUpFn : '',                                                       // 上方function
            loadDownFn : ''                                                      // 下方function
        }, options);

        // 如果加载下方，事先在下方插入DOM
        if(me.opts.loadDownFn != ''){

            me.$element.append('<div class="'+me.opts.domDown.domClass+'">'+me.opts.domDown.domRefresh+'</div>');
            me.$domDown = $('.'+me.opts.domDown.domClass);

        }

        // 计算提前加载距离
        if(!!me.$domDown && me.opts.threshold === ''){
            // 默认滑到加载区2/3处时加载
            me._threshold = Math.floor(me.$domDown.height()*1/3);
        }else{
            me._threshold = me.opts.threshold;
        }

        // 判断滚动区域
        if(me.opts.scrollArea == win){
            me.$scrollArea = $win;
            // 获取文档高度
            me._scrollContentHeight = $doc.height();
            // 获取win显示区高度  —— 这里有坑
            me._scrollWindowHeight = doc.documentElement.clientHeight;
        }else{
            me.$scrollArea = me.opts.scrollArea;
            me._scrollContentHeight = me.$element[0].scrollHeight;
            me._scrollWindowHeight = me.$element.height();
        }
        fnAutoLoad(me);

        // 窗口调整
        $win.on('resize',function(){
            if(me.opts.scrollArea == win){
                // 重新获取win显示区高度
                me._scrollWindowHeight = win.innerHeight;
            }else{
                me._scrollWindowHeight = me.$element.height();
            }
        });

        // 绑定触摸
        me.$element.on('touchstart',function(e){
            if(!me.loading){
                fnTouches(e);
                fnTouchstart(e, me);
            }
        });
        me.$element.on('touchmove',function(e){
            if(!me.loading){
                fnTouches(e, me);
                fnTouchmove(e, me);
            }
        });
        me.$element.on('touchend',function(){
            if(!me.loading){
                fnTouchend(me);
            }
        });

        // 加载下方
        me.$scrollArea.on('scroll',function(){
            me._scrollTop = me.$scrollArea.scrollTop();
            if (me.opts.scrollFn) {
                me.opts.scrollFn(me);
            }
            // 滚动页面触发加载数据
            if(me.opts.loadDownFn != '' && !me.loading && !me.isLockDown && (me._scrollContentHeight - me._threshold) <= (me._scrollWindowHeight + me._scrollTop)){
                loadDown(me);
            }
        });
    };

    // touches
    function fnTouches(e){
        if(!e.touches){
            e.touches = e.originalEvent.touches;
        }
    }

    // touchstart
    function fnTouchstart(e, me){
        me._startY = e.touches[0].pageY;
        // 记住触摸时的scrolltop值
        me.touchScrollTop = me.$scrollArea.scrollTop();
    }

    // touchmove
    function fnTouchmove(e, me){
        me._curY = e.touches[0].pageY;
        me._moveY = me._curY - me._startY;

        if(me._moveY > 0){
            me.direction = 'down';
        }else if(me._moveY < 0){
            me.direction = 'up';
        }

        var _absMoveY = Math.abs(me._moveY);
        // console.log(me.direction);
        // console.log(me.isLockUp);
        // 加载上方
        if(me.opts.loadUpFn != '' && me.touchScrollTop <= 0 && me.direction == 'down' && !me.isLockUp){
            e.preventDefault();

            me.$domUp = $('.'+me.opts.domUp.domClass);
            // 如果加载区没有DOM
            if(!me.upInsertDOM){
                me.$element.prepend('<div class="'+me.opts.domUp.domClass+'"></div>');
                me.upInsertDOM = true;
            }

            fnTransition(me.$domUp,0);

            // 下拉
            if(_absMoveY <= me.opts.distance){
                me._offsetY = _absMoveY;
                // todo：move时会不断清空、增加dom，有可能影响性能，下同
                me.$domUp.html(me.opts.domUp.domRefresh);
                // 指定距离 < 下拉距离 < 指定距离*2
            }else if(_absMoveY > me.opts.distance && _absMoveY <= me.opts.distance*2){
                me._offsetY = me.opts.distance+(_absMoveY-me.opts.distance)*0.5;
                me.$domUp.html(me.opts.domUp.domUpdate);
                // 下拉距离 > 指定距离*2
            }else{
                me._offsetY = me.opts.distance+me.opts.distance*0.5+(_absMoveY-me.opts.distance*2)*0.2;
            }

            me.$domUp.css({'height': me._offsetY});
        }
    }

    // touchend
    function fnTouchend(me){
        var _absMoveY = Math.abs(me._moveY);
        if(me.opts.loadUpFn != '' && me.touchScrollTop <= 0 && me.direction == 'down' && !me.isLockUp){
            fnTransition(me.$domUp,300);

            if(_absMoveY > me.opts.distance){
                me.$domUp.css({'height':me.$domUp.children().height()});
                me.$domUp.html(me.opts.domUp.domLoad);
                me.loading = true;
                me.opts.loadUpFn(me);
            }else{
                me.$domUp.css({'height':'0'}).on('webkitTransitionEnd mozTransitionEnd transitionend',function(){
                    me.upInsertDOM = false;
                    $(this).remove();
                });
            }
            me._moveY = 0;
        }
    }

    // 如果文档高度不大于窗口高度，数据较少，自动加载下方数据
    function fnAutoLoad(me){
        console.log("autoload="+me.opts.autoLoad);
        if(me.opts.autoLoad){
            if((me._scrollContentHeight - me._threshold) <= me._scrollWindowHeight){
                loadDown(me);
            }
        }
    }

    // 重新获取文档高度
    function fnRecoverContentHeight(me){
        if(me.opts.scrollArea == win){
            me._scrollContentHeight = $doc.height();
        }else{
            me._scrollContentHeight = me.$element[0].scrollHeight;
        }
    }

    // 加载下方
    function loadDown(me){
        me.direction = 'up';
        me.$domDown.html(me.opts.domDown.domLoad);
        me.loading = true;
        me.opts.loadDownFn(me);
    }

    // 锁定
    Pageable.prototype.lock = function(direction){
        var me = this;
        // 如果不指定方向
        if(direction === undefined){
            // 如果操作方向向上
            if(me.direction == 'up'){
                me.isLockDown = true;
                // 如果操作方向向下
            }else if(me.direction == 'down'){
                me.isLockUp = true;
            }else{
                me.isLockUp = true;
                me.isLockDown = true;
            }
            // 如果指定锁上方
        }else if(direction == 'up'){
            me.isLockUp = true;
            // 如果指定锁下方
        }else if(direction == 'down'){
            me.isLockDown = true;
            // 为了解决DEMO5中tab效果bug，因为滑动到下面，再滑上去点tab，direction=down，所以有bug
            me.direction = 'up';
        }
    };

    // 解锁
    Pageable.prototype.unlock = function(){
        var me = this;
        // 简单粗暴解锁
        me.isLockUp = false;
        me.isLockDown = false;
        // 为了解决DEMO5中tab效果bug，因为滑动到下面，再滑上去点tab，direction=down，所以有bug
        me.direction = 'up';
    };

    // 无数据
    Pageable.prototype.noData = function(flag){
        var me = this;
        if(flag === undefined || flag == true){
            me.isData = false;
        }else if(flag == false){
            me.isData = true;
        }
    };

    // refresh
    Pageable.prototype.refresh = function(){
        var me=this;
        me.$domUp = $('.'+me.opts.domUp.domClass);
        me.$domUp.css({'height':me.$domUp.children().height()});
        me.$domUp.html(me.opts.domUp.domLoad);
        me.loading = true;
        me.noData(false);
        me.unlock();
        me.opts.loadUpFn(me);

    };

    // refreshDown
    Pageable.prototype.refreshDown = function(){
        this.unlock();
        this.noData(false);
        loadDown(this);
    };

    // 重置
    Pageable.prototype.resetload = function(){
        var me = this;
        if(me.direction == 'down' && me.upInsertDOM){
            console.log(111111111111111);
            me.$domUp.css({'height':'0'}).on('webkitTransitionEnd mozTransitionEnd transitionend',function(){
                me.loading = false;
                me.upInsertDOM = false;
                $(this).remove();
                fnRecoverContentHeight(me);
                me.unlock();
                // 加载区修改样式
                //me.$domDown.html(me.opts.domDown.domRefresh);
            });
        }else if(me.direction == 'up'){
            console.log(22222222222222);

            me.loading = false;
            // 如果有数据
            if(me.isData){
                // 加载区修改样式
                me.$domDown.html(me.opts.domDown.domRefresh);
                fnRecoverContentHeight(me);
                fnAutoLoad(me);
            }else{
                // 如果没数据
                me.$domDown.html(me.opts.domDown.domNoData);
            }
        }
    };

    // css过渡
    function fnTransition(dom,num){
        dom.css({
            '-webkit-transition':'all '+num+'ms',
            'transition':'all '+num+'ms'
        });
    }
})();

    
/**
 * silder gallery begin
 */
;(function () {
    "use strict";
    var iNum;
    var rNum;
    var tNum;
    var SilderProductChannel = function (el, jsons, identNum, remNum, thNum) {
        this.data = jsons;
        this.el = el;
        iNum = identNum;
        rNum = remNum;
        tNum = thNum;
    };
    SilderProductChannel.prototype = {
        show: function () {
            var list = [];
            var str = '';
            for (var i = 0; i < this.data.length; i++) {
                if (tNum == 0) {
                    if ((i % rNum) == 0) {
                        str = '<div class="channel">';
                    }
                    str += '<div class="channel__item"><a href="../product-channel/channel.html?id=' + this.data[i].id + '" data-id="' + this.data[i].id + '"> ';
                    str += '<p><img src="' + this.data[i].image + '">' +
                        '<span class="Ftext">' + this.data[i].name + '</span>' +
                        '</p>';
                    str += '</a></div>';
                    if (((i % rNum) == iNum) && (i > 0)) {
                        str += '</div>';
                        list.push({content: str});
                        str = "";
                    }
                } else {
                    if ((i % rNum) == 0) {
                        str = '<div class="channel">';
                    }
                    str += '<div class="channel__item"><a href="../product/product-details.html?id=' + this.data[i].id + '" data-id="' + this.data[i].id + '"> ';
                    str += '<p><img src="' + this.data[i].thumbnail + '"></p>';
                    str += '<p class="f14">' +
                        '<span>￥' + this.data[i].price;

                    // alert(this.data[i].marketPrice);
                    // alert(this.data[i].price);
                    // alert(this.data[i].marketPrice == this.data[i].price);
                    if (this.data[i].marketPrice == this.data[i].price) {
                    } else if (this.data[i].marketPrice == 0) {
                        // $('.marketPrice_pic').eq(i).html('');
                    } else {
                        str += '<i class="f12 marketPrice_pic">￥' + this.data[i].marketPrice;
                    }

                    str += '</i></span>' +
                        '<span class="f12">好评度' + this.data[i].positivePercent + '%</span>' +
                        '</p>';
                    str += '</a></div>';
                    if (((i % rNum) == iNum) && (i > 0)) {
                        str += '</div><div class="kong"></div>';
                        list.push({content: str});
                        str = "";
                    }

                }
            }
            if (str != "") {
                str += '</div><div class="kong"></div>';
                list.push({content: str});
            }

            var S = new iSlider({
                data: list,
                dom: this.el,
                // isOverspread: true,
                //isVertical: true,
                isVertical: false,
                isLooping: true,
                isAutoplay: true,
                fixPage: false,
                animateTime: 2000,
                animateType: 'card'
            });
        }
    };
    $.fn.silderProductChannel = function (jsons, iNum, rNum, tNum) {
        var sg = new SilderProductChannel(document.getElementById(this.attr("id")), jsons, iNum, rNum, tNum);
        return sg.show();
    }

})();

/**
 * silder gallery end
 */

    
/**
 * Created by Administrator on 2016/11/8 0018.
 */
/**
 * 折叠面板
 */

var accordion = {
    bind: function () {
        $(".accordion .weui-cell_access").on('click', function () {
                $(this).next('div').toggle();
        });
        $('.accordion .weui-check__label').on('click', function () {
            var p = $(this).find('p');
            $(this).parent().parent().prev('div').find('p').eq(1).html(p.html());
            $(this).find('input').val(p.attr('data-id'));
            var styleid=$(this).find('p').attr('data-id');

            //显示到店提货显示与隐藏
            var sd = $(this).find('p').text();
            if(  sd == "到店提货") {
                $('.delivery').css('display','block');
            } else {
                $('.delivery').css('display','none');
            }

            $(this).parent().parent().prev('div').find('p').eq(1).attr('styleid',styleid)
            $(this).parent().parent().css("display",'none');
        })
    }
};




    
/**
 * Created by Administrator on 2016/8/10 0010.
 */
/** by songran 2016-07-27
 * 倒计时的实现
 */
var fnTimeCountDown = function(d, o){
    var f = {
        zero: function(n){
            var n = parseInt(n, 10);
            if(n > 0){
                if(n <= 9){
                    n = "0" + n;
                }
                return String(n);
            }else{
                return "00";
            }
        },
        dv: function(){
            //d = d || Date.UTC(2050, 0, 1); //如果未定义时间，则我们设定倒计时日期是2050年1月1日

            var future = new Date(d[0],d[1]-1,d[2],d[3],d[4],d[5]), now = new Date();
            //现在将来秒差值
            var dur = Math.round((future.getTime() - now.getTime()) / 1000), pms = {
                sec: "00",
                mini: "00",
                hour: "00",
                day: "00",
                month: "00",
                year: "0"
            };
            if(dur > 0){
                pms.sec = f.zero(dur % 60);
                pms.mini = Math.floor((dur / 60)) > 0? f.zero(Math.floor((dur / 60)) % 60) : "00";
                pms.hour = Math.floor((dur / 3600)) > 0? f.zero(Math.floor((dur / 3600)) % 24) : "00";
                pms.day = Math.floor((dur / 86400)) > 0? f.zero(Math.floor((dur / 86400)) % 30) : "00";
                //月份，以实际平均每月秒数计算
                pms.month = Math.floor((dur / 2629744)) > 0? f.zero(Math.floor((dur / 2629744)) % 12) : "00";
                //年份，按按回归年365天5时48分46秒算
                pms.year = Math.floor((dur / 31556926)) > 0? Math.floor((dur / 31556926)) : "0";
            }
            return pms;
        },
        ui: function(){
            if(o.sec){
                o.sec.innerHTML = f.dv().sec;
            }
            if(o.mini){
                o.mini.innerHTML = f.dv().mini;
            }
            if(o.hour){
                o.hour.innerHTML = f.dv().hour;
            }
            if(o.day){
                o.day.innerHTML = f.dv().day;
            }
            if(o.month){
                o.month.innerHTML = f.dv().month;
            }
            if(o.year){
                o.year.innerHTML = f.dv().year;
            }
            setTimeout(f.ui, 1000);
        }
    };
    f.ui();
};



    
/**
 * 选择组件
 * Created by WangChao on 11/11 0011.
 */

var choose = {
    area: function (data) {
        ajax.get({
            url: base + "weixin/area/children.jhtml",
            data: data,
            success: function (data) {
                var html = "";
                $.each(data, function (index, area) {
                    var ul = '<ul class="weui-cell">';
                    ul += '<li id="' + area.id + '" name="' + area.name + '" fullName="' + area.fullName + '" hasChildren="' + area.hasChildren + '" class="weui-cell__bd"><a href="javascript:;">' + area.name + '</a></li>';
                    ul += '</ul>';
                    html += ul;
                });
                $(".chooseWidget").show().html(html);
                $(".chooseWidget ul").click(function(){
                    var $this = $(this).find("li");
                    if ($this.attr("hasChildren") == "true") {
                        choose.area({areaId: $this.attr("id")});
                    } else {
                        $(".chooseWidget").hide().html("");
                        if(choose.callBack){
                            choose.callBack({id: $this.attr("id"), name: $this.attr("name"), fullName: $this.attr("fullName")});
                        }
                    }
                });
            }
        });
    }
};

    
/**
 * 选择银行卡组件
 * Created by Wan on 11/21 0011.
 */

var choosebank = {
    bank: function (data) {
        ajax.get({
            url: base + "weixin/member/bank/bank_info/list.jhtml",
            data: data,
            success: function (data) {
                var html = "";
                $.each(data, function (index, bank) {
                    var ul = '<ul class="weui-cell">';
                    ul += '<li id="' + bank.id + '" bankCode="' + bank.bankCode + '" name="' + bank.bankName + '" class="weui-cell__bd"><a href="javascript:;">' + bank.bankName + '</a></li>';
                    ul += '</ul>';
                    html += ul;
                });
                $(".chooseWidget").show().html(html);
                $(".chooseWidget ul").click(function(){
                    var $this = $(this).find("li");
                        $(".chooseWidget").hide().html("");
                        if(choosebank.callBack){
                            choosebank.callBack({id: $this.attr("id"), name: $this.attr("name"), bankCode: $this.attr("bankCode")});
                        }
                });
            }
        });
    }
};

    
/**
 * 提现选择银行卡组件
 * Created by Wan on 11/21 0011.
 */

var choosemybank = {
    bank: function (data) {
        ajax.get({
            url: base + "weixin/member/bank/list.jhtml",
            data: data,
            success: function (data) {
                var html = "";
                $.each(data, function (index, bank) {
                    var div='<div class="weui-cells">';
                    div+= '<div class="weui-cell" id="' + bank.id + '" account="' + bank.account + '" name="' + bank.bankName + '" cardNo="' + bank.cardNo + '" >'+
                        '<div class="weui-cell__hd">'+
                        '<img src="../images/placeholder/product.png" alt="" style="height: 20vw;height:20vw;">'+
                        '</div>'+
                        '<div class="weui-cell__bd weui-cell__primary f14" style="padding-left: 15px;">'+
                        '<p>'+bank.bankName+'</p>'+
                        '<p>**** **** ****<span id="cardNo">'+bank.cardNo+'</span><span id="account">'+bank.account+'</span></p>'+
                        '</div>'+
                        '</div>'+
                        '</div>';
                    html+=div;
                });
                var editmycard= '<div class="add_address weui-btn-area editmycard" style="text-align: center;color:#fff;background:#ff6d06;">'+
                    '管理银行卡'+
                    '</div>';
                html+=editmycard;
                $(".chooseWidget").show().html(html);
                $(".chooseWidget .weui-cells").click(function(){
                    var $this = $(this).find(".weui-cell");
                    $(".chooseWidget").hide().html("");
                    if(choosemybank.callBack){
                        choosemybank.callBack({id: $this.attr("id"), cardNo: $this.attr("cardNo"), name: $this.attr("name")});
                    }
                });
                $(".editmycard").click(function(){
                    location.href=location.origin+'/weixin/member/member-home.html?#bank';
                })
            }
        });
    }
};

    
/*! iScroll v5.1.3 ~ (c) 2008-2014 Matteo Spinelli ~ http://cubiq.org/license */
(function (window, document, Math) {
    var rAF = window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.oRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        function (callback) {
            window.setTimeout(callback, 1000 / 60);
        };

    var utils = (function () {
        var me = {};

        var _elementStyle = document.createElement('div').style;
        var _vendor = (function () {
            var vendors = ['t', 'webkitT', 'MozT', 'msT', 'OT'],
                transform,
                i = 0,
                l = vendors.length;

            for (; i < l; i++) {
                transform = vendors[i] + 'ransform';
                if (transform in _elementStyle) return vendors[i].substr(0, vendors[i].length - 1);
            }

            return false;
        })();

        function _prefixStyle(style) {
            if (_vendor === false) return false;
            if (_vendor === '') return style;
            return _vendor + style.charAt(0).toUpperCase() + style.substr(1);
        }

        me.getTime = Date.now || function getTime() {
                return new Date().getTime();
            };

        me.extend = function (target, obj) {
            for (var i in obj) {
                target[i] = obj[i];
            }
        };

        me.addEvent = function (el, type, fn, capture) {
            el.addEventListener(type, fn, !!capture);
        };

        me.removeEvent = function (el, type, fn, capture) {
            el.removeEventListener(type, fn, !!capture);
        };

        me.prefixPointerEvent = function (pointerEvent) {
            return window.MSPointerEvent ?
            'MSPointer' + pointerEvent.charAt(9).toUpperCase() + pointerEvent.substr(10) :
                pointerEvent;
        };

        me.momentum = function (current, start, time, lowerMargin, wrapperSize, deceleration) {
            var distance = current - start,
                speed = Math.abs(distance) / time,
                destination,
                duration;

            deceleration = deceleration === undefined ? 0.0006 : deceleration;

            destination = current + ( speed * speed ) / ( 2 * deceleration ) * ( distance < 0 ? -1 : 1 );
            duration = speed / deceleration;

            if (destination < lowerMargin) {
                destination = wrapperSize ? lowerMargin - ( wrapperSize / 2.5 * ( speed / 8 ) ) : lowerMargin;
                distance = Math.abs(destination - current);
                duration = distance / speed;
            } else if (destination > 0) {
                destination = wrapperSize ? wrapperSize / 2.5 * ( speed / 8 ) : 0;
                distance = Math.abs(current) + destination;
                duration = distance / speed;
            }

            return {
                destination: Math.round(destination),
                duration: duration
            };
        };

        var _transform = _prefixStyle('transform');

        me.extend(me, {
            hasTransform: _transform !== false,
            hasPerspective: _prefixStyle('perspective') in _elementStyle,
            hasTouch: 'ontouchstart' in window,
            hasPointer: window.PointerEvent || window.MSPointerEvent, // IE10 is prefixed
            hasTransition: _prefixStyle('transition') in _elementStyle
        });

        // This should find all Android browsers lower than build 535.19 (both stock browser and webview)
        me.isBadAndroid = /Android /.test(window.navigator.appVersion) && !(/Chrome\/\d/.test(window.navigator.appVersion));

        me.extend(me.style = {}, {
            transform: _transform,
            transitionTimingFunction: _prefixStyle('transitionTimingFunction'),
            transitionDuration: _prefixStyle('transitionDuration'),
            transitionDelay: _prefixStyle('transitionDelay'),
            transformOrigin: _prefixStyle('transformOrigin')
        });

        me.hasClass = function (e, c) {
            var re = new RegExp("(^|\\s)" + c + "(\\s|$)");
            return re.test(e.className);
        };

        me.addClass = function (e, c) {
            if (me.hasClass(e, c)) {
                return;
            }

            var newclass = e.className.split(' ');
            newclass.push(c);
            e.className = newclass.join(' ');
        };

        me.removeClass = function (e, c) {
            if (!me.hasClass(e, c)) {
                return;
            }

            var re = new RegExp("(^|\\s)" + c + "(\\s|$)", 'g');
            e.className = e.className.replace(re, ' ');
        };

        me.offset = function (el) {
            var left = -el.offsetLeft,
                top = -el.offsetTop;

            // jshint -W084
            while (el = el.offsetParent) {
                left -= el.offsetLeft;
                top -= el.offsetTop;
            }
            // jshint +W084

            return {
                left: left,
                top: top
            };
        };

        me.preventDefaultException = function (el, exceptions) {
            for (var i in exceptions) {
                if (exceptions[i].test(el[i])) {
                    return true;
                }
            }

            return false;
        };

        me.extend(me.eventType = {}, {
            touchstart: 1,
            touchmove: 1,
            touchend: 1,

            mousedown: 2,
            mousemove: 2,
            mouseup: 2,

            pointerdown: 3,
            pointermove: 3,
            pointerup: 3,

            MSPointerDown: 3,
            MSPointerMove: 3,
            MSPointerUp: 3
        });

        me.extend(me.ease = {}, {
            quadratic: {
                style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',
                fn: function (k) {
                    return k * ( 2 - k );
                }
            },
            circular: {
                style: 'cubic-bezier(0.1, 0.57, 0.1, 1)',	// Not properly "circular" but this looks better, it should be (0.075, 0.82, 0.165, 1)
                fn: function (k) {
                    return Math.sqrt(1 - ( --k * k ));
                }
            },
            back: {
                style: 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',
                fn: function (k) {
                    var b = 4;
                    return ( k = k - 1 ) * k * ( ( b + 1 ) * k + b ) + 1;
                }
            },
            bounce: {
                style: '',
                fn: function (k) {
                    if (( k /= 1 ) < ( 1 / 2.75 )) {
                        return 7.5625 * k * k;
                    } else if (k < ( 2 / 2.75 )) {
                        return 7.5625 * ( k -= ( 1.5 / 2.75 ) ) * k + 0.75;
                    } else if (k < ( 2.5 / 2.75 )) {
                        return 7.5625 * ( k -= ( 2.25 / 2.75 ) ) * k + 0.9375;
                    } else {
                        return 7.5625 * ( k -= ( 2.625 / 2.75 ) ) * k + 0.984375;
                    }
                }
            },
            elastic: {
                style: '',
                fn: function (k) {
                    var f = 0.22,
                        e = 0.4;

                    if (k === 0) {
                        return 0;
                    }
                    if (k == 1) {
                        return 1;
                    }

                    return ( e * Math.pow(2, -10 * k) * Math.sin(( k - f / 4 ) * ( 2 * Math.PI ) / f) + 1 );
                }
            }
        });

        me.tap = function (e, eventName) {
            var ev = document.createEvent('Event');
            ev.initEvent(eventName, true, true);
            ev.pageX = e.pageX;
            ev.pageY = e.pageY;
            e.target.dispatchEvent(ev);
        };

        me.click = function (e) {
            var target = e.target,
                ev;

            if (!(/(SELECT|INPUT|TEXTAREA)/i).test(target.tagName)) {
                ev = document.createEvent('MouseEvents');
                ev.initMouseEvent('click', true, true, e.view, 1,
                    target.screenX, target.screenY, target.clientX, target.clientY,
                    e.ctrlKey, e.altKey, e.shiftKey, e.metaKey,
                    0, null);

                ev._constructed = true;
                target.dispatchEvent(ev);
            }
        };

        return me;
    })();

    function IScroll(el, options) {
        this.wrapper = typeof el == 'string' ? document.querySelector(el) : el;
        this.scroller = this.wrapper.children[0];
        this.scrollerStyle = this.scroller.style;		// cache style for better performance

        this.options = {

            resizeScrollbars: true,

            mouseWheelSpeed: 20,

            snapThreshold: 0.334,

// INSERT POINT: OPTIONS 

            startX: 0,
            startY: 0,
            scrollY: true,
            directionLockThreshold: 5,
            momentum: true,

            bounce: true,
            bounceTime: 600,
            bounceEasing: '',

            preventDefault: true,
            preventDefaultException: {tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT)$/},

            HWCompositing: true,
            useTransition: true,
            useTransform: true
        };

        for (var i in options) {
            this.options[i] = options[i];
        }

        // Normalize options
        this.translateZ = this.options.HWCompositing && utils.hasPerspective ? ' translateZ(0)' : '';

        this.options.useTransition = utils.hasTransition && this.options.useTransition;
        this.options.useTransform = utils.hasTransform && this.options.useTransform;

        this.options.eventPassthrough = this.options.eventPassthrough === true ? 'vertical' : this.options.eventPassthrough;
        this.options.preventDefault = !this.options.eventPassthrough && this.options.preventDefault;

        // If you want eventPassthrough I have to lock one of the axes
        this.options.scrollY = this.options.eventPassthrough == 'vertical' ? false : this.options.scrollY;
        this.options.scrollX = this.options.eventPassthrough == 'horizontal' ? false : this.options.scrollX;

        // With eventPassthrough we also need lockDirection mechanism
        this.options.freeScroll = this.options.freeScroll && !this.options.eventPassthrough;
        this.options.directionLockThreshold = this.options.eventPassthrough ? 0 : this.options.directionLockThreshold;

        this.options.bounceEasing = typeof this.options.bounceEasing == 'string' ? utils.ease[this.options.bounceEasing] || utils.ease.circular : this.options.bounceEasing;

        this.options.resizePolling = this.options.resizePolling === undefined ? 60 : this.options.resizePolling;

        if (this.options.tap === true) {
            this.options.tap = 'tap';
        }

        if (this.options.shrinkScrollbars == 'scale') {
            this.options.useTransition = false;
        }

        this.options.invertWheelDirection = this.options.invertWheelDirection ? -1 : 1;

        if (this.options.probeType == 3) {
            this.options.useTransition = false;
        }

// INSERT POINT: NORMALIZATION

        // Some defaults
        this.x = 0;
        this.y = 0;
        this.directionX = 0;
        this.directionY = 0;
        this._events = {};

// INSERT POINT: DEFAULTS

        this._init();
        this.refresh();

        this.scrollTo(this.options.startX, this.options.startY);
        this.enable();
    }

    IScroll.prototype = {
        version: '5.1.3',

        _init: function () {
            this._initEvents();

            if (this.options.scrollbars || this.options.indicators) {
                this._initIndicators();
            }

            if (this.options.mouseWheel) {
                this._initWheel();
            }

            if (this.options.snap) {
                this._initSnap();
            }

            if (this.options.keyBindings) {
                this._initKeys();
            }

// INSERT POINT: _init

        },

        destroy: function () {
            this._initEvents(true);

            this._execEvent('destroy');
        },

        _transitionEnd: function (e) {
            if (e.target != this.scroller || !this.isInTransition) {
                return;
            }

            this._transitionTime();
            if (!this.resetPosition(this.options.bounceTime)) {
                this.isInTransition = false;
                this._execEvent('scrollEnd');
            }
        },

        _start: function (e) {
            // React to left mouse button only
            if (utils.eventType[e.type] != 1) {
                if (e.button !== 0) {
                    return;
                }
            }

            if (!this.enabled || (this.initiated && utils.eventType[e.type] !== this.initiated)) {
                return;
            }

            if (this.options.preventDefault && !utils.isBadAndroid && !utils.preventDefaultException(e.target, this.options.preventDefaultException)) {
                e.preventDefault();
            }

            var point = e.touches ? e.touches[0] : e,
                pos;

            this.initiated = utils.eventType[e.type];
            this.moved = false;
            this.distX = 0;
            this.distY = 0;
            this.directionX = 0;
            this.directionY = 0;
            this.directionLocked = 0;

            this._transitionTime();

            this.startTime = utils.getTime();

            if (this.options.useTransition && this.isInTransition) {
                this.isInTransition = false;
                pos = this.getComputedPosition();
                this._translate(Math.round(pos.x), Math.round(pos.y));
                this._execEvent('scrollEnd');
            } else if (!this.options.useTransition && this.isAnimating) {
                this.isAnimating = false;
                this._execEvent('scrollEnd');
            }

            this.startX = this.x;
            this.startY = this.y;
            this.absStartX = this.x;
            this.absStartY = this.y;
            this.pointX = point.pageX;
            this.pointY = point.pageY;

            this._execEvent('beforeScrollStart');
        },

        _move: function (e) {
            if (!this.enabled || utils.eventType[e.type] !== this.initiated) {
                return;
            }

            if (this.options.preventDefault) {	// increases performance on Android? TODO: check!
                e.preventDefault();
            }

            var point = e.touches ? e.touches[0] : e,
                deltaX = point.pageX - this.pointX,
                deltaY = point.pageY - this.pointY,
                timestamp = utils.getTime(),
                newX, newY,
                absDistX, absDistY;

            this.pointX = point.pageX;
            this.pointY = point.pageY;

            this.distX += deltaX;
            this.distY += deltaY;
            absDistX = Math.abs(this.distX);
            absDistY = Math.abs(this.distY);

            // We need to move at least 10 pixels for the scrolling to initiate
            if (timestamp - this.endTime > 300 && (absDistX < 10 && absDistY < 10)) {
                return;
            }

            // If you are scrolling in one direction lock the other
            if (!this.directionLocked && !this.options.freeScroll) {
                if (absDistX > absDistY + this.options.directionLockThreshold) {
                    this.directionLocked = 'h';		// lock horizontally
                } else if (absDistY >= absDistX + this.options.directionLockThreshold) {
                    this.directionLocked = 'v';		// lock vertically
                } else {
                    this.directionLocked = 'n';		// no lock
                }
            }

            if (this.directionLocked == 'h') {
                if (this.options.eventPassthrough == 'vertical') {
                    e.preventDefault();
                } else if (this.options.eventPassthrough == 'horizontal') {
                    this.initiated = false;
                    return;
                }

                deltaY = 0;
            } else if (this.directionLocked == 'v') {
                if (this.options.eventPassthrough == 'horizontal') {
                    e.preventDefault();
                } else if (this.options.eventPassthrough == 'vertical') {
                    this.initiated = false;
                    return;
                }

                deltaX = 0;
            }

            deltaX = this.hasHorizontalScroll ? deltaX : 0;
            deltaY = this.hasVerticalScroll ? deltaY : 0;

            newX = this.x + deltaX;
            newY = this.y + deltaY;

            // Slow down if outside of the boundaries
            if (newX > 0 || newX < this.maxScrollX) {
                newX = this.options.bounce ? this.x + deltaX / 3 : newX > 0 ? 0 : this.maxScrollX;
            }
            if (newY > 0 || newY < this.maxScrollY) {
                newY = this.options.bounce ? this.y + deltaY / 3 : newY > 0 ? 0 : this.maxScrollY;
            }

            this.directionX = deltaX > 0 ? -1 : deltaX < 0 ? 1 : 0;
            this.directionY = deltaY > 0 ? -1 : deltaY < 0 ? 1 : 0;

            if (!this.moved) {
                this._execEvent('scrollStart');
            }

            this.moved = true;

            this._translate(newX, newY);

            /* REPLACE START: _move */
            if (timestamp - this.startTime > 300) {
                this.startTime = timestamp;
                this.startX = this.x;
                this.startY = this.y;

                if (this.options.probeType == 1) {
                    this._execEvent('scroll');
                }
            }

            if (this.options.probeType > 1) {
                this._execEvent('scroll');
            }
            /* REPLACE END: _move */

        },

        _end: function (e) {
            if (!this.enabled || utils.eventType[e.type] !== this.initiated) {
                return;
            }

            if (this.options.preventDefault && !utils.preventDefaultException(e.target, this.options.preventDefaultException)) {
                e.preventDefault();
            }

            var point = e.changedTouches ? e.changedTouches[0] : e,
                momentumX,
                momentumY,
                duration = utils.getTime() - this.startTime,
                newX = Math.round(this.x),
                newY = Math.round(this.y),
                distanceX = Math.abs(newX - this.startX),
                distanceY = Math.abs(newY - this.startY),
                time = 0,
                easing = '';

            this.isInTransition = 0;
            this.initiated = 0;
            this.endTime = utils.getTime();

            // reset if we are outside of the boundaries
            if (this.resetPosition(this.options.bounceTime)) {
                return;
            }

            this.scrollTo(newX, newY);	// ensures that the last position is rounded

            // we scrolled less than 10 pixels
            if (!this.moved) {
                if (this.options.tap) {
                    utils.tap(e, this.options.tap);
                }

                if (this.options.click) {
                    utils.click(e);
                }

                this._execEvent('scrollCancel');
                return;
            }

            if (this._events.flick && duration < 200 && distanceX < 100 && distanceY < 100) {
                this._execEvent('flick');
                return;
            }

            // start momentum animation if needed
            if (this.options.momentum && duration < 300) {
                momentumX = this.hasHorizontalScroll ? utils.momentum(this.x, this.startX, duration, this.maxScrollX, this.options.bounce ? this.wrapperWidth : 0, this.options.deceleration) : {
                    destination: newX,
                    duration: 0
                };
                momentumY = this.hasVerticalScroll ? utils.momentum(this.y, this.startY, duration, this.maxScrollY, this.options.bounce ? this.wrapperHeight : 0, this.options.deceleration) : {
                    destination: newY,
                    duration: 0
                };
                newX = momentumX.destination;
                newY = momentumY.destination;
                time = Math.max(momentumX.duration, momentumY.duration);
                this.isInTransition = 1;
            }


            if (this.options.snap) {
                var snap = this._nearestSnap(newX, newY);
                this.currentPage = snap;
                time = this.options.snapSpeed || Math.max(
                        Math.max(
                            Math.min(Math.abs(newX - snap.x), 1000),
                            Math.min(Math.abs(newY - snap.y), 1000)
                        ), 300);
                newX = snap.x;
                newY = snap.y;

                this.directionX = 0;
                this.directionY = 0;
                easing = this.options.bounceEasing;
            }

// INSERT POINT: _end

            if (newX != this.x || newY != this.y) {
                // change easing function when scroller goes out of the boundaries
                if (newX > 0 || newX < this.maxScrollX || newY > 0 || newY < this.maxScrollY) {
                    easing = utils.ease.quadratic;
                }

                this.scrollTo(newX, newY, time, easing);
                return;
            }

            this._execEvent('scrollEnd');
        },

        _resize: function () {
            var that = this;

            clearTimeout(this.resizeTimeout);

            this.resizeTimeout = setTimeout(function () {
                that.refresh();
            }, this.options.resizePolling);
        },

        resetPosition: function (time) {
            var x = this.x,
                y = this.y;

            time = time || 0;

            if (!this.hasHorizontalScroll || this.x > 0) {
                x = 0;
            } else if (this.x < this.maxScrollX) {
                x = this.maxScrollX;
            }

            if (!this.hasVerticalScroll || this.y > 0) {
                y = 0;
            } else if (this.y < this.maxScrollY) {
                y = this.maxScrollY;
            }

            if (x == this.x && y == this.y) {
                return false;
            }

            this.scrollTo(x, y, time, this.options.bounceEasing);

            return true;
        },

        disable: function () {
            this.enabled = false;
        },

        enable: function () {
            this.enabled = true;
        },

        refresh: function () {
            var rf = this.wrapper.offsetHeight;		// Force reflow

            this.wrapperWidth = this.wrapper.clientWidth;
            this.wrapperHeight = this.wrapper.clientHeight;

            /* REPLACE START: refresh */

            this.scrollerWidth = this.scroller.offsetWidth;
            this.scrollerHeight = this.scroller.offsetHeight;

            this.maxScrollX = this.wrapperWidth - this.scrollerWidth;
            this.maxScrollY = this.wrapperHeight - this.scrollerHeight;

            /* REPLACE END: refresh */

            this.hasHorizontalScroll = this.options.scrollX && this.maxScrollX < 0;
            this.hasVerticalScroll = this.options.scrollY && this.maxScrollY < 0;

            if (!this.hasHorizontalScroll) {
                this.maxScrollX = 0;
                this.scrollerWidth = this.wrapperWidth;
            }

            if (!this.hasVerticalScroll) {
                this.maxScrollY = 0;
                this.scrollerHeight = this.wrapperHeight;
            }

            this.endTime = 0;
            this.directionX = 0;
            this.directionY = 0;

            this.wrapperOffset = utils.offset(this.wrapper);

            this._execEvent('refresh');

            this.resetPosition();

// INSERT POINT: _refresh

        },

        on: function (type, fn) {
            if (!this._events[type]) {
                this._events[type] = [];
            }

            this._events[type].push(fn);
        },

        off: function (type, fn) {
            if (!this._events[type]) {
                return;
            }

            var index = this._events[type].indexOf(fn);

            if (index > -1) {
                this._events[type].splice(index, 1);
            }
        },

        _execEvent: function (type) {
            if (!this._events[type]) {
                return;
            }

            var i = 0,
                l = this._events[type].length;

            if (!l) {
                return;
            }

            for (; i < l; i++) {
                this._events[type][i].apply(this, [].slice.call(arguments, 1));
            }
        },

        scrollBy: function (x, y, time, easing) {
            x = this.x + x;
            y = this.y + y;
            time = time || 0;

            this.scrollTo(x, y, time, easing);
        },

        scrollTo: function (x, y, time, easing) {
            easing = easing || utils.ease.circular;

            this.isInTransition = this.options.useTransition && time > 0;

            if (!time || (this.options.useTransition && easing.style)) {
                this._transitionTimingFunction(easing.style);
                this._transitionTime(time);
                this._translate(x, y);
            } else {
                this._animate(x, y, time, easing.fn);
            }
        },

        scrollToElement: function (el, time, offsetX, offsetY, easing) {
            el = el.nodeType ? el : this.scroller.querySelector(el);

            if (!el) {
                return;
            }

            var pos = utils.offset(el);

            pos.left -= this.wrapperOffset.left;
            pos.top -= this.wrapperOffset.top;

            // if offsetX/Y are true we center the element to the screen
            if (offsetX === true) {
                offsetX = Math.round(el.offsetWidth / 2 - this.wrapper.offsetWidth / 2);
            }
            if (offsetY === true) {
                offsetY = Math.round(el.offsetHeight / 2 - this.wrapper.offsetHeight / 2);
            }

            pos.left -= offsetX || 0;
            pos.top -= offsetY || 0;

            pos.left = pos.left > 0 ? 0 : pos.left < this.maxScrollX ? this.maxScrollX : pos.left;
            pos.top = pos.top > 0 ? 0 : pos.top < this.maxScrollY ? this.maxScrollY : pos.top;

            time = time === undefined || time === null || time === 'auto' ? Math.max(Math.abs(this.x - pos.left), Math.abs(this.y - pos.top)) : time;

            this.scrollTo(pos.left, pos.top, time, easing);
        },

        _transitionTime: function (time) {
            time = time || 0;

            this.scrollerStyle[utils.style.transitionDuration] = time + 'ms';

            if (!time && utils.isBadAndroid) {
                this.scrollerStyle[utils.style.transitionDuration] = '0.001s';
            }


            if (this.indicators) {
                for (var i = this.indicators.length; i--;) {
                    this.indicators[i].transitionTime(time);
                }
            }


// INSERT POINT: _transitionTime

        },

        _transitionTimingFunction: function (easing) {
            this.scrollerStyle[utils.style.transitionTimingFunction] = easing;


            if (this.indicators) {
                for (var i = this.indicators.length; i--;) {
                    this.indicators[i].transitionTimingFunction(easing);
                }
            }


// INSERT POINT: _transitionTimingFunction

        },

        _translate: function (x, y) {
            if (this.options.useTransform) {

                /* REPLACE START: _translate */

                this.scrollerStyle[utils.style.transform] = 'translate(' + x + 'px,' + y + 'px)' + this.translateZ;

                /* REPLACE END: _translate */

            } else {
                x = Math.round(x);
                y = Math.round(y);
                this.scrollerStyle.left = x + 'px';
                this.scrollerStyle.top = y + 'px';
            }

            this.x = x;
            this.y = y;


            if (this.indicators) {
                for (var i = this.indicators.length; i--;) {
                    this.indicators[i].updatePosition();
                }
            }


// INSERT POINT: _translate

        },

        _initEvents: function (remove) {
            var eventType = remove ? utils.removeEvent : utils.addEvent,
                target = this.options.bindToWrapper ? this.wrapper : window;

            eventType(window, 'orientationchange', this);
            eventType(window, 'resize', this);

            if (this.options.click) {
                eventType(this.wrapper, 'click', this, true);
            }

            if (!this.options.disableMouse) {
                eventType(this.wrapper, 'mousedown', this);
                eventType(target, 'mousemove', this);
                eventType(target, 'mousecancel', this);
                eventType(target, 'mouseup', this);
            }

            if (utils.hasPointer && !this.options.disablePointer) {
                eventType(this.wrapper, utils.prefixPointerEvent('pointerdown'), this);
                eventType(target, utils.prefixPointerEvent('pointermove'), this);
                eventType(target, utils.prefixPointerEvent('pointercancel'), this);
                eventType(target, utils.prefixPointerEvent('pointerup'), this);
            }

            if (utils.hasTouch && !this.options.disableTouch) {
                eventType(this.wrapper, 'touchstart', this);
                eventType(target, 'touchmove', this);
                eventType(target, 'touchcancel', this);
                eventType(target, 'touchend', this);
            }

            eventType(this.scroller, 'transitionend', this);
            eventType(this.scroller, 'webkitTransitionEnd', this);
            eventType(this.scroller, 'oTransitionEnd', this);
            eventType(this.scroller, 'MSTransitionEnd', this);
        },

        getComputedPosition: function () {
            var matrix = window.getComputedStyle(this.scroller, null),
                x, y;

            if (this.options.useTransform) {
                matrix = matrix[utils.style.transform].split(')')[0].split(', ');
                x = +(matrix[12] || matrix[4]);
                y = +(matrix[13] || matrix[5]);
            } else {
                x = +matrix.left.replace(/[^-\d.]/g, '');
                y = +matrix.top.replace(/[^-\d.]/g, '');
            }

            return {x: x, y: y};
        },

        _initIndicators: function () {
            var interactive = this.options.interactiveScrollbars,
                customStyle = typeof this.options.scrollbars != 'string',
                indicators = [],
                indicator;

            var that = this;

            this.indicators = [];

            if (this.options.scrollbars) {
                // Vertical scrollbar
                if (this.options.scrollY) {
                    indicator = {
                        el: createDefaultScrollbar('v', interactive, this.options.scrollbars),
                        interactive: interactive,
                        defaultScrollbars: true,
                        customStyle: customStyle,
                        resize: this.options.resizeScrollbars,
                        shrink: this.options.shrinkScrollbars,
                        fade: this.options.fadeScrollbars,
                        listenX: false
                    };

                    this.wrapper.appendChild(indicator.el);
                    indicators.push(indicator);
                }

                // Horizontal scrollbar
                if (this.options.scrollX) {
                    indicator = {
                        el: createDefaultScrollbar('h', interactive, this.options.scrollbars),
                        interactive: interactive,
                        defaultScrollbars: true,
                        customStyle: customStyle,
                        resize: this.options.resizeScrollbars,
                        shrink: this.options.shrinkScrollbars,
                        fade: this.options.fadeScrollbars,
                        listenY: false
                    };

                    this.wrapper.appendChild(indicator.el);
                    indicators.push(indicator);
                }
            }

            if (this.options.indicators) {
                // TODO: check concat compatibility
                indicators = indicators.concat(this.options.indicators);
            }

            for (var i = indicators.length; i--;) {
                this.indicators.push(new Indicator(this, indicators[i]));
            }

            // TODO: check if we can use array.map (wide compatibility and performance issues)
            function _indicatorsMap(fn) {
                for (var i = that.indicators.length; i--;) {
                    fn.call(that.indicators[i]);
                }
            }

            if (this.options.fadeScrollbars) {
                this.on('scrollEnd', function () {
                    _indicatorsMap(function () {
                        this.fade();
                    });
                });

                this.on('scrollCancel', function () {
                    _indicatorsMap(function () {
                        this.fade();
                    });
                });

                this.on('scrollStart', function () {
                    _indicatorsMap(function () {
                        this.fade(1);
                    });
                });

                this.on('beforeScrollStart', function () {
                    _indicatorsMap(function () {
                        this.fade(1, true);
                    });
                });
            }


            this.on('refresh', function () {
                _indicatorsMap(function () {
                    this.refresh();
                });
            });

            this.on('destroy', function () {
                _indicatorsMap(function () {
                    this.destroy();
                });

                delete this.indicators;
            });
        },

        _initWheel: function () {
            utils.addEvent(this.wrapper, 'wheel', this);
            utils.addEvent(this.wrapper, 'mousewheel', this);
            utils.addEvent(this.wrapper, 'DOMMouseScroll', this);

            this.on('destroy', function () {
                utils.removeEvent(this.wrapper, 'wheel', this);
                utils.removeEvent(this.wrapper, 'mousewheel', this);
                utils.removeEvent(this.wrapper, 'DOMMouseScroll', this);
            });
        },

        _wheel: function (e) {
            if (!this.enabled) {
                return;
            }

            e.preventDefault();
            e.stopPropagation();

            var wheelDeltaX, wheelDeltaY,
                newX, newY,
                that = this;

            if (this.wheelTimeout === undefined) {
                that._execEvent('scrollStart');
            }

            // Execute the scrollEnd event after 400ms the wheel stopped scrolling
            clearTimeout(this.wheelTimeout);
            this.wheelTimeout = setTimeout(function () {
                that._execEvent('scrollEnd');
                that.wheelTimeout = undefined;
            }, 400);

            if ('deltaX' in e) {
                if (e.deltaMode === 1) {
                    wheelDeltaX = -e.deltaX * this.options.mouseWheelSpeed;
                    wheelDeltaY = -e.deltaY * this.options.mouseWheelSpeed;
                } else {
                    wheelDeltaX = -e.deltaX;
                    wheelDeltaY = -e.deltaY;
                }
            } else if ('wheelDeltaX' in e) {
                wheelDeltaX = e.wheelDeltaX / 120 * this.options.mouseWheelSpeed;
                wheelDeltaY = e.wheelDeltaY / 120 * this.options.mouseWheelSpeed;
            } else if ('wheelDelta' in e) {
                wheelDeltaX = wheelDeltaY = e.wheelDelta / 120 * this.options.mouseWheelSpeed;
            } else if ('detail' in e) {
                wheelDeltaX = wheelDeltaY = -e.detail / 3 * this.options.mouseWheelSpeed;
            } else {
                return;
            }

            wheelDeltaX *= this.options.invertWheelDirection;
            wheelDeltaY *= this.options.invertWheelDirection;

            if (!this.hasVerticalScroll) {
                wheelDeltaX = wheelDeltaY;
                wheelDeltaY = 0;
            }

            if (this.options.snap) {
                newX = this.currentPage.pageX;
                newY = this.currentPage.pageY;

                if (wheelDeltaX > 0) {
                    newX--;
                } else if (wheelDeltaX < 0) {
                    newX++;
                }

                if (wheelDeltaY > 0) {
                    newY--;
                } else if (wheelDeltaY < 0) {
                    newY++;
                }

                this.goToPage(newX, newY);

                return;
            }

            newX = this.x + Math.round(this.hasHorizontalScroll ? wheelDeltaX : 0);
            newY = this.y + Math.round(this.hasVerticalScroll ? wheelDeltaY : 0);

            if (newX > 0) {
                newX = 0;
            } else if (newX < this.maxScrollX) {
                newX = this.maxScrollX;
            }

            if (newY > 0) {
                newY = 0;
            } else if (newY < this.maxScrollY) {
                newY = this.maxScrollY;
            }

            this.scrollTo(newX, newY, 0);

            if (this.options.probeType > 1) {
                this._execEvent('scroll');
            }

// INSERT POINT: _wheel
        },

        _initSnap: function () {
            this.currentPage = {};

            if (typeof this.options.snap == 'string') {
                this.options.snap = this.scroller.querySelectorAll(this.options.snap);
            }

            this.on('refresh', function () {
                var i = 0, l,
                    m = 0, n,
                    cx, cy,
                    x = 0, y,
                    stepX = this.options.snapStepX || this.wrapperWidth,
                    stepY = this.options.snapStepY || this.wrapperHeight,
                    el;

                this.pages = [];

                if (!this.wrapperWidth || !this.wrapperHeight || !this.scrollerWidth || !this.scrollerHeight) {
                    return;
                }

                if (this.options.snap === true) {
                    cx = Math.round(stepX / 2);
                    cy = Math.round(stepY / 2);

                    while (x > -this.scrollerWidth) {
                        this.pages[i] = [];
                        l = 0;
                        y = 0;

                        while (y > -this.scrollerHeight) {
                            this.pages[i][l] = {
                                x: Math.max(x, this.maxScrollX),
                                y: Math.max(y, this.maxScrollY),
                                width: stepX,
                                height: stepY,
                                cx: x - cx,
                                cy: y - cy
                            };

                            y -= stepY;
                            l++;
                        }

                        x -= stepX;
                        i++;
                    }
                } else {
                    el = this.options.snap;
                    l = el.length;
                    n = -1;

                    for (; i < l; i++) {
                        if (i === 0 || el[i].offsetLeft <= el[i - 1].offsetLeft) {
                            m = 0;
                            n++;
                        }

                        if (!this.pages[m]) {
                            this.pages[m] = [];
                        }

                        x = Math.max(-el[i].offsetLeft, this.maxScrollX);
                        y = Math.max(-el[i].offsetTop, this.maxScrollY);
                        cx = x - Math.round(el[i].offsetWidth / 2);
                        cy = y - Math.round(el[i].offsetHeight / 2);

                        this.pages[m][n] = {
                            x: x,
                            y: y,
                            width: el[i].offsetWidth,
                            height: el[i].offsetHeight,
                            cx: cx,
                            cy: cy
                        };

                        if (x > this.maxScrollX) {
                            m++;
                        }
                    }
                }

                this.goToPage(this.currentPage.pageX || 0, this.currentPage.pageY || 0, 0);

                // Update snap threshold if needed
                if (this.options.snapThreshold % 1 === 0) {
                    this.snapThresholdX = this.options.snapThreshold;
                    this.snapThresholdY = this.options.snapThreshold;
                } else {
                    this.snapThresholdX = Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width * this.options.snapThreshold);
                    this.snapThresholdY = Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height * this.options.snapThreshold);
                }
            });

            this.on('flick', function () {
                var time = this.options.snapSpeed || Math.max(
                        Math.max(
                            Math.min(Math.abs(this.x - this.startX), 1000),
                            Math.min(Math.abs(this.y - this.startY), 1000)
                        ), 300);

                this.goToPage(
                    this.currentPage.pageX + this.directionX,
                    this.currentPage.pageY + this.directionY,
                    time
                );
            });
        },

        _nearestSnap: function (x, y) {
            if (!this.pages.length) {
                return {x: 0, y: 0, pageX: 0, pageY: 0};
            }

            var i = 0,
                l = this.pages.length,
                m = 0;

            // Check if we exceeded the snap threshold
            if (Math.abs(x - this.absStartX) < this.snapThresholdX &&
                Math.abs(y - this.absStartY) < this.snapThresholdY) {
                return this.currentPage;
            }

            if (x > 0) {
                x = 0;
            } else if (x < this.maxScrollX) {
                x = this.maxScrollX;
            }

            if (y > 0) {
                y = 0;
            } else if (y < this.maxScrollY) {
                y = this.maxScrollY;
            }

            for (; i < l; i++) {
                if (x >= this.pages[i][0].cx) {
                    x = this.pages[i][0].x;
                    break;
                }
            }

            l = this.pages[i].length;

            for (; m < l; m++) {
                if (y >= this.pages[0][m].cy) {
                    y = this.pages[0][m].y;
                    break;
                }
            }

            if (i == this.currentPage.pageX) {
                i += this.directionX;

                if (i < 0) {
                    i = 0;
                } else if (i >= this.pages.length) {
                    i = this.pages.length - 1;
                }

                x = this.pages[i][0].x;
            }

            if (m == this.currentPage.pageY) {
                m += this.directionY;

                if (m < 0) {
                    m = 0;
                } else if (m >= this.pages[0].length) {
                    m = this.pages[0].length - 1;
                }

                y = this.pages[0][m].y;
            }

            return {
                x: x,
                y: y,
                pageX: i,
                pageY: m
            };
        },

        goToPage: function (x, y, time, easing) {
            easing = easing || this.options.bounceEasing;

            if (x >= this.pages.length) {
                x = this.pages.length - 1;
            } else if (x < 0) {
                x = 0;
            }

            if (y >= this.pages[x].length) {
                y = this.pages[x].length - 1;
            } else if (y < 0) {
                y = 0;
            }

            var posX = this.pages[x][y].x,
                posY = this.pages[x][y].y;

            time = time === undefined ? this.options.snapSpeed || Math.max(
                Math.max(
                    Math.min(Math.abs(posX - this.x), 1000),
                    Math.min(Math.abs(posY - this.y), 1000)
                ), 300) : time;

            this.currentPage = {
                x: posX,
                y: posY,
                pageX: x,
                pageY: y
            };

            this.scrollTo(posX, posY, time, easing);
        },

        next: function (time, easing) {
            var x = this.currentPage.pageX,
                y = this.currentPage.pageY;

            x++;

            if (x >= this.pages.length && this.hasVerticalScroll) {
                x = 0;
                y++;
            }

            this.goToPage(x, y, time, easing);
        },

        prev: function (time, easing) {
            var x = this.currentPage.pageX,
                y = this.currentPage.pageY;

            x--;

            if (x < 0 && this.hasVerticalScroll) {
                x = 0;
                y--;
            }

            this.goToPage(x, y, time, easing);
        },

        _initKeys: function (e) {
            // default key bindings
            var keys = {
                pageUp: 33,
                pageDown: 34,
                end: 35,
                home: 36,
                left: 37,
                up: 38,
                right: 39,
                down: 40
            };
            var i;

            // if you give me characters I give you keycode
            if (typeof this.options.keyBindings == 'object') {
                for (i in this.options.keyBindings) {
                    if (typeof this.options.keyBindings[i] == 'string') {
                        this.options.keyBindings[i] = this.options.keyBindings[i].toUpperCase().charCodeAt(0);
                    }
                }
            } else {
                this.options.keyBindings = {};
            }

            for (i in keys) {
                this.options.keyBindings[i] = this.options.keyBindings[i] || keys[i];
            }

            utils.addEvent(window, 'keydown', this);

            this.on('destroy', function () {
                utils.removeEvent(window, 'keydown', this);
            });
        },

        _key: function (e) {
            if (!this.enabled) {
                return;
            }

            var snap = this.options.snap,	// we are using this alot, better to cache it
                newX = snap ? this.currentPage.pageX : this.x,
                newY = snap ? this.currentPage.pageY : this.y,
                now = utils.getTime(),
                prevTime = this.keyTime || 0,
                acceleration = 0.250,
                pos;

            if (this.options.useTransition && this.isInTransition) {
                pos = this.getComputedPosition();

                this._translate(Math.round(pos.x), Math.round(pos.y));
                this.isInTransition = false;
            }

            this.keyAcceleration = now - prevTime < 200 ? Math.min(this.keyAcceleration + acceleration, 50) : 0;

            switch (e.keyCode) {
                case this.options.keyBindings.pageUp:
                    if (this.hasHorizontalScroll && !this.hasVerticalScroll) {
                        newX += snap ? 1 : this.wrapperWidth;
                    } else {
                        newY += snap ? 1 : this.wrapperHeight;
                    }
                    break;
                case this.options.keyBindings.pageDown:
                    if (this.hasHorizontalScroll && !this.hasVerticalScroll) {
                        newX -= snap ? 1 : this.wrapperWidth;
                    } else {
                        newY -= snap ? 1 : this.wrapperHeight;
                    }
                    break;
                case this.options.keyBindings.end:
                    newX = snap ? this.pages.length - 1 : this.maxScrollX;
                    newY = snap ? this.pages[0].length - 1 : this.maxScrollY;
                    break;
                case this.options.keyBindings.home:
                    newX = 0;
                    newY = 0;
                    break;
                case this.options.keyBindings.left:
                    newX += snap ? -1 : 5 + this.keyAcceleration >> 0;
                    break;
                case this.options.keyBindings.up:
                    newY += snap ? 1 : 5 + this.keyAcceleration >> 0;
                    break;
                case this.options.keyBindings.right:
                    newX -= snap ? -1 : 5 + this.keyAcceleration >> 0;
                    break;
                case this.options.keyBindings.down:
                    newY -= snap ? 1 : 5 + this.keyAcceleration >> 0;
                    break;
                default:
                    return;
            }

            if (snap) {
                this.goToPage(newX, newY);
                return;
            }

            if (newX > 0) {
                newX = 0;
                this.keyAcceleration = 0;
            } else if (newX < this.maxScrollX) {
                newX = this.maxScrollX;
                this.keyAcceleration = 0;
            }

            if (newY > 0) {
                newY = 0;
                this.keyAcceleration = 0;
            } else if (newY < this.maxScrollY) {
                newY = this.maxScrollY;
                this.keyAcceleration = 0;
            }

            this.scrollTo(newX, newY, 0);

            this.keyTime = now;
        },

        _animate: function (destX, destY, duration, easingFn) {
            var that = this,
                startX = this.x,
                startY = this.y,
                startTime = utils.getTime(),
                destTime = startTime + duration;

            function step() {
                var now = utils.getTime(),
                    newX, newY,
                    easing;

                if (now >= destTime) {
                    that.isAnimating = false;
                    that._translate(destX, destY);

                    if (!that.resetPosition(that.options.bounceTime)) {
                        that._execEvent('scrollEnd');
                    }

                    return;
                }

                now = ( now - startTime ) / duration;
                easing = easingFn(now);
                newX = ( destX - startX ) * easing + startX;
                newY = ( destY - startY ) * easing + startY;
                that._translate(newX, newY);

                if (that.isAnimating) {
                    rAF(step);
                }

                if (that.options.probeType == 3) {
                    that._execEvent('scroll');
                }
            }

            this.isAnimating = true;
            step();
        },

        handleEvent: function (e) {
            switch (e.type) {
                case 'touchstart':
                case 'pointerdown':
                case 'MSPointerDown':
                case 'mousedown':
                    this._start(e);
                    break;
                case 'touchmove':
                case 'pointermove':
                case 'MSPointerMove':
                case 'mousemove':
                    this._move(e);
                    break;
                case 'touchend':
                case 'pointerup':
                case 'MSPointerUp':
                case 'mouseup':
                case 'touchcancel':
                case 'pointercancel':
                case 'MSPointerCancel':
                case 'mousecancel':
                    this._end(e);
                    break;
                case 'orientationchange':
                case 'resize':
                    this._resize();
                    break;
                case 'transitionend':
                case 'webkitTransitionEnd':
                case 'oTransitionEnd':
                case 'MSTransitionEnd':
                    this._transitionEnd(e);
                    break;
                case 'wheel':
                case 'DOMMouseScroll':
                case 'mousewheel':
                    this._wheel(e);
                    break;
                case 'keydown':
                    this._key(e);
                    break;
                case 'click':
                    if (!e._constructed) {
                        e.preventDefault();
                        e.stopPropagation();
                    }
                    break;
            }
        }
    };
    function createDefaultScrollbar(direction, interactive, type) {
        var scrollbar = document.createElement('div'),
            indicator = document.createElement('div');

        if (type === true) {
            scrollbar.style.cssText = 'position:absolute;z-index:9999';
            indicator.style.cssText = '-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px';
        }

        indicator.className = 'iScrollIndicator';

        if (direction == 'h') {
            if (type === true) {
                scrollbar.style.cssText += ';height:7px;left:2px;right:2px;bottom:0';
                indicator.style.height = '100%';
            }
            scrollbar.className = 'iScrollHorizontalScrollbar';
        } else {
            if (type === true) {
                scrollbar.style.cssText += ';width:7px;bottom:2px;top:2px;right:1px';
                indicator.style.width = '100%';
            }
            scrollbar.className = 'iScrollVerticalScrollbar';
        }

        scrollbar.style.cssText += ';overflow:hidden';

        if (!interactive) {
            scrollbar.style.pointerEvents = 'none';
        }

        scrollbar.appendChild(indicator);

        return scrollbar;
    }

    function Indicator(scroller, options) {
        this.wrapper = typeof options.el == 'string' ? document.querySelector(options.el) : options.el;
        this.wrapperStyle = this.wrapper.style;
        this.indicator = this.wrapper.children[0];
        this.indicatorStyle = this.indicator.style;
        this.scroller = scroller;

        this.options = {
            listenX: true,
            listenY: true,
            interactive: false,
            resize: true,
            defaultScrollbars: false,
            shrink: false,
            fade: false,
            speedRatioX: 0,
            speedRatioY: 0
        };

        for (var i in options) {
            this.options[i] = options[i];
        }

        this.sizeRatioX = 1;
        this.sizeRatioY = 1;
        this.maxPosX = 0;
        this.maxPosY = 0;

        if (this.options.interactive) {
            if (!this.options.disableTouch) {
                utils.addEvent(this.indicator, 'touchstart', this);
                utils.addEvent(window, 'touchend', this);
            }
            if (!this.options.disablePointer) {
                utils.addEvent(this.indicator, utils.prefixPointerEvent('pointerdown'), this);
                utils.addEvent(window, utils.prefixPointerEvent('pointerup'), this);
            }
            if (!this.options.disableMouse) {
                utils.addEvent(this.indicator, 'mousedown', this);
                utils.addEvent(window, 'mouseup', this);
            }
        }

        if (this.options.fade) {
            this.wrapperStyle[utils.style.transform] = this.scroller.translateZ;
            this.wrapperStyle[utils.style.transitionDuration] = utils.isBadAndroid ? '0.001s' : '0ms';
            this.wrapperStyle.opacity = '0';
        }
    }

    Indicator.prototype = {
        handleEvent: function (e) {
            switch (e.type) {
                case 'touchstart':
                case 'pointerdown':
                case 'MSPointerDown':
                case 'mousedown':
                    this._start(e);
                    break;
                case 'touchmove':
                case 'pointermove':
                case 'MSPointerMove':
                case 'mousemove':
                    this._move(e);
                    break;
                case 'touchend':
                case 'pointerup':
                case 'MSPointerUp':
                case 'mouseup':
                case 'touchcancel':
                case 'pointercancel':
                case 'MSPointerCancel':
                case 'mousecancel':
                    this._end(e);
                    break;
            }
        },

        destroy: function () {
            if (this.options.interactive) {
                utils.removeEvent(this.indicator, 'touchstart', this);
                utils.removeEvent(this.indicator, utils.prefixPointerEvent('pointerdown'), this);
                utils.removeEvent(this.indicator, 'mousedown', this);

                utils.removeEvent(window, 'touchmove', this);
                utils.removeEvent(window, utils.prefixPointerEvent('pointermove'), this);
                utils.removeEvent(window, 'mousemove', this);

                utils.removeEvent(window, 'touchend', this);
                utils.removeEvent(window, utils.prefixPointerEvent('pointerup'), this);
                utils.removeEvent(window, 'mouseup', this);
            }

            if (this.options.defaultScrollbars) {
                this.wrapper.parentNode.removeChild(this.wrapper);
            }
        },

        _start: function (e) {
            var point = e.touches ? e.touches[0] : e;

            e.preventDefault();
            e.stopPropagation();

            this.transitionTime();

            this.initiated = true;
            this.moved = false;
            this.lastPointX = point.pageX;
            this.lastPointY = point.pageY;

            this.startTime = utils.getTime();

            if (!this.options.disableTouch) {
                utils.addEvent(window, 'touchmove', this);
            }
            if (!this.options.disablePointer) {
                utils.addEvent(window, utils.prefixPointerEvent('pointermove'), this);
            }
            if (!this.options.disableMouse) {
                utils.addEvent(window, 'mousemove', this);
            }

            this.scroller._execEvent('beforeScrollStart');
        },

        _move: function (e) {
            var point = e.touches ? e.touches[0] : e,
                deltaX, deltaY,
                newX, newY,
                timestamp = utils.getTime();

            if (!this.moved) {
                this.scroller._execEvent('scrollStart');
            }

            this.moved = true;

            deltaX = point.pageX - this.lastPointX;
            this.lastPointX = point.pageX;

            deltaY = point.pageY - this.lastPointY;
            this.lastPointY = point.pageY;

            newX = this.x + deltaX;
            newY = this.y + deltaY;

            this._pos(newX, newY);


            if (this.scroller.options.probeType == 1 && timestamp - this.startTime > 300) {
                this.startTime = timestamp;
                this.scroller._execEvent('scroll');
            } else if (this.scroller.options.probeType > 1) {
                this.scroller._execEvent('scroll');
            }


// INSERT POINT: indicator._move

            e.preventDefault();
            e.stopPropagation();
        },

        _end: function (e) {
            if (!this.initiated) {
                return;
            }

            this.initiated = false;

            e.preventDefault();
            e.stopPropagation();

            utils.removeEvent(window, 'touchmove', this);
            utils.removeEvent(window, utils.prefixPointerEvent('pointermove'), this);
            utils.removeEvent(window, 'mousemove', this);

            if (this.scroller.options.snap) {
                var snap = this.scroller._nearestSnap(this.scroller.x, this.scroller.y);

                var time = this.options.snapSpeed || Math.max(
                        Math.max(
                            Math.min(Math.abs(this.scroller.x - snap.x), 1000),
                            Math.min(Math.abs(this.scroller.y - snap.y), 1000)
                        ), 300);

                if (this.scroller.x != snap.x || this.scroller.y != snap.y) {
                    this.scroller.directionX = 0;
                    this.scroller.directionY = 0;
                    this.scroller.currentPage = snap;
                    this.scroller.scrollTo(snap.x, snap.y, time, this.scroller.options.bounceEasing);
                }
            }

            if (this.moved) {
                this.scroller._execEvent('scrollEnd');
            }
        },

        transitionTime: function (time) {
            time = time || 0;
            this.indicatorStyle[utils.style.transitionDuration] = time + 'ms';

            if (!time && utils.isBadAndroid) {
                this.indicatorStyle[utils.style.transitionDuration] = '0.001s';
            }
        },

        transitionTimingFunction: function (easing) {
            this.indicatorStyle[utils.style.transitionTimingFunction] = easing;
        },

        refresh: function () {
            this.transitionTime();

            if (this.options.listenX && !this.options.listenY) {
                this.indicatorStyle.display = this.scroller.hasHorizontalScroll ? 'block' : 'none';
            } else if (this.options.listenY && !this.options.listenX) {
                this.indicatorStyle.display = this.scroller.hasVerticalScroll ? 'block' : 'none';
            } else {
                this.indicatorStyle.display = this.scroller.hasHorizontalScroll || this.scroller.hasVerticalScroll ? 'block' : 'none';
            }

            if (this.scroller.hasHorizontalScroll && this.scroller.hasVerticalScroll) {
                utils.addClass(this.wrapper, 'iScrollBothScrollbars');
                utils.removeClass(this.wrapper, 'iScrollLoneScrollbar');

                if (this.options.defaultScrollbars && this.options.customStyle) {
                    if (this.options.listenX) {
                        this.wrapper.style.right = '8px';
                    } else {
                        this.wrapper.style.bottom = '8px';
                    }
                }
            } else {
                utils.removeClass(this.wrapper, 'iScrollBothScrollbars');
                utils.addClass(this.wrapper, 'iScrollLoneScrollbar');

                if (this.options.defaultScrollbars && this.options.customStyle) {
                    if (this.options.listenX) {
                        this.wrapper.style.right = '2px';
                    } else {
                        this.wrapper.style.bottom = '2px';
                    }
                }
            }

            var r = this.wrapper.offsetHeight;	// force refresh

            if (this.options.listenX) {
                this.wrapperWidth = this.wrapper.clientWidth;
                if (this.options.resize) {
                    this.indicatorWidth = Math.max(Math.round(this.wrapperWidth * this.wrapperWidth / (this.scroller.scrollerWidth || this.wrapperWidth || 1)), 8);
                    this.indicatorStyle.width = this.indicatorWidth + 'px';
                } else {
                    this.indicatorWidth = this.indicator.clientWidth;
                }

                this.maxPosX = this.wrapperWidth - this.indicatorWidth;

                if (this.options.shrink == 'clip') {
                    this.minBoundaryX = -this.indicatorWidth + 8;
                    this.maxBoundaryX = this.wrapperWidth - 8;
                } else {
                    this.minBoundaryX = 0;
                    this.maxBoundaryX = this.maxPosX;
                }

                this.sizeRatioX = this.options.speedRatioX || (this.scroller.maxScrollX && (this.maxPosX / this.scroller.maxScrollX));
            }

            if (this.options.listenY) {
                this.wrapperHeight = this.wrapper.clientHeight;
                if (this.options.resize) {
                    this.indicatorHeight = Math.max(Math.round(this.wrapperHeight * this.wrapperHeight / (this.scroller.scrollerHeight || this.wrapperHeight || 1)), 8);
                    this.indicatorStyle.height = this.indicatorHeight + 'px';
                } else {
                    this.indicatorHeight = this.indicator.clientHeight;
                }

                this.maxPosY = this.wrapperHeight - this.indicatorHeight;

                if (this.options.shrink == 'clip') {
                    this.minBoundaryY = -this.indicatorHeight + 8;
                    this.maxBoundaryY = this.wrapperHeight - 8;
                } else {
                    this.minBoundaryY = 0;
                    this.maxBoundaryY = this.maxPosY;
                }

                this.maxPosY = this.wrapperHeight - this.indicatorHeight;
                this.sizeRatioY = this.options.speedRatioY || (this.scroller.maxScrollY && (this.maxPosY / this.scroller.maxScrollY));
            }

            this.updatePosition();
        },

        updatePosition: function () {
            var x = this.options.listenX && Math.round(this.sizeRatioX * this.scroller.x) || 0,
                y = this.options.listenY && Math.round(this.sizeRatioY * this.scroller.y) || 0;

            if (!this.options.ignoreBoundaries) {
                if (x < this.minBoundaryX) {
                    if (this.options.shrink == 'scale') {
                        this.width = Math.max(this.indicatorWidth + x, 8);
                        this.indicatorStyle.width = this.width + 'px';
                    }
                    x = this.minBoundaryX;
                } else if (x > this.maxBoundaryX) {
                    if (this.options.shrink == 'scale') {
                        this.width = Math.max(this.indicatorWidth - (x - this.maxPosX), 8);
                        this.indicatorStyle.width = this.width + 'px';
                        x = this.maxPosX + this.indicatorWidth - this.width;
                    } else {
                        x = this.maxBoundaryX;
                    }
                } else if (this.options.shrink == 'scale' && this.width != this.indicatorWidth) {
                    this.width = this.indicatorWidth;
                    this.indicatorStyle.width = this.width + 'px';
                }

                if (y < this.minBoundaryY) {
                    if (this.options.shrink == 'scale') {
                        this.height = Math.max(this.indicatorHeight + y * 3, 8);
                        this.indicatorStyle.height = this.height + 'px';
                    }
                    y = this.minBoundaryY;
                } else if (y > this.maxBoundaryY) {
                    if (this.options.shrink == 'scale') {
                        this.height = Math.max(this.indicatorHeight - (y - this.maxPosY) * 3, 8);
                        this.indicatorStyle.height = this.height + 'px';
                        y = this.maxPosY + this.indicatorHeight - this.height;
                    } else {
                        y = this.maxBoundaryY;
                    }
                } else if (this.options.shrink == 'scale' && this.height != this.indicatorHeight) {
                    this.height = this.indicatorHeight;
                    this.indicatorStyle.height = this.height + 'px';
                }
            }

            this.x = x;
            this.y = y;

            if (this.scroller.options.useTransform) {
                this.indicatorStyle[utils.style.transform] = 'translate(' + x + 'px,' + y + 'px)' + this.scroller.translateZ;
            } else {
                this.indicatorStyle.left = x + 'px';
                this.indicatorStyle.top = y + 'px';
            }
        },

        _pos: function (x, y) {
            if (x < 0) {
                x = 0;
            } else if (x > this.maxPosX) {
                x = this.maxPosX;
            }

            if (y < 0) {
                y = 0;
            } else if (y > this.maxPosY) {
                y = this.maxPosY;
            }

            x = this.options.listenX ? Math.round(x / this.sizeRatioX) : this.scroller.x;
            y = this.options.listenY ? Math.round(y / this.sizeRatioY) : this.scroller.y;

            this.scroller.scrollTo(x, y);
        },

        fade: function (val, hold) {
            if (hold && !this.visible) {
                return;
            }

            clearTimeout(this.fadeTimeout);
            this.fadeTimeout = null;

            var time = val ? 250 : 500,
                delay = val ? 0 : 300;

            val = val ? '1' : '0';

            this.wrapperStyle[utils.style.transitionDuration] = time + 'ms';

            this.fadeTimeout = setTimeout((function (val) {
                this.wrapperStyle.opacity = val;
                this.visible = +val;
            }).bind(this, val), delay);
        }
    };

    IScroll.utils = utils;

    if (typeof module != 'undefined' && module.exports) {
        module.exports = IScroll;
    } else {
        window.IScroll = IScroll;
    }

})(window, document, Math);

    
// 顶部搜索框
/*;(function ($) {
    "use strict";    // 搜索控制 此组件要内页自已引入 div 结构
    var searchbar = {
        init: function () {
            pages.searchbar.events = {
                '#searchInput': {
                    blur: function () {
                        if (!this.value.length) {
                            $("#searchResult").hide();
                            $("#searchInput").val('');
                            $("#searchBar").removeClass('weui-search-bar_focusing');
                            $("#searchText").show();
                        }

                    },
                    input: function () {
                        if (this.value.length) {
                            $("#searchResult").show();
                        } else {
                            $("#searchResult").hide();
                        }
                    }
                },

                '#searchText': {
                    click: function () {
                        $("#searchBar").addClass('weui-search-bar_focusing');
                        $("#searchInput").focus();
                    }
                },

                '#searchCancel': {
                    click: function () {
                        $("#searchResult").hide();
                        $("#searchInput").val('');
                        $("#searchBar").removeClass('weui-search-bar_focusing');
                        $("#searchText").show();
                        $("#searchInput").blur();
                    }
                },
                '#searchClear': {
                    click: function () {
                        $("#searchResult").hide();
                        $("#searchInput").val('');
                        $("#searchInput").focus();
                    }
                }
            };
        }

    };
})(window || this);*/




var searchInput= {
    blur: function () {
        //if (!$(this).val()) {
        var val = $("#searchInput").val();
        //if ($(this).value == '') {
        if(val==''){
            $("#searchResult").hide();
            $("#searchInput").val('');
            $("#searchBar").removeClass('weui-search-bar_focusing');
            $("#searchText").show();
        }
    },
    input: function () {
        if ($(this).val()) {
            $("#searchResult").hide();
        } else {
            $("#searchResult").show();
        }
    }
};

var searchText= {
    click: function () {
        $("#searchBar").addClass('weui-search-bar_focusing');
        $("#searchInput").focus();
    }
};

var searchCancel= {
    click: function () {
        $("#searchResult").hide();
        $("#searchInput").val('');
        $("#searchBar").removeClass('weui-search-bar_focusing');
        $("#searchText").show();
        $("#searchInput").blur();
    }
};
var searchClear= {
    click: function () {
        $("#searchResult").hide();
        $("#searchInput").val('');
        $("#searchInput").focus();
    }
};



    
/**
 * 序列化星级
 * 根据固定html结构中元素提供的数字，把星星级别化
 */
;
(function($) {
    $.fn.starLevelize = function() {
        return this.each(function(index, ele) {
            var $ele = $(ele);
            //get flag
            if ($ele.data("starlevelized")) {
                return;
            }
            var starnum = parseFloat($ele.data("starnum")).toFixed(1);
            //var starnum_int = parseInt(starnum, 10); //3
            //3个fullstar 1个half star 1个empty star
            if (starnum <= 5) {
                $ele.children().eq(starnum).addClass('icon-s-star').removeClass('icon-l-star');
            }
            for (var i = starnum + 1; i < 5; i++) {
                $ele.children().eq(i).addClass('icon-l-star').removeClass('icon-s-star');
            }

            //set flag
            $ele.data("starlevelized", true);
        });
    };
})(Zepto);
$(".starlevels").starLevelize();

    
// 微信插件
var weixin = {
    url: base + 'weixin/mutual/get_config.jhtml',
    lat: 0, // 纬度，浮点数，范围为90 ~ -90
    lng: 0, // 经度，浮点数，范围为180 ~ -180。
    speed: 0, // 速度，以米/每秒计
    accuracy: 0, // 位置精度
    config: {},
    setting: "none",
    init: function () {
        var $def = $.Deferred();
        console.log("浏览器版本：" + (cookie.getCookie('browse_version') == 'MicroMessenger' ? 'weixin' : 'other'));
        if (cookie.getCookie('browse_version') != 'MicroMessenger') {
            $def.reject();
            return $def.promise();
        }
        console.log(weixin.setting);
        if (weixin.setting == "none") {
            weixin.setting = "pending";
            $.getJSON(weixin.url + '?url=' + encodeURIComponent(location.href.split('#')[0])).done(function (res) {
                var config = res.data;
                wx.config({
                    beta: true,
                    debug: false,
                    appId: config.appId,
                    timestamp: config.timestamp,
                    nonceStr: config.nonceStr,
                    signature: config.signature,
                    jsApiList: [
                        'onMenuShareTimeline',
                        'onMenuShareAppMessage',
                        'onMenuShareQQ',
                        'onMenuShareWeibo',
                        'onMenuShareQZone',
                        'getLocation',
                        'openLocation',
                        'scanQRCode'
                    ]
                });
                weixin.setting = "success";
                weixin.config = config;
                $def.resolve(weixin.config);
                console.log("测试resolve方法后是够继续执行");
            }).fail(function () {
                weixin.setting = "none";
                $def.reject();
            });
        } else if (weixin.setting == "pending") {
            var t = window.setInterval(function () {
                if (weixin.setting == "success") {
                    clearInterval(t);
                    $def.resolve(weixin.config);
                } else if (weixin.setting == "none") {
                    clearInterval(t);
                    $def.reject();
                }
            }, 300);
        } else if (weixin.setting == "success") {
            $def.resolve(weixin.config);
        }
        return $def.promise();
    },
    /**
     * 分享接口
     * title    分享标题
     * desc     分享描述
     * link     分享链接
     * imgUrl   分享图标
     */
    share: function (jsons) {
        weixin.init().done(function (config) {
            wx.ready(function () {
                //分享到朋友圈
                wx.onMenuShareTimeline({
                    title: jsons && jsons.title ? jsons.title : config.sharetitle,
                    desc: jsons && jsons.desc ? jsons.desc : config.sharedesc,
                    link: jsons && jsons.link ? jsons.link : config.sharelink,
                    imgUrl: jsons && jsons.imgUrl ? jsons.imgUrl : config.shareimage,
                    success: function () {
                        // 用户确认分享后执行的回调函数
                    },
                    cancel: function () {
                        // 用户取消分享后执行的回调函数
                    }
                });
                //分享给朋友
                wx.onMenuShareAppMessage({
                    title: jsons && jsons.title ? jsons.title : config.sharetitle,
                    desc: jsons && jsons.desc ? jsons.desc : config.sharedesc,
                    link: jsons && jsons.link ? jsons.link : config.sharelink,
                    imgUrl: jsons && jsons.imgUrl ? jsons.imgUrl : config.shareimage,
                    success: function () {
                        // 用户确认分享后执行的回调函数
                    },
                    cancel: function () {
                        // 用户取消分享后执行的回调函数
                    }
                });
                //分享到QQ
                wx.onMenuShareQQ({
                    title: jsons && jsons.title ? jsons.title : config.sharetitle,   // 分享标题
                    desc: jsons && jsons.desc ? jsons.desc : config.sharedesc,   // 分享描述
                    link: jsons && jsons.link ? jsons.link : config.sharelink,   // 分享链接
                    imgUrl: jsons && jsons.imgUrl ? jsons.imgUrl : config.shareimage,   // 分享图标
                    success: function () {
                        // 用户确认分享后执行的回调函数
                    },
                    cancel: function () {
                        // 用户取消分享后执行的回调函数
                    }
                });
                //分享到腾讯微博
                wx.onMenuShareWeibo({
                    title: jsons && jsons.title ? jsons.title : config.sharetitle,   // 分享标题
                    desc: jsons && jsons.desc ? jsons.desc : config.sharedesc,   // 分享描述
                    link: jsons && jsons.link ? jsons.link : config.sharelink,   // 分享链接
                    imgUrl: jsons && jsons.imgUrl ? jsons.imgUrl : config.shareimage,   // 分享图标
                    success: function () {
                        // 用户确认分享后执行的回调函数
                    },
                    cancel: function () {
                        // 用户取消分享后执行的回调函数
                    }
                });
                //分享到QQ空间
                wx.onMenuShareQZone({
                    title: jsons && jsons.title ? jsons.title : config.sharetitle,   // 分享标题
                    desc: jsons && jsons.desc ? jsons.desc : config.sharedesc,   // 分享描述
                    link: jsons && jsons.link ? jsons.link : config.sharelink,   // 分享链接
                    imgUrl: jsons && jsons.imgUrl ? jsons.imgUrl : config.shareimage,   // 分享图标
                    success: function () {
                        // 用户确认分享后执行的回调函数
                    },
                    cancel: function () {
                        // 用户取消分享后执行的回调函数
                    }
                });

            });
        });
    },
    /**
     * 获取地理位置接口
     */
    location: function (fn) {
        weixin.init().done(function (config) {
            wx.ready(function () {
                wx.getLocation({
                    type: 'gcj02',
                    success: function (res) {
                        weixin.lat = res.latitude; // 纬度，浮点数，范围为90 ~ -90
                        weixin.lng = res.longitude; // 经度，浮点数，范围为180 ~ -180。
                        weixin.speed = res.speed; // 速度，以米/每秒计
                        weixin.accuracy = res.accuracy; // 位置精度
                        console.log("定位到的经纬度：");
                        console.log("lat:" + weixin.lat);
                        console.log("lng:" + weixin.lng);
                        if(fn) fn(true);//true表示已获取经纬度
                        new lbs(function (data) {
                            console.log("经纬度获取到的城市：");
                            console.log(data);

                            if (data.update) {
                                // if (confirm("检测当前所在城市为" + data.area.name + ",是否切换？")) {
                                //     new lbs(function () {
                                //         location.reload();
                                //     }).update({lat: weixin.lat, lng: weixin.lng})
                                // }
                                dialog.query("检测当前所在城市为" + data.area.name + ",是否切换？",function () {
                                    new lbs(function () {
                                        location.reload();
                                    }).update({lat: weixin.lat, lng: weixin.lng})
                                });

                            }
                        }).get({lat: weixin.lat, lng: weixin.lng});
                    },
                    fail: function () {
                        console.log("定位失败");
                        if (fn) fn();
                    }
                });
                wx.error(function (res) {
                    console.log(res);
                    if (fn) fn();
                });

            });
        }).fail(function () {
            if (fn) fn();
        });
    },
    /**
     * 使用微信内置地图查看位置接口
     * lat  纬度
     * lng  经度
     * name 位置名
     * address  地址详情说明
     * url  在查看位置界面底部显示的超链接,可点击跳转
     */
    openLocation: function (jsons) {
        weixin.init().done(function (config) {
            wx.ready(function () {
                wx.openLocation({
                    latitude: jsons.lat,
                    longitude: jsons.lng,
                    name: jsons.name,
                    address: jsons.address,
                    scale: 18,
                    infoUrl: jsons.url ? jsons.url : ''
                });
                wx.error(function (res) {
                    console.log(res);
                });
            });
        });
    },
    /**
     * 首页扫一扫
     */
    scanQRCode: function () {
        weixin.init().done(function (config) {
            wx.ready(function () {
                wx.scanQRCode({
                    desc: '扫一扫',
                    needResult: 0, // 默认为0，扫描结果由微信处理，1则直接返回扫描结果，
                    scanType: ["qrCode", "barCode"] // 可以指定扫二维码还是一维码，默认二者都有
                });
                wx.error(function (res) {
                    console.log(res);
                });

            });
        });
    },
    /**
     * 商家首页扫一扫
     * tenantId 商家Id
     */
    scanQRCode1: function (tenantId) {
        weixin.init().done(function (config) {
            wx.ready(function () {
                wx.scanQRCode({
                    desc: '扫一扫',
                    needResult: 1, // 默认为0，扫描结果由微信处理，1则直接返回扫描结果，
                    scanType: ["qrCode", "barCode"], // 可以指定扫二维码还是一维码，默认二者都有
                    success: function (res) {
                        var result = res.resultStr; // 当needResult 为 1 时，扫码返回的结果
                        if (result.substr(0, 4) == 'http') {
                            location.href = result;
                            return;
                        }
                        var arr_result = result.split(',');
                        var barcode = arr_result[arr_result.length - 1];
                        new tenant(function (data) {
                            if (data.length > 0) {
                                location.href = '/weixin/product/product-details.html' + data[0].id;
                            } else {
                                toast.show("此商品没有上架");
                            }
                        }).barcode({
                            id: tenantId,
                            barcode: barcode
                        });

                    }
                });
                wx.error(function (res) {
                    console.log(res);
                });

            });
        });
    }
};


    
/**
 * 确认订单时候选择我的收货地址组件
 * Created by Wan on 11/26 0011.
 */

var choosead = {
    bank: function (data) {
        ajax.get({
            url: base + "weixin/member/receiver/list.jhtml",
            data: data,
            success: function (data) {
                var html = "";
                $.each(data, function (index, bank) {
                    var ul = '<a class="weui-cell" href="javascript:;" adid="' + bank.id + '">';
                    ul +='<div class="weui-cell__bd">'+
                        '<p class="f14">'+
                        '<span style="margin-right:5px">'+bank.consignee+'</span><span style="margin-left: 10px;">'+bank.phone+'</span>'+
                        '</p>'+
                        '<p class="Fauxiliary">'+
                        '<span>'+bank.area.fullName+'</span>,<span>'+bank.address+'</span>'+    
                        '</p>'+
                        '</div>'
                    ul += '</a>';
                    html += ul;
                });
                var editad= '<div class="add_address weui-btn-area editmyaddress" style="text-align: center;color:#fff;background:#ff6d06;">'+
                    '管理收货地址'+
                    '</div>';
                html+=editad;
                $(".chooseWidget").show().html(html);
                $(".chooseWidget a").click(function(){
                    $(".chooseWidget").hide().html("");
                    if(choosead.callBack){
                        choosead.callBack({id: $(this).attr("id"),html:$(this)});
                    }
                });
                $(".editmyaddress").click(function(){
                    location.href=location.origin+'/weixin/member/member-home.html?#address-list';
                })
            }
        });
    }
};

    
/*!
 * weui.js v0.1.5 (https://weui.io)
 * Copyright 2016, wechatui <wechatui@gmail.com>
 * MIT license
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.weui=t():e.weui=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=i(o),r=n(7),u=i(r),l=n(8),d=i(l),f=n(9),c=i(f),s=n(11),p=i(s),v=n(13),h=i(v),m=n(15),y=i(m),_=n(17),w=i(_),g=n(18),b=i(g),k=n(19),x=i(k),E=n(20),j=i(E),C=n(24),M=n(29),S=i(M);t["default"]={dialog:a["default"],alert:u["default"],confirm:d["default"],toast:c["default"],loading:p["default"],actionSheet:h["default"],topTips:y["default"],searchBar:w["default"],tab:b["default"],form:x["default"],uploader:j["default"],picker:C.picker,datePicker:C.datePicker,gallery:S["default"]},e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r["default"].noop;a.addClass("weui-animate-fade-out"),o.addClass("weui-animate-fade-out").on("animationend webkitAnimationEnd",function(){i.remove(),f=!1,e()})}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!f){f=!0;var n=r["default"].os.android;t=r["default"].extend({title:null,content:"",className:"",buttons:[{label:"确定",type:"primary",onClick:r["default"].noop}],isAndroid:n},t);var i=(0,r["default"])(r["default"].render(l["default"],t)),o=i.find(".weui-dialog"),a=i.find(".weui-mask");return d.append(i),a.addClass("weui-animate-fade-in"),o.addClass("weui-animate-fade-in"),i.on("click",".weui-dialog__btn",function(n){var i=this,o=(0,r["default"])(this).index();e(function(){t.buttons[o].onClick&&t.buttons[o].onClick.call(i,n)})}),i.hide=e,i}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=i(a),u=n(6),l=i(u),d=(0,r["default"])("body"),f=void 0;t["default"]=o,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=this.os={},n=e.match(/(Android);?[\s\/]+([\d.]+)?/);n&&(t.android=!0,t.version=n[2])}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n(3);var r=n(4),u=i(r),l=n(5),d=i(l);o.call(d["default"],navigator.userAgent),(0,u["default"])(d["default"].fn,{append:function(e){return e instanceof HTMLElement||(e=e[0]),this.forEach(function(t){t.appendChild(e)}),this},remove:function(){return this.forEach(function(e){e.parentNode.removeChild(e)}),this},find:function(e){return(0,d["default"])(e,this)},addClass:function(e){return this.forEach(function(t){t.classList.add(e)}),this},removeClass:function(e){return this.forEach(function(t){t.classList.remove(e)}),this},eq:function(e){return(0,d["default"])(this[e])},show:function(){return this.forEach(function(e){e.style.display="block"}),this},hide:function(){return this.forEach(function(e){e.style.display="none"}),this},html:function(e){return this.forEach(function(t){t.innerHTML=e}),this},css:function(e){var t=this;return Object.keys(e).forEach(function(n){t.forEach(function(t){t.style[n]=e[n]})}),this},on:function(e,t,n){var i="string"==typeof t&&"function"==typeof n;return i||(n=t),this.forEach(function(o){e.split(" ").forEach(function(e){o.addEventListener(e,function(e){i?this.contains(e.target.closest(t))&&n.call(e.target,e):n.call(this,e)})})}),this},off:function(e,t,n){return"function"==typeof t&&(n=t,t=null),this.forEach(function(i){e.split(" ").forEach(function(e){"string"==typeof t?i.querySelectorAll(t).forEach(function(t){t.removeEventListener(e,n)}):i.removeEventListener(e,n)})}),this},index:function(){var e=this[0],t=e.parentNode;return Array.prototype.indexOf.call(t.children,e)},offAll:function(){var e=this;return this.forEach(function(t,n){var i=t.cloneNode(!0);t.parentNode.replaceChild(i,t),e[n]=i}),this},val:function(){var e=arguments;return arguments.length?(this.forEach(function(t){t.value=e[0]}),this):this[0].value},attr:function(){var e=arguments,t=this;if("object"==a(arguments[0])){var n=function(){var n=e[0],i=t;return Object.keys(n).forEach(function(e){i.forEach(function(t){t.setAttribute(e,n[e])})}),{v:t}}();if("object"===("undefined"==typeof n?"undefined":a(n)))return n.v}return"string"==typeof arguments[0]&&arguments.length<2?this[0].getAttribute(arguments[0]):(this.forEach(function(t){t.setAttribute(e[0],e[1])}),this)}}),(0,u["default"])(d["default"],{extend:u["default"],noop:function(){},render:function(e,t){var n="var p=[],print=function(){p.push.apply(p,arguments);};with(this){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');";return new Function(n).apply(t)},getStyle:function(e,t){var n,i=(e.ownerDocument||document).defaultView;return i&&i.getComputedStyle?(t=t.replace(/([A-Z])/g,"-$1").toLowerCase(),i.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle?(t=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),n=e.currentStyle[t],/^\d+(em|pt|%|ex)?$/i.test(n)?function(t){var n=e.style.left,i=e.runtimeStyle.left;return e.runtimeStyle.left=e.currentStyle.left,e.style.left=t||0,t=e.style.pixelLeft+"px",e.style.left=n,e.runtimeStyle.left=i,t}(n):n):void 0}}),t["default"]=d["default"],e.exports=t["default"]},function(e,t){"function"!=typeof Element.prototype.matches&&(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=this,n=(t.document||t.ownerDocument).querySelectorAll(e),i=0;n[i]&&n[i]!==t;)++i;return Boolean(n[i])}),"function"!=typeof Element.prototype.closest&&(Element.prototype.closest=function(e){for(var t=this;t&&1===t.nodeType;){if(t.matches(e))return t;t=t.parentNode}return null})},function(e,t){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function i(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var i=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==i.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(a){return!1}}var o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=i()?Object.assign:function(e,t){for(var i,r,u=n(e),l=1;l<arguments.length;l++){i=Object(arguments[l]);for(var d in i)o.call(i,d)&&(u[d]=i[d]);if(Object.getOwnPropertySymbols){r=Object.getOwnPropertySymbols(i);for(var f=0;f<r.length;f++)a.call(i,r[f])&&(u[r[f]]=i[r[f]])}}return u}},function(e,t,n){var i,o;!function(n,a){a=function(e,t,n){function i(o,a,r){return r=Object.create(i.fn),o&&r.push.apply(r,o[t]?[o]:""+o===o?/</.test(o)?((a=e.createElement(a||t)).innerHTML=o,a.children):a?(a=i(a)[0])?a[n](o):r:e[n](o):"function"==typeof o?e.readyState[7]?o():e[t]("DOMContentLoaded",o):o),r}return i.fn=[],i.one=function(e,t){return i(e,t)[0]||null},i}(document,"addEventListener","querySelectorAll"),i=[],o=function(){return a}.apply(t,i),!(void 0!==o&&(e.exports=o))}(this)},function(e,t){e.exports="<div> <div class=weui-mask></div> <div class=\"weui-dialog <% if(isAndroid){ %> weui-skin_android <% } %>\"> <% if(title){ %> <div class=weui-dialog__hd><strong class=weui-dialog__title><%=title%></strong></div> <% } %> <div class=weui-dialog__bd><%=content%></div> <div class=weui-dialog__ft> <% for(var i = 0; i < buttons.length; i++){ %> <a href=javascript:; class=\"weui-dialog__btn weui-dialog__btn_<%=buttons[i]['type']%>\"><%=buttons[i]['label']%></a> <% } %> </div> </div> </div> "},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],n=arguments[2],i="object"===("undefined"==typeof t?"undefined":a(t));i&&(n=t),n=u["default"].extend({content:e,buttons:[{label:"确定",type:"primary",onClick:i?u["default"].noop:t}]},n),(0,d["default"])(n)}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(2),u=i(r),l=n(1),d=i(l);t["default"]=o,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],n=arguments[2],i=arguments[3],o="object"===("undefined"==typeof t?"undefined":a(t));o&&(i=t),i=u["default"].extend({content:e,className:"",buttons:[{label:"取消",type:"default",onClick:o?u["default"].noop:n},{label:"确定",type:"primary",onClick:o?u["default"].noop:t}]},i),(0,d["default"])(i)}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(2),u=i(r),l=n(1),d=i(l);t["default"]=o,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!f){f=!0,"number"==typeof t&&(t={duration:t}),"function"==typeof t&&(t={callback:t}),t=r["default"].extend({duration:3e3,callback:r["default"].noop},t);var n=(0,r["default"])(r["default"].render(l["default"],{content:e}));d.append(n),n.addClass("weui-animate-fade-in"),setTimeout(function(){n.addClass("weui-animate-fade-out").on("animationend webkitAnimationEnd",function(){n.remove(),f=!1,t.callback()})},t.duration)}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=i(a),u=n(10),l=i(u),d=(0,r["default"])("body"),f=void 0;t["default"]=o,e.exports=t["default"]},function(e,t){e.exports='<div> <div class=weui-mask_transparent></div> <div class=weui-toast> <i class="weui-icon_toast weui-icon-success-no-circle"></i> <p class=weui-toast__content><%=content%></p> </div> </div>'},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(){function e(){n.addClass("weui-animate-fade-out").on("animationend webkitAnimationEnd",function(){n.remove(),f=!1})}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!f){f=!0;var n=(0,r["default"])(r["default"].render(l["default"],{content:t}));return d.append(n),n.addClass("weui-animate-fade-in"),n.hide=e,n}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=i(a),u=n(12),l=i(u),d=(0,r["default"])("body"),f=void 0;t["default"]=o,e.exports=t["default"]},function(e,t){e.exports='<div class=weui-loading_toast> <div class=weui-mask_transparent></div> <div class=weui-toast> <i class="weui-loading weui-icon_toast"></i> <p class=weui-toast__content><%=content%></p> </div> </div>'},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(){function e(){a.addClass(i?"weui-animate-fade-out":"weui-animate-slide-down"),u.addClass("weui-animate-fade-out").on("animationend webkitAnimationEnd",function(){o.remove(),f=!1})}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!f){f=!0;var i=r["default"].os.android,o=(0,r["default"])(r["default"].render(l["default"],{menus:t,actions:n,isAndroid:i})),a=o.find(".weui-actionsheet"),u=o.find(".weui-mask");return d.append(o),r["default"].getStyle(a[0],"transform"),a.addClass(i?"weui-animate-fade-in":"weui-animate-slide-up"),u.addClass("weui-animate-fade-in").on("click",e),o.find(".weui-actionsheet__menu").on("click",".weui-actionsheet__cell",function(n){var i=(0,r["default"])(this).index();t[i].onClick.call(this,n),e()}),o.find(".weui-actionsheet__action").on("click",".weui-actionsheet__cell",function(t){var i=(0,r["default"])(this).index();n[i].onClick.call(this,t),e()}),o.hide=e,o}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=i(a),u=n(14),l=i(u),d=(0,r["default"])("body"),f=void 0;t["default"]=o,e.exports=t["default"]},function(e,t){e.exports='<div class="<% if(isAndroid){ %> weui-skin_android <% } %>"> <div class=weui-mask></div> <div class=weui-actionsheet> <div class=weui-actionsheet__menu> <% for(var i = 0; i < menus.length; i++){ %> <div class=weui-actionsheet__cell><%= menus[i].label %></div> <% } %> </div> <div class=weui-actionsheet__action> <% for(var j = 0; j < actions.length; j++){ %> <div class=weui-actionsheet__cell><%= actions[j].label %></div> <% } %> </div> </div> </div> '},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e){function t(){i.remove(),n.callback(),f=null}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"number"==typeof n&&(n={duration:n}),"function"==typeof n&&(n={callback:n}),n=r["default"].extend({duration:3e3,callback:r["default"].noop},n);var i=(0,r["default"])(r["default"].render(l["default"],{content:e}));return d.append(i),f&&(clearTimeout(f.timeout),f.hide()),f={hide:t},f.timeout=setTimeout(t,n.duration),i.hide=t,i}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=i(a),u=n(16),l=i(u),d=(0,r["default"])("body"),f=null;t["default"]=o,e.exports=t["default"]},function(e,t){e.exports='<div class="weui-toptips weui-toptips_warn" style=display:block><%= content %></div>'},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=(0,r["default"])(e);return t.forEach(function(e){function t(){o.val(""),n.removeClass("weui-search-bar_focusing")}var n=(0,r["default"])(e),i=n.find(".weui-search-bar__label"),o=n.find(".weui-search-bar__input"),a=n.find(".weui-icon-clear"),u=n.find(".weui-search-bar__cancel-btn");i.on("click",function(){n.addClass("weui-search-bar_focusing"),o[0].focus()}),o.on("blur",function(){this.value.length||t()}),a.on("click",function(){o.val(""),o[0].focus()}),u.on("click",function(){t(),o[0].blur()})}),t}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=i(a);t["default"]=o,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,r["default"])(e);return t=r["default"].extend({defaultIndex:0,onChange:r["default"].noop},t),n.forEach(function(e){var n=(0,r["default"])(e),i=n.find(".weui-navbar__item, .weui-tabbar__item"),o=n.find(".weui-tab__content");i.eq(t.defaultIndex).addClass("weui-bar__item_on"),o.eq(t.defaultIndex).show(),i.on("click",function(){var e=(0,r["default"])(this),n=e.index();i.removeClass("weui-bar__item_on"),e.addClass("weui-bar__item_on"),o.hide(),o.eq(n).show(),t.onChange.call(this,n)})}),this}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=i(a);t["default"]=o,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e){return e?e.classList.contains("weui-cell")?e:o(e.parentNode):null}function a(e,t,n){var i=e[0],o=e.val();if("INPUT"==i.tagName||"TEXTAREA"==i.tagName){var a=i.getAttribute("required")||i.getAttribute("pattern")||"";if("radio"==i.type){for(var r=t.find('input[type="radio"][name="'+i.name+'"]'),u=0,l=r.length;u<l;++u)if(r[u].checked)return null;return"empty"}if("checkbox"!=i.type){if(e.val().length){if(a){if(/^REG_/.test(a)){if(!n)throw"RegExp "+a+" is empty.";if(a=a.replace(/^REG_/,""),!n[a])throw"RegExp "+a+" has not found.";a=n[a]}return new RegExp(a).test(o)?null:"notMatch"}return null}return"empty"}if(!a)return i.checked?null:"empty";var f=function(){var e=t.find('input[type="checkbox"][name="'+i.name+'"]'),n=a.replace(/[{\s}]/g,"").split(","),o=0;if(2!=n.length)throw i.outerHTML+" regexp is wrong.";return e.forEach(function(e){e.checked&&++o}),o?""===n[1]?o>=parseInt(n[0])?{v:null}:{v:"notMatch"}:parseInt(n[0])<=o&&o<=parseInt(n[1])?{v:null}:{v:"notMatch"}:{v:"empty"}}();if("object"===("undefined"==typeof f?"undefined":d(f)))return f.v}else if(o.length)return null;return"empty"}function r(e){if(e){var t=(0,c["default"])(e.ele),n=e.msg,i=t.attr(n+"Tips")||t.attr("tips")||t.attr("placeholder");if(i&&(0,p["default"])(i),"checkbox"==e.ele.type||"radio"==e.ele.type)return;var a=o(e.ele);a&&a.classList.add("weui-cell_warn")}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c["default"].noop,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(0,c["default"])(e);return i.forEach(function(e){var i=(0,c["default"])(e),o=i.find("[required]");"function"!=typeof t&&(t=r);for(var u=0,l=o.length;u<l;++u){var d=o.eq(u),f=a(d,i,n.regexp),s={ele:d[0],msg:f};if(f)return void(t(s)||r(s))}t(null)}),this}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,c["default"])(e);return n.forEach(function(e){var n=(0,c["default"])(e);n.find("[required]").on("blur",function(){if("checkbox"!=this.type&&"radio"!=this.type){var e=(0,c["default"])(this);if(!(e.val().length<1)){var i=a(e,n,t.regexp);i&&r({ele:e[0],msg:i})}}}).on("focus",function(){var e=o(this);e&&e.classList.remove("weui-cell_warn")})}),this}Object.defineProperty(t,"__esModule",{value:!0});var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=n(2),c=i(f),s=n(15),p=i(s);t["default"]={validate:u,checkIfBlur:l},e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){function n(e,t){var n=e.find('[data-id="'+t+'"]'),i=n.find(".weui-uploader__file-content");return i.length||(i=(0,r["default"])('<div class="weui-uploader__file-content"></div>'),n.append(i)),i}function i(e){e.url=a.createObjectURL(e),t.onQueued(e),(0,c["default"])(r["default"].extend({$uploader:o,file:e},t))}var o=(0,r["default"])(e),a=window.URL||window.webkitURL||window.mozURL;t=r["default"].extend({url:"",type:"file",fileVal:"file",data:{},onBeforeQueued:r["default"].noop,onQueued:r["default"].noop,onSuccess:r["default"].noop,onProgress:r["default"].noop,onError:r["default"].noop},t),t.compress!==!1&&(t.compress=r["default"].extend({width:1600,height:1600,quality:.8},t.compress)),t.onBeforeQueued&&!function(){var e=t.onBeforeQueued;t.onBeforeQueued=function(t){var n=e.call(t);if(n===!1)return!1;if(n!==!0){var i=(0,r["default"])(r["default"].render(l["default"],{id:t.id}));o.find(".weui-uploader__files").append(i)}}}(),t.onQueued&&!function(){var e=t.onQueued;t.onQueued=function(t){e.call(t)||o.find('[data-id="'+t.id+'"]').css({backgroundImage:'url("'+(t.base64||t.url)+'")'})}}(),t.onSuccess&&!function(){var e=t.onSuccess;t.onSuccess=function(t,n){if(!e.call(t,n)){var i=o.find('[data-id="'+t.id+'"]').removeClass("weui-uploader__file_status");i.find(".weui-uploader__file-content").remove()}}}(),t.onProgress&&!function(){var e=t.onProgress;t.onProgress=function(t,i){e.call(t,i)||n(o,t.id).html(i+"%")}}(),t.onError&&!function(){var e=t.onError;t.onError=function(t,i){e.call(t,i)||n(o,t.id).html('<i class="weui-icon-warn"></i>')}}(),o.find("input").on("change",function(e){var n=e.target.files;0!==n.length&&(t.compress===!1&&"file"==t.type?Array.prototype.forEach.call(n,function(e){e.id=++s,t.onBeforeQueued(e)!==!1&&i(e)}):Array.prototype.forEach.call(n,function(e){e.id=++s,t.onBeforeQueued(e)!==!1&&(0,d.compress)(e,t).then(function(e){e&&i(e)})}),this.value="")})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=i(a),u=n(21),l=i(u),d=n(22),f=n(23),c=i(f),s=0;t["default"]=o,e.exports=t["default"]},function(e,t){e.exports='<li class="weui-uploader__file weui-uploader__file_status" data-id="<%= id %>"> <div class=weui-uploader__file-content>0%</div> </li> '},function(e,t){"use strict";function n(e){var t,n=e.naturalHeight,i=document.createElement("canvas");i.width=1,i.height=n;var o=i.getContext("2d");o.drawImage(e,0,0);try{t=o.getImageData(0,0,1,n).data}catch(a){return 1}for(var r=0,u=n,l=n;l>r;){var d=t[4*(l-1)+3];0===d?u=l:r=l,l=u+r>>1}var f=l/n;return 0===f?1:f}function i(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),o=new Uint8Array(i),a=0;a<t.length;a++)o[a]=t.charCodeAt(a);return new Blob([i],{type:n})}function o(e,t){return new Promise(function(o){var a=new FileReader;a.onload=function(a){if(t.compress===!1)return e.base64=a.target.result,void o(e);var r=new Image;r.onload=function(){var a=n(r),u=document.createElement("canvas"),l=u.getContext("2d"),d=t.compress.width,f=t.compress.height,c=r.width,s=r.height,p=void 0;if(c<s&&s>f?(c=parseInt(f*r.width/r.height),s=f):c>=s&&c>d&&(s=parseInt(d*r.height/r.width),c=d),u.width=c,u.height=s,l.drawImage(r,0,0,c,s/a),p=/image\/jpeg/.test(e.type)||/image\/jpg/.test(e.type)?u.toDataURL("image/jpeg",t.compress.quality):u.toDataURL(e.type),"file"==t.type)if(/;base64,null/.test(p)||/;base64,$/.test(p))o(e);else{var v=i(p);v.id=e.id,v.name=e.name,v.lastModified=e.lastModified,v.lastModifiedDate=e.lastModifiedDate,o(v)}else/;base64,null/.test(p)||/;base64,$/.test(p)?(t.onError(e,new Error("Compress fail, dataURL is "+p+".")),o()):(e.base64=p,o(e))},r.src=a.target.result},a.readAsDataURL(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.detectVerticalSquash=n,t.dataURItoBlob=i,t.compress=o},function(e,t){"use strict";function n(e){var t=e.url,n=e.file,i=e.data,o=e.fileVal,a=e.onProgress,r=e.onError,u=e.onSuccess,l=n.name,d=n.type,f=n.size,c=n.lastModifiedDate,s=new FormData,p=new XMLHttpRequest;n.xhr=p,s.append("name",l),s.append("type",d),s.append("lastModifiedDate",c),"file"==e.type?(s.append("size",f),s.append(o,n,l)):(s.append("size",n.base64.length),s.append(o,n.base64)),Object.keys(i).forEach(function(e){s.append(e,i[e])}),p.onreadystatechange=function(){if(4==p.readyState)if(200==p.status)try{var e=JSON.parse(p.responseText);u(n,e)}catch(t){r(n,t)}else r(n,new Error("XMLHttpRequest response status is not 200"))},p.upload.addEventListener("progress",function(e){if(0!=e.total){var t=100*Math.ceil(e.loaded/e.total);a(n,t)}},!1),p.open("POST",t),p.send(s)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function a(){function e(t,n){r.find(".weui-picker__group").eq(n).scroll({items:t,temp:a[n],onChange:function(t,u){t?o[n]=t.value:o[n]=null,a[n]=u,t.children&&t.children.length>0?(r.find(".weui-picker__group").eq(n+1).show(),e(t.children,n+1)):(o[n+1]=null,o.length=n+1,r.find(".weui-picker__group").eq(n+1).hide(),i.onChange(o))},onConfirm:i.onConfirm})}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1];if(!m){m=!0;var i=l["default"].extend({id:"default",onChange:l["default"].noop,onConfirm:l["default"].noop},n);g[i.id]=g[i.id]||[];for(var o=[],a=g[i.id],r=(0,l["default"])(s["default"]),u=f.depthOf(t[0]),d="";u--;)d+=v["default"];return r.find(".weui-picker__bd").html(d),_(r),e(t,0),r.on("click",".weui-mask",function(){w(r)}).on("click",".weui-picker__action",function(){w(r)}).on("click","#weui-picker-confirm",function(){i.onConfirm(o)}),r.hide=function(){w(r)},r}}function r(e){for(var t=l["default"].extend({id:"datePicker",onChange:l["default"].noop,onConfirm:l["default"].noop,start:2e3,end:2030},e),n=[],i=[31,28,31,30,31,30,31,31,30,31,30,31],o=t.start;o<=t.end;o++){var r=[];o%4==0&&o%100!=0||o%400==0?i[1]=29:i[1]=28;for(var u=0;u<12;u++){for(var d=[],f=1;f<i[u]+1;f++){var c={label:f+"日",value:f};d.push(c)}r.push({label:u+1+"月",value:u,children:d})}var s={label:o+"年",value:o,children:r};n.push(s)}a(n,t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(2),l=o(u);n(25);var d=n(26),f=i(d),c=n(27),s=o(c),p=n(28),v=o(p),h=(0,l["default"])("body"),m=void 0,y=function(e){e&&(e.remove(),m=!1)},_=function(e){h.append(e),l["default"].getStyle(e[0],"transform"),e.find(".weui-mask").addClass("weui-animate-fade-in"),e.find(".weui-picker").addClass("weui-animate-slide-up")},w=function(e){e.find(".weui-mask").addClass("weui-animate-fade-out"),e.find(".weui-picker").addClass("weui-animate-slide-down").on("animationend webkitAnimationEnd",function(){y(e)})},g={};t["default"]={picker:a,datePicker:r},e.exports=t["default"]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var o=n(2),a=i(o),r=function(e,t){return e.css({"-webkit-transition":"all "+t+"s",transition:"all "+t+"s"})},u=function(e,t){return e.css({"-webkit-transform":"translate3d(0, "+t+"px, 0)",transform:"translate3d(0, "+t+"px, 0)"})},l=function(e){for(var t=Math.floor(e.length/2),n=0;e[t]&&e[t].disabled;)if(t=++t%e.length,n++,n>e.length)throw new Error("No selectable item.");return t},d=function(e,t,n){var i=l(n);return(e-i)*t},f=function(e,t){return e*t},c=function(e,t,n){return-(t*(n-e-1))};a["default"].fn.scroll=function(e){var t=this,n=a["default"].extend({items:[],scrollable:".weui-picker__content",offset:3,rowHeight:34,onChange:a["default"].noop,temp:null,bodyHeight:238},e),i=n.items.map(function(e){return'<div class="weui-picker__item'+(e.disabled?" weui-picker__item_disabled":"")+'">'+e.label+"</div>"}).join("");(0,a["default"])(this).find(".weui-picker__content").html(i);var o=(0,a["default"])(this).find(n.scrollable),s=void 0,p=void 0,v=void 0,h=void 0,m=[],y=window.innerHeight;if(null!==n.temp&&n.temp<n.items.length){var _=n.temp;n.onChange.call(this,n.items[_],_),h=(n.offset-_)*n.rowHeight}else{var w=l(n.items);n.onChange.call(this,n.items[w],w),h=d(n.offset,n.rowHeight,n.items)}u(o,h);var g=function(e){h+=e,h=Math.round(h/n.rowHeight)*n.rowHeight;var i=f(n.offset,n.rowHeight),a=c(n.offset,n.rowHeight,n.items.length);h>i&&(h=i),h<a&&(h=a);for(var l=n.offset-h/n.rowHeight;n.items[l]&&n.items[l].disabled;)e>0?++l:--l;h=(n.offset-l)*n.rowHeight,r(o,.3),u(o,h),n.onChange.call(t,n.items[l],l)};o=(0,a["default"])(this).offAll().on("touchstart",function(e){s=e.changedTouches[0].pageY,v=+new Date}).on("touchmove",function(e){p=e.changedTouches[0].pageY;var t=p-s;r(o,0),u(o,h+t),v=+new Date,m.push({time:v,y:p}),m.length>40&&m.shift(),e.preventDefault()}).on("touchend",function(e){var t=(new Date).getTime();p=e.changedTouches[0].pageY;var i=y-n.bodyHeight/2;if(t-v>100)g(Math.abs(p-s)>10?p-s:i-p);else if(Math.abs(p-s)>10){for(var o=m.length-1,a=o,r=o;r>0&&v-m[r].time<100;r--)a=r;if(a!==o){var u=m[o],l=m[a],d=u.time-l.time,f=u.y-l.y,c=f/d,h=150*c+(p-s);g(h)}else g(0)}else g(i-p)}).find(n.scrollable)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.depthOf=function n(e){var t=1;return e.children&&e.children[0]&&(t=n(e.children[0])+1),t}},function(e,t){e.exports="<div> <div class=weui-mask></div> <div class=weui-picker> <div class=weui-picker__hd> <a href=javascript:; data-action=cancel class=weui-picker__action>取消</a> <a href=javascript:; data-action=select class=weui-picker__action id=weui-picker-confirm>确定</a> </div> <div class=weui-picker__bd> </div> </div> </div>"},function(e,t){e.exports="<div class=weui-picker__group> <div class=weui-picker__mask></div> <div class=weui-picker__indicator></div> <div class=weui-picker__content></div> </div>"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e){function t(){i.addClass("weui-animate-fade-out").on("animationend webkitAnimationEnd",function(){i.remove(),f=!1})}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!f){f=!0;var i=(0,r["default"])(r["default"].render(l["default"],{url:e}));return n=r["default"].extend({onDelete:r["default"].noop},n),d.append(i),i.find(".weui-gallery__img").on("click",t),i.find(".weui-gallery__del").on("click",function(){n.onDelete.call(this,e)}),i.show().addClass("weui-animate-fade-in"),i.hide=t,i}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=i(a),u=n(30),l=i(u),d=(0,r["default"])("body"),f=void 0;t["default"]=o,e.exports=t["default"]},function(e,t){e.exports='<div class=weui-gallery> <span class=weui-gallery__img style=background-image:url(<%=url%>)></span> <div class=weui-gallery__opr> <a href=javascript: class=weui-gallery__del> <i class="weui-icon-delete weui-icon_gallery-delete"></i> </a> </div> </div> '}])});


    
var b64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
var b64pad="=";

function hex2b64(h) {
  var i;
  var c;
  var ret = "";
  for(i = 0; i+3 <= h.length; i+=3) {
    c = parseInt(h.substring(i,i+3),16);
    ret += b64map.charAt(c >> 6) + b64map.charAt(c & 63);
  }
  if(i+1 == h.length) {
    c = parseInt(h.substring(i,i+1),16);
    ret += b64map.charAt(c << 2);
  }
  else if(i+2 == h.length) {
    c = parseInt(h.substring(i,i+2),16);
    ret += b64map.charAt(c >> 2) + b64map.charAt((c & 3) << 4);
  }
  while((ret.length & 3) > 0) ret += b64pad;
  return ret;
}

// convert a base64 string to hex
function b64tohex(s) {
  var ret = ""
  var i;
  var k = 0; // b64 state, 0-3
  var slop;
  for(i = 0; i < s.length; ++i) {
    if(s.charAt(i) == b64pad) break;
    v = b64map.indexOf(s.charAt(i));
    if(v < 0) continue;
    if(k == 0) {
      ret += int2char(v >> 2);
      slop = v & 3;
      k = 1;
    }
    else if(k == 1) {
      ret += int2char((slop << 2) | (v >> 4));
      slop = v & 0xf;
      k = 2;
    }
    else if(k == 2) {
      ret += int2char(slop);
      ret += int2char(v >> 2);
      slop = v & 3;
      k = 3;
    }
    else {
      ret += int2char((slop << 2) | (v >> 4));
      ret += int2char(v & 0xf);
      k = 0;
    }
  }
  if(k == 1)
    ret += int2char(slop << 2);
  return ret;
}

// convert a base64 string to a byte/number array
function b64toBA(s) {
  //piggyback on b64tohex for now, optimize later
  var h = b64tohex(s);
  var i;
  var a = new Array();
  for(i = 0; 2*i < h.length; ++i) {
    a[i] = parseInt(h.substring(2*i,2*i+2),16);
  }
  return a;
}


    
// Copyright (c) 2005  Tom Wu
// All Rights Reserved.
// See "LICENSE" for details.

// Basic JavaScript BN library - subset useful for RSA encryption.

// Bits per digit
var dbits;

// JavaScript engine analysis
var canary = 0xdeadbeefcafe;
var j_lm = ((canary&0xffffff)==0xefcafe);

// (public) Constructor
function BigInteger(a,b,c) {
  if(a != null)
    if("number" == typeof a) this.fromNumber(a,b,c);
    else if(b == null && "string" != typeof a) this.fromString(a,256);
    else this.fromString(a,b);
}

// return new, unset BigInteger
function nbi() { return new BigInteger(null); }

// am: Compute w_j += (x*this_i), propagate carries,
// c is initial carry, returns final carry.
// c < 3*dvalue, x < 2*dvalue, this_i < dvalue
// We need to select the fastest one that works in this environment.

// am1: use a single mult and divide to get the high bits,
// max digit bits should be 26 because
// max internal value = 2*dvalue^2-2*dvalue (< 2^53)
function am1(i,x,w,j,c,n) {
  while(--n >= 0) {
    var v = x*this[i++]+w[j]+c;
    c = Math.floor(v/0x4000000);
    w[j++] = v&0x3ffffff;
  }
  return c;
}
// am2 avoids a big mult-and-extract completely.
// Max digit bits should be <= 30 because we do bitwise ops
// on values up to 2*hdvalue^2-hdvalue-1 (< 2^31)
function am2(i,x,w,j,c,n) {
  var xl = x&0x7fff, xh = x>>15;
  while(--n >= 0) {
    var l = this[i]&0x7fff;
    var h = this[i++]>>15;
    var m = xh*l+h*xl;
    l = xl*l+((m&0x7fff)<<15)+w[j]+(c&0x3fffffff);
    c = (l>>>30)+(m>>>15)+xh*h+(c>>>30);
    w[j++] = l&0x3fffffff;
  }
  return c;
}
// Alternately, set max digit bits to 28 since some
// browsers slow down when dealing with 32-bit numbers.
function am3(i,x,w,j,c,n) {
  var xl = x&0x3fff, xh = x>>14;
  while(--n >= 0) {
    var l = this[i]&0x3fff;
    var h = this[i++]>>14;
    var m = xh*l+h*xl;
    l = xl*l+((m&0x3fff)<<14)+w[j]+c;
    c = (l>>28)+(m>>14)+xh*h;
    w[j++] = l&0xfffffff;
  }
  return c;
}
if(j_lm && (navigator.appName == "Microsoft Internet Explorer")) {
  BigInteger.prototype.am = am2;
  dbits = 30;
}
else if(j_lm && (navigator.appName != "Netscape")) {
  BigInteger.prototype.am = am1;
  dbits = 26;
}
else { // Mozilla/Netscape seems to prefer am3
  BigInteger.prototype.am = am3;
  dbits = 28;
}

BigInteger.prototype.DB = dbits;
BigInteger.prototype.DM = ((1<<dbits)-1);
BigInteger.prototype.DV = (1<<dbits);

var BI_FP = 52;
BigInteger.prototype.FV = Math.pow(2,BI_FP);
BigInteger.prototype.F1 = BI_FP-dbits;
BigInteger.prototype.F2 = 2*dbits-BI_FP;

// Digit conversions
var BI_RM = "0123456789abcdefghijklmnopqrstuvwxyz";
var BI_RC = new Array();
var rr,vv;
rr = "0".charCodeAt(0);
for(vv = 0; vv <= 9; ++vv) BI_RC[rr++] = vv;
rr = "a".charCodeAt(0);
for(vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;
rr = "A".charCodeAt(0);
for(vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;

function int2char(n) { return BI_RM.charAt(n); }
function intAt(s,i) {
  var c = BI_RC[s.charCodeAt(i)];
  return (c==null)?-1:c;
}

// (protected) copy this to r
function bnpCopyTo(r) {
  for(var i = this.t-1; i >= 0; --i) r[i] = this[i];
  r.t = this.t;
  r.s = this.s;
}

// (protected) set from integer value x, -DV <= x < DV
function bnpFromInt(x) {
  this.t = 1;
  this.s = (x<0)?-1:0;
  if(x > 0) this[0] = x;
  else if(x < -1) this[0] = x+DV;
  else this.t = 0;
}

// return bigint initialized to value
function nbv(i) { var r = nbi(); r.fromInt(i); return r; }

// (protected) set from string and radix
function bnpFromString(s,b) {
  var k;
  if(b == 16) k = 4;
  else if(b == 8) k = 3;
  else if(b == 256) k = 8; // byte array
  else if(b == 2) k = 1;
  else if(b == 32) k = 5;
  else if(b == 4) k = 2;
  else { this.fromRadix(s,b); return; }
  this.t = 0;
  this.s = 0;
  var i = s.length, mi = false, sh = 0;
  while(--i >= 0) {
    var x = (k==8)?s[i]&0xff:intAt(s,i);
    if(x < 0) {
      if(s.charAt(i) == "-") mi = true;
      continue;
    }
    mi = false;
    if(sh == 0)
      this[this.t++] = x;
    else if(sh+k > this.DB) {
      this[this.t-1] |= (x&((1<<(this.DB-sh))-1))<<sh;
      this[this.t++] = (x>>(this.DB-sh));
    }
    else
      this[this.t-1] |= x<<sh;
    sh += k;
    if(sh >= this.DB) sh -= this.DB;
  }
  if(k == 8 && (s[0]&0x80) != 0) {
    this.s = -1;
    if(sh > 0) this[this.t-1] |= ((1<<(this.DB-sh))-1)<<sh;
  }
  this.clamp();
  if(mi) BigInteger.ZERO.subTo(this,this);
}

// (protected) clamp off excess high words
function bnpClamp() {
  var c = this.s&this.DM;
  while(this.t > 0 && this[this.t-1] == c) --this.t;
}

// (public) return string representation in given radix
function bnToString(b) {
  if(this.s < 0) return "-"+this.negate().toString(b);
  var k;
  if(b == 16) k = 4;
  else if(b == 8) k = 3;
  else if(b == 2) k = 1;
  else if(b == 32) k = 5;
  else if(b == 4) k = 2;
  else return this.toRadix(b);
  var km = (1<<k)-1, d, m = false, r = "", i = this.t;
  var p = this.DB-(i*this.DB)%k;
  if(i-- > 0) {
    if(p < this.DB && (d = this[i]>>p) > 0) { m = true; r = int2char(d); }
    while(i >= 0) {
      if(p < k) {
        d = (this[i]&((1<<p)-1))<<(k-p);
        d |= this[--i]>>(p+=this.DB-k);
      }
      else {
        d = (this[i]>>(p-=k))&km;
        if(p <= 0) { p += this.DB; --i; }
      }
      if(d > 0) m = true;
      if(m) r += int2char(d);
    }
  }
  return m?r:"0";
}

// (public) -this
function bnNegate() { var r = nbi(); BigInteger.ZERO.subTo(this,r); return r; }

// (public) |this|
function bnAbs() { return (this.s<0)?this.negate():this; }

// (public) return + if this > a, - if this < a, 0 if equal
function bnCompareTo(a) {
  var r = this.s-a.s;
  if(r != 0) return r;
  var i = this.t;
  r = i-a.t;
  if(r != 0) return (this.s<0)?-r:r;
  while(--i >= 0) if((r=this[i]-a[i]) != 0) return r;
  return 0;
}

// returns bit length of the integer x
function nbits(x) {
  var r = 1, t;
  if((t=x>>>16) != 0) { x = t; r += 16; }
  if((t=x>>8) != 0) { x = t; r += 8; }
  if((t=x>>4) != 0) { x = t; r += 4; }
  if((t=x>>2) != 0) { x = t; r += 2; }
  if((t=x>>1) != 0) { x = t; r += 1; }
  return r;
}

// (public) return the number of bits in "this"
function bnBitLength() {
  if(this.t <= 0) return 0;
  return this.DB*(this.t-1)+nbits(this[this.t-1]^(this.s&this.DM));
}

// (protected) r = this << n*DB
function bnpDLShiftTo(n,r) {
  var i;
  for(i = this.t-1; i >= 0; --i) r[i+n] = this[i];
  for(i = n-1; i >= 0; --i) r[i] = 0;
  r.t = this.t+n;
  r.s = this.s;
}

// (protected) r = this >> n*DB
function bnpDRShiftTo(n,r) {
  for(var i = n; i < this.t; ++i) r[i-n] = this[i];
  r.t = Math.max(this.t-n,0);
  r.s = this.s;
}

// (protected) r = this << n
function bnpLShiftTo(n,r) {
  var bs = n%this.DB;
  var cbs = this.DB-bs;
  var bm = (1<<cbs)-1;
  var ds = Math.floor(n/this.DB), c = (this.s<<bs)&this.DM, i;
  for(i = this.t-1; i >= 0; --i) {
    r[i+ds+1] = (this[i]>>cbs)|c;
    c = (this[i]&bm)<<bs;
  }
  for(i = ds-1; i >= 0; --i) r[i] = 0;
  r[ds] = c;
  r.t = this.t+ds+1;
  r.s = this.s;
  r.clamp();
}

// (protected) r = this >> n
function bnpRShiftTo(n,r) {
  r.s = this.s;
  var ds = Math.floor(n/this.DB);
  if(ds >= this.t) { r.t = 0; return; }
  var bs = n%this.DB;
  var cbs = this.DB-bs;
  var bm = (1<<bs)-1;
  r[0] = this[ds]>>bs;
  for(var i = ds+1; i < this.t; ++i) {
    r[i-ds-1] |= (this[i]&bm)<<cbs;
    r[i-ds] = this[i]>>bs;
  }
  if(bs > 0) r[this.t-ds-1] |= (this.s&bm)<<cbs;
  r.t = this.t-ds;
  r.clamp();
}

// (protected) r = this - a
function bnpSubTo(a,r) {
  var i = 0, c = 0, m = Math.min(a.t,this.t);
  while(i < m) {
    c += this[i]-a[i];
    r[i++] = c&this.DM;
    c >>= this.DB;
  }
  if(a.t < this.t) {
    c -= a.s;
    while(i < this.t) {
      c += this[i];
      r[i++] = c&this.DM;
      c >>= this.DB;
    }
    c += this.s;
  }
  else {
    c += this.s;
    while(i < a.t) {
      c -= a[i];
      r[i++] = c&this.DM;
      c >>= this.DB;
    }
    c -= a.s;
  }
  r.s = (c<0)?-1:0;
  if(c < -1) r[i++] = this.DV+c;
  else if(c > 0) r[i++] = c;
  r.t = i;
  r.clamp();
}

// (protected) r = this * a, r != this,a (HAC 14.12)
// "this" should be the larger one if appropriate.
function bnpMultiplyTo(a,r) {
  var x = this.abs(), y = a.abs();
  var i = x.t;
  r.t = i+y.t;
  while(--i >= 0) r[i] = 0;
  for(i = 0; i < y.t; ++i) r[i+x.t] = x.am(0,y[i],r,i,0,x.t);
  r.s = 0;
  r.clamp();
  if(this.s != a.s) BigInteger.ZERO.subTo(r,r);
}

// (protected) r = this^2, r != this (HAC 14.16)
function bnpSquareTo(r) {
  var x = this.abs();
  var i = r.t = 2*x.t;
  while(--i >= 0) r[i] = 0;
  for(i = 0; i < x.t-1; ++i) {
    var c = x.am(i,x[i],r,2*i,0,1);
    if((r[i+x.t]+=x.am(i+1,2*x[i],r,2*i+1,c,x.t-i-1)) >= x.DV) {
      r[i+x.t] -= x.DV;
      r[i+x.t+1] = 1;
    }
  }
  if(r.t > 0) r[r.t-1] += x.am(i,x[i],r,2*i,0,1);
  r.s = 0;
  r.clamp();
}

// (protected) divide this by m, quotient and remainder to q, r (HAC 14.20)
// r != q, this != m.  q or r may be null.
function bnpDivRemTo(m,q,r) {
  var pm = m.abs();
  if(pm.t <= 0) return;
  var pt = this.abs();
  if(pt.t < pm.t) {
    if(q != null) q.fromInt(0);
    if(r != null) this.copyTo(r);
    return;
  }
  if(r == null) r = nbi();
  var y = nbi(), ts = this.s, ms = m.s;
  var nsh = this.DB-nbits(pm[pm.t-1]);	// normalize modulus
  if(nsh > 0) { pm.lShiftTo(nsh,y); pt.lShiftTo(nsh,r); }
  else { pm.copyTo(y); pt.copyTo(r); }
  var ys = y.t;
  var y0 = y[ys-1];
  if(y0 == 0) return;
  var yt = y0*(1<<this.F1)+((ys>1)?y[ys-2]>>this.F2:0);
  var d1 = this.FV/yt, d2 = (1<<this.F1)/yt, e = 1<<this.F2;
  var i = r.t, j = i-ys, t = (q==null)?nbi():q;
  y.dlShiftTo(j,t);
  if(r.compareTo(t) >= 0) {
    r[r.t++] = 1;
    r.subTo(t,r);
  }
  BigInteger.ONE.dlShiftTo(ys,t);
  t.subTo(y,y);	// "negative" y so we can replace sub with am later
  while(y.t < ys) y[y.t++] = 0;
  while(--j >= 0) {
    // Estimate quotient digit
    var qd = (r[--i]==y0)?this.DM:Math.floor(r[i]*d1+(r[i-1]+e)*d2);
    if((r[i]+=y.am(0,qd,r,j,0,ys)) < qd) {	// Try it out
      y.dlShiftTo(j,t);
      r.subTo(t,r);
      while(r[i] < --qd) r.subTo(t,r);
    }
  }
  if(q != null) {
    r.drShiftTo(ys,q);
    if(ts != ms) BigInteger.ZERO.subTo(q,q);
  }
  r.t = ys;
  r.clamp();
  if(nsh > 0) r.rShiftTo(nsh,r);	// Denormalize remainder
  if(ts < 0) BigInteger.ZERO.subTo(r,r);
}

// (public) this mod a
function bnMod(a) {
  var r = nbi();
  this.abs().divRemTo(a,null,r);
  if(this.s < 0 && r.compareTo(BigInteger.ZERO) > 0) a.subTo(r,r);
  return r;
}

// Modular reduction using "classic" algorithm
function Classic(m) { this.m = m; }
function cConvert(x) {
  if(x.s < 0 || x.compareTo(this.m) >= 0) return x.mod(this.m);
  else return x;
}
function cRevert(x) { return x; }
function cReduce(x) { x.divRemTo(this.m,null,x); }
function cMulTo(x,y,r) { x.multiplyTo(y,r); this.reduce(r); }
function cSqrTo(x,r) { x.squareTo(r); this.reduce(r); }

Classic.prototype.convert = cConvert;
Classic.prototype.revert = cRevert;
Classic.prototype.reduce = cReduce;
Classic.prototype.mulTo = cMulTo;
Classic.prototype.sqrTo = cSqrTo;

// (protected) return "-1/this % 2^DB"; useful for Mont. reduction
// justification:
//         xy == 1 (mod m)
//         xy =  1+km
//   xy(2-xy) = (1+km)(1-km)
// x[y(2-xy)] = 1-k^2m^2
// x[y(2-xy)] == 1 (mod m^2)
// if y is 1/x mod m, then y(2-xy) is 1/x mod m^2
// should reduce x and y(2-xy) by m^2 at each step to keep size bounded.
// JS multiply "overflows" differently from C/C++, so care is needed here.
function bnpInvDigit() {
  if(this.t < 1) return 0;
  var x = this[0];
  if((x&1) == 0) return 0;
  var y = x&3;		// y == 1/x mod 2^2
  y = (y*(2-(x&0xf)*y))&0xf;	// y == 1/x mod 2^4
  y = (y*(2-(x&0xff)*y))&0xff;	// y == 1/x mod 2^8
  y = (y*(2-(((x&0xffff)*y)&0xffff)))&0xffff;	// y == 1/x mod 2^16
  // last step - calculate inverse mod DV directly;
  // assumes 16 < DB <= 32 and assumes ability to handle 48-bit ints
  y = (y*(2-x*y%this.DV))%this.DV;		// y == 1/x mod 2^dbits
  // we really want the negative inverse, and -DV < y < DV
  return (y>0)?this.DV-y:-y;
}

// Montgomery reduction
function Montgomery(m) {
  this.m = m;
  this.mp = m.invDigit();
  this.mpl = this.mp&0x7fff;
  this.mph = this.mp>>15;
  this.um = (1<<(m.DB-15))-1;
  this.mt2 = 2*m.t;
}

// xR mod m
function montConvert(x) {
  var r = nbi();
  x.abs().dlShiftTo(this.m.t,r);
  r.divRemTo(this.m,null,r);
  if(x.s < 0 && r.compareTo(BigInteger.ZERO) > 0) this.m.subTo(r,r);
  return r;
}

// x/R mod m
function montRevert(x) {
  var r = nbi();
  x.copyTo(r);
  this.reduce(r);
  return r;
}

// x = x/R mod m (HAC 14.32)
function montReduce(x) {
  while(x.t <= this.mt2)	// pad x so am has enough room later
    x[x.t++] = 0;
  for(var i = 0; i < this.m.t; ++i) {
    // faster way of calculating u0 = x[i]*mp mod DV
    var j = x[i]&0x7fff;
    var u0 = (j*this.mpl+(((j*this.mph+(x[i]>>15)*this.mpl)&this.um)<<15))&x.DM;
    // use am to combine the multiply-shift-add into one call
    j = i+this.m.t;
    x[j] += this.m.am(0,u0,x,i,0,this.m.t);
    // propagate carry
    while(x[j] >= x.DV) { x[j] -= x.DV; x[++j]++; }
  }
  x.clamp();
  x.drShiftTo(this.m.t,x);
  if(x.compareTo(this.m) >= 0) x.subTo(this.m,x);
}

// r = "x^2/R mod m"; x != r
function montSqrTo(x,r) { x.squareTo(r); this.reduce(r); }

// r = "xy/R mod m"; x,y != r
function montMulTo(x,y,r) { x.multiplyTo(y,r); this.reduce(r); }

Montgomery.prototype.convert = montConvert;
Montgomery.prototype.revert = montRevert;
Montgomery.prototype.reduce = montReduce;
Montgomery.prototype.mulTo = montMulTo;
Montgomery.prototype.sqrTo = montSqrTo;

// (protected) true iff this is even
function bnpIsEven() { return ((this.t>0)?(this[0]&1):this.s) == 0; }

// (protected) this^e, e < 2^32, doing sqr and mul with "r" (HAC 14.79)
function bnpExp(e,z) {
  if(e > 0xffffffff || e < 1) return BigInteger.ONE;
  var r = nbi(), r2 = nbi(), g = z.convert(this), i = nbits(e)-1;
  g.copyTo(r);
  while(--i >= 0) {
    z.sqrTo(r,r2);
    if((e&(1<<i)) > 0) z.mulTo(r2,g,r);
    else { var t = r; r = r2; r2 = t; }
  }
  return z.revert(r);
}

// (public) this^e % m, 0 <= e < 2^32
function bnModPowInt(e,m) {
  var z;
  if(e < 256 || m.isEven()) z = new Classic(m); else z = new Montgomery(m);
  return this.exp(e,z);
}

// protected
BigInteger.prototype.copyTo = bnpCopyTo;
BigInteger.prototype.fromInt = bnpFromInt;
BigInteger.prototype.fromString = bnpFromString;
BigInteger.prototype.clamp = bnpClamp;
BigInteger.prototype.dlShiftTo = bnpDLShiftTo;
BigInteger.prototype.drShiftTo = bnpDRShiftTo;
BigInteger.prototype.lShiftTo = bnpLShiftTo;
BigInteger.prototype.rShiftTo = bnpRShiftTo;
BigInteger.prototype.subTo = bnpSubTo;
BigInteger.prototype.multiplyTo = bnpMultiplyTo;
BigInteger.prototype.squareTo = bnpSquareTo;
BigInteger.prototype.divRemTo = bnpDivRemTo;
BigInteger.prototype.invDigit = bnpInvDigit;
BigInteger.prototype.isEven = bnpIsEven;
BigInteger.prototype.exp = bnpExp;

// public
BigInteger.prototype.toString = bnToString;
BigInteger.prototype.negate = bnNegate;
BigInteger.prototype.abs = bnAbs;
BigInteger.prototype.compareTo = bnCompareTo;
BigInteger.prototype.bitLength = bnBitLength;
BigInteger.prototype.mod = bnMod;
BigInteger.prototype.modPowInt = bnModPowInt;

// "constants"
BigInteger.ZERO = nbv(0);
BigInteger.ONE = nbv(1);


    
// prng4.js - uses Arcfour as a PRNG

function Arcfour() {
  this.i = 0;
  this.j = 0;
  this.S = new Array();
}

// Initialize arcfour context from key, an array of ints, each from [0..255]
function ARC4init(key) {
  var i, j, t;
  for(i = 0; i < 256; ++i)
    this.S[i] = i;
  j = 0;
  for(i = 0; i < 256; ++i) {
    j = (j + this.S[i] + key[i % key.length]) & 255;
    t = this.S[i];
    this.S[i] = this.S[j];
    this.S[j] = t;
  }
  this.i = 0;
  this.j = 0;
}

function ARC4next() {
  var t;
  this.i = (this.i + 1) & 255;
  this.j = (this.j + this.S[this.i]) & 255;
  t = this.S[this.i];
  this.S[this.i] = this.S[this.j];
  this.S[this.j] = t;
  return this.S[(t + this.S[this.i]) & 255];
}

Arcfour.prototype.init = ARC4init;
Arcfour.prototype.next = ARC4next;

// Plug in your RNG constructor here
function prng_newstate() {
  return new Arcfour();
}

// Pool size must be a multiple of 4 and greater than 32.
// An array of bytes the size of the pool will be passed to init()
var rng_psize = 256;


    
// Random number generator - requires a PRNG backend, e.g. prng4.js

// For best results, put code like
// <body onClick='rng_seed_time();' onKeyPress='rng_seed_time();'>
// in your main HTML document.

var rng_state;
var rng_pool;
var rng_pptr;

// Mix in a 32-bit integer into the pool
function rng_seed_int(x) {
  rng_pool[rng_pptr++] ^= x & 255;
  rng_pool[rng_pptr++] ^= (x >> 8) & 255;
  rng_pool[rng_pptr++] ^= (x >> 16) & 255;
  rng_pool[rng_pptr++] ^= (x >> 24) & 255;
  if(rng_pptr >= rng_psize) rng_pptr -= rng_psize;
}

// Mix in the current time (w/milliseconds) into the pool
function rng_seed_time() {
  rng_seed_int(new Date().getTime());
}

// Initialize the pool with junk if needed.
if(rng_pool == null) {
  rng_pool = new Array();
  rng_pptr = 0;
  var t;
  if(navigator.appName == "Netscape" && navigator.appVersion < "5" && window.crypto) {
    // Extract entropy (256 bits) from NS4 RNG if available
    var z = window.crypto.random(32);
    for(t = 0; t < z.length; ++t)
      rng_pool[rng_pptr++] = z.charCodeAt(t) & 255;
  }  
  while(rng_pptr < rng_psize) {  // extract some randomness from Math.random()
    t = Math.floor(65536 * Math.random());
    rng_pool[rng_pptr++] = t >>> 8;
    rng_pool[rng_pptr++] = t & 255;
  }
  rng_pptr = 0;
  rng_seed_time();
  //rng_seed_int(window.screenX);
  //rng_seed_int(window.screenY);
}

function rng_get_byte() {
  if(rng_state == null) {
    rng_seed_time();
    rng_state = prng_newstate();
    rng_state.init(rng_pool);
    for(rng_pptr = 0; rng_pptr < rng_pool.length; ++rng_pptr)
      rng_pool[rng_pptr] = 0;
    rng_pptr = 0;
    //rng_pool = null;
  }
  // TODO: allow reseeding after first request
  return rng_state.next();
}

function rng_get_bytes(ba) {
  var i;
  for(i = 0; i < ba.length; ++i) ba[i] = rng_get_byte();
}

function SecureRandom() {}

SecureRandom.prototype.nextBytes = rng_get_bytes;


    
// Depends on jsbn.js and rng.js

// Version 1.1: support utf-8 encoding in pkcs1pad2

// convert a (hex) string to a bignum object
function parseBigInt(str,r) {
  return new BigInteger(str,r);
}

function linebrk(s,n) {
  var ret = "";
  var i = 0;
  while(i + n < s.length) {
    ret += s.substring(i,i+n) + "\n";
    i += n;
  }
  return ret + s.substring(i,s.length);
}

function byte2Hex(b) {
  if(b < 0x10)
    return "0" + b.toString(16);
  else
    return b.toString(16);
}

// PKCS#1 (type 2, random) pad input string s to n bytes, and return a bigint
function pkcs1pad2(s,n) {
  if(n < s.length + 11) { // TODO: fix for utf-8
    alert("Message too long for RSA");
    return null;
  }
  var ba = new Array();
  var i = s.length - 1;
  while(i >= 0 && n > 0) {
    var c = s.charCodeAt(i--);
    if(c < 128) { // encode using utf-8
      ba[--n] = c;
    }
    else if((c > 127) && (c < 2048)) {
      ba[--n] = (c & 63) | 128;
      ba[--n] = (c >> 6) | 192;
    }
    else {
      ba[--n] = (c & 63) | 128;
      ba[--n] = ((c >> 6) & 63) | 128;
      ba[--n] = (c >> 12) | 224;
    }
  }
  ba[--n] = 0;
  var rng = new SecureRandom();
  var x = new Array();
  while(n > 2) { // random non-zero pad
    x[0] = 0;
    while(x[0] == 0) rng.nextBytes(x);
    ba[--n] = x[0];
  }
  ba[--n] = 2;
  ba[--n] = 0;
  return new BigInteger(ba);
}

// "empty" RSA key constructor
function RSAKey() {
  this.n = null;
  this.e = 0;
  this.d = null;
  this.p = null;
  this.q = null;
  this.dmp1 = null;
  this.dmq1 = null;
  this.coeff = null;
}

// Set the public key fields N and e from hex strings
function RSASetPublic(N,E) {
  if(N != null && E != null && N.length > 0 && E.length > 0) {
    this.n = parseBigInt(N,16);
    this.e = parseInt(E,16);
  }
  else
    alert("Invalid RSA public key");
}

// Perform raw public operation on "x": return x^e (mod n)
function RSADoPublic(x) {
  return x.modPowInt(this.e, this.n);
}

// Return the PKCS#1 RSA encryption of "text" as an even-length hex string
function RSAEncrypt(text) {
  var m = pkcs1pad2(text,(this.n.bitLength()+7)>>3);
  if(m == null) return null;
  var c = this.doPublic(m);
  if(c == null) return null;
  var h = c.toString(16);
  if((h.length & 1) == 0) return h; else return "0" + h;
}

// Return the PKCS#1 RSA encryption of "text" as a Base64-encoded string
//function RSAEncryptB64(text) {
//  var h = this.encrypt(text);
//  if(h) return hex2b64(h); else return null;
//}

// protected
RSAKey.prototype.doPublic = RSADoPublic;

// public
RSAKey.prototype.setPublic = RSASetPublic;
RSAKey.prototype.encrypt = RSAEncrypt;
//RSAKey.prototype.encrypt_b64 = RSAEncryptB64;



    
/**
 * fly
 * Created by Administrator on 2016/12/2 0002.
 */
// $(function() {
//     var offset = $("#fly_cart_end").offset();
//     $(".fly_cart_start").click(function(event){
//         var flycart = $(this);
//         var img = flycart.parent().find('#fly_img img').attr('src');
//         var flyer = $('<img class="u-flyer" src="'+img+'">');
//         flyer.fly({
//             start: {
//                 left: event.pageX, //开始位置（必填）#fly元素会被设置成position: fixed
//                 top: event.pageY //开始位置（必填）
//             },
//             end: {
//                 left: offset.left+10, //结束位置（必填）
//                 top: offset.top+10, //结束位置（必填）
//                 width: 0, //结束时宽度
//                 height: 0 //结束时高度
//             },
//             onEnd: function(){ //结束回调
//                 // $("#msg").show().animate({width: '250px'}, 200).fadeOut(1000); //提示信息
//                 // flycart.css("cursor","default").removeClass('orange').unbind('click');
//                 this.destory(); //移除dom
//             }
//         });
//     });
//
// });

    
/**
 * Created by Administrator on 2016/12/26 0026.
 */
/**
 * JavaScript脚本实现回到页面顶部示例
 * @param acceleration 速度
 * @param stime 时间间隔 (毫秒)
 **/
function goToTop(acceleration,stime) {
    acceleration = acceleration || 0.1;
    stime = stime || 10;
    var x1 = 0;
    var y1 = 0;
    var x2 = 0;
    var y2 = 0;
    var x3 = 0;
    var y3 = 0;
    if (document.documentElement) {
        x1 = document.documentElement.scrollLeft || 0;
        y1 = document.documentElement.scrollTop || 0;
    }
    if (document.body) {
        x2 = document.body.scrollLeft || 0;
        y2 = document.body.scrollTop || 0;
    }
    var x3 = window.scrollX || 0;
    var y3 = window.scrollY || 0;

    // 滚动条到页面顶部的水平距离
    var x = Math.max(x1, Math.max(x2, x3));
    // 滚动条到页面顶部的垂直距离
    var y = Math.max(y1, Math.max(y2, y3));

    // 滚动距离 = 目前距离 / 速度, 因为距离原来越小, 速度是大于 1 的数, 所以滚动距离会越来越小
    var speeding = 1 + acceleration;
    window.scrollTo(Math.floor(x / speeding), Math.floor(y / speeding));

    // 如果距离不为零, 继续调用函数
    if(x > 0 || y > 0) {
        var run = "gotoTop(" + acceleration + ", " + stime + ")";
        window.setTimeout(run, stime);
    }
}


//聚德汇Js

/**
 * Created by Administrator on 2017/1/18.
 */
/**
 * NewProductsilder  begin
 */
;(function () {
    "use strict";
    var iNum;
    var rNum;
    var tNum;
    var SilderNewProduct = function (el, jsons,remNum) {
        this.data = jsons;
        this.el = el;
        //iNum = identNum;
        rNum = remNum;
        //tNum = thNum;
    };
    SilderNewProduct.prototype = {
        show: function () {
            var list = [];
            var str = '';
            for (var i = 0; i < this.data.length; i++) {

                    str = '<div class="product_main weui-cell">';
                for(var j=0;j<rNum;j++){
                    str += '<div class="product_item1"><a href="../product-channel/channel.html?id=' + this.data[i].id + '" data-id="' + this.data[i].id + '"> ';
                    str += '<img src="' + this.data[i].image + '">' +
                        '<span class="pro_price f10">' + this.data[i].name + '</span>'+
                        '<p class="lg_buy f12">'+'立即购买'+'</p>';
                    ;
                    str += '</a></div>';
                }
                        str += '</div>';
                        list.push({content: str});
                        //str = "";

                }
            //
            //if (str != "") {
            //    str += '</div><div class="kong"></div>';
            //    list.push({content: str});
            //}

            var S = new iSlider({
                data: list,
                dom: this.el,
                // isOverspread: true,
                //isVertical: true,
                isVertical: false,
                isLooping: true,
                isAutoplay: false,
                fixPage: false,
                animateTime: 2000,
                animateType: 'default',
             });
            S.pause();
        }
    };
    $.fn.silderProductPic= function (jsons,remNum) {
        var sg = new SilderNewProduct(document.getElementById(this.attr("id")), jsons,remNum);
        return sg.show();
    }

})();

/**
 * NewProductsilder  end
 */











    
/**
 * Created by jf on 2015/9/11.
 * Modified by bear on 2016/9/7.
 */

/**
 * 广告位
 */

var ad = function (fn) {
    this.fn = fn;
};
ad.prototype = {
    /**
     * 获取同城广告
     * @param position 广告位Id
     */
    do: function (position) {
        ajax.get({
            url: base + "weixin/ad.jhtml?position=" + position,
            success: this.fn
        });

    },
    /**
     * 获取商家广告
     * @param position 广告位id
     * @param tenantId 商家Id
     */
    doT: function (position, tenantId) {
        ajax.get({
            url: base + "weixin/ad/" + tenantId + ".jhtml?position=" + position,
            success: this.fn
        });

    },
    /**
     * 获取频道广告位
     * id 广告位Id(顶部banner 143,中间部位 144)
     * productChannelId 频道id
     * areaId 区域Id
     * count 数量
     */
    channel: function (data) {
        ajax.get({
            url: base + 'weixin/ad/channel.jhtml',
            data: data,
            success: this.fn
        });

    }
};





/**
 * 区域
 * Created by WangChao on 11/15 0015.
 */
var area=function (fn) {
    this.fn=fn
};
area.prototype={
    /**
     * 全城
     * @param data
     */
    community: function (data) {
        ajax.get({
            url: base + "weixin/area/community.jhtml",
            data: data,
            success: this.fn
        });
    }
};



/**
 * commmon
 * Created by WangChao on 2016/11/24.
 */
var common = function (fn) {
    this.fn = fn;
};
common.prototype = {
    /**
     * 获取公钥
     * @param data
     */
    getPublicKey: function () {
        ajax.get({
            url: base + 'weixin/common/public_key.jhtml',
            success:this.fn
        });
    }
};


/**
 * Cookie
 * Created by WangChao on 2016/12/13.
 */
var cookie = {
    /**
     * 设置cookie
     * @param c_name
     * @param value
     * @param expiredays
     */
    setCookie: function (c_name, value, expiredays) {
        var exdate = new Date();
        exdate.setDate(exdate.getDate() + expiredays);
        document.cookie = c_name + "=" + escape(value) + ((expiredays == null) ? "" : ";expires=" + exdate.toGMTString());
    },
    /**
     * 读取cookie
     * @param c_name
     * @returns {string}
     */
    getCookie: function (c_name) {
        if (document.cookie.length > 0) {
            c_start = document.cookie.indexOf(c_name + "=");
            if (c_start != -1) {
                c_start = c_start + c_name.length + 1;
                c_end = document.cookie.indexOf(";", c_start);
                if (c_end == -1) c_end = document.cookie.length;
                return unescape(document.cookie.substring(c_start, c_end));
            }
        }
        return "";
    },
    delCookie: function (c_name) {
        var exdate = new Date();
        exdate.setDate(exdate.getDate() - 1);
        var c_value = this.getCookie(c_name);
        if (c_value != null && c_value != "") cookie.setCookie(c_name, c_value, -1);
    }
};


/**
 * 优惠券
 * Created by WangChao on 11/9 0009.
 */
var coupon = function (fn) {
    this.fn = fn;
};
coupon.prototype = {
    /**
     * 我的优惠券
     * pageSize 每页记录数
     * pageNumber 页码
     */
    list: function (data) {
        ajax.get({
            url: base + "weixin/member/coupon/list.jhtml",
            data: data,
            success: this.fn
        });
    },
    /**
     * 店铺可领用优惠券
     * tenantId 店铺Id
     * pageSize 页大小
     * pageNumber 页码
     */
    listT: function (data) {
        ajax.get({
            url: base + "weixin/coupon/list.jhtml",
            data: data,
            success: this.fn
        });
    },
    /**
     * 领取优惠券
     * id 优惠券Id
     */
    pickup: function (data) {
        ajax.post({
            url: base + 'weixin/coupon/pickup.jhtml',
            data: data,
            success: this.fn
        });
    },
    /**
     * 优惠券分享页
     * id 优惠券Id
     */
    view:function (data) {
        ajax.get({
            url:base+'weixin/coupon/view_json.jhtml',
            data:data,
            success:this.fn
        });
    },
    /**
     * 分享
     * id   优惠券Id
     */
    share:function (data) {
        ajax.get({
            url:base+'weixin/coupon/share.jhtml',
            data:data,
            success:this.fn
        });
    },
    /**
     * 平台券领取记录
     * id 券Id
     */
    record:function (data) {
        ajax.get({
            url:base+'weixin/coupon/record.jhtml',
            data:data,
            success:this.fn
        });
    },
    /**
     * 领取平台券页面
     * id 平台券Id
     * no 序号
     */
    multipleCoupon:function (data) {
        ajax.get({
            url:base+'weixin/coupon/view_jsons.jhtml',
            data:data,
            success:this.fn
        });
    },
    /**
     * 领取平台券
     * id 平台券Id
     * no 序号
     */
    judge:function (data) {
        ajax.post({
            url:base+'weixin/coupon/judge.jhtml',
            data:data,
            success:this.fn
        });
    },
    mc_share:function (data) {
        ajax.get({
            url:base+'weixin/coupon/mc_share.jhtml',
            data:data,
            success:this.fn
        });
    }
};


/**
 * File
 * Created by WangChao on 11/15 0015.
 */
var file =function (fn) {
    this.fn=fn;
};
file.prototype={
    /**
     * 图片上传接口
     * @param file 文件
     * @return 图片url
     */
    uploadImage:function (data) {
        ajax.post({
            url:base+"weixin/file/upload_image.jhtml",
            data:data,
            contentType:false,
            processData:false,
            success:this.fn
        });
    }
};


/**
 * 地理信息控制
 * Created by WangChao on 11/18 0018.
 */
var lbs=function (fn,efn) {
    this.fn=fn;
    this.efn=efn;
};
lbs.prototype={
    /**
     * 区域--当前地理位置
     */
    current:function () {
        ajax.get({
            url:base+"weixin/lbs/current.jhtml",
            success:this.fn
        });
    },
    /**
     * 经纬度获取城市
     * lat 纬度
     * lng 经度
     */
    get:function (data) {
        ajax.get({
            url:base+"weixin/lbs/get.jhtml",
            data:data,
            success:this.fn
        });
    },
    /**
     * 更新当前城市
     * lat 纬度
     * lng 经度
     * areaId 区域Id
     * username 用户名
     */
    update:function (data) {
        ajax.post({
            url:base+'weixin/lbs/update.jhtml',
            data:data,
            success:this.fn
        });
    }

};


/**
 * 个人中心
 * Created by WangChao on 11/11.
 */

var member = function(fn) {
    this.fn = fn;
};
member.prototype = {
    /**
     * 会员中心首页
     */
    index:function () {
        ajax.get({
            url:base+"weixin/member/indexView.jhtml",
            success:this.fn
        });
    },
    /**
     * 会员信息
     */
    view:function(data){
        ajax.get({
            url:base+"weixin/member/view.jhtml",
            data:data,
            success:this.fn
        });
    },
    share:function () {
        ajax.get({
            url:base+'weixin/member/share.jhtml',
            success:this.fn
        });
    },
    attention:function () {
        ajax.get({
            url:base+'weixin/member/attention.jhtml',
            success:this.fn
        });
    },
    /**
     * 修改用户信息
     * name 姓名
     * birth 生日 2015-05-01
     * address 详细地址
     * phone 电话
     * zipCode 邮政编码
     * sex 性别  0 男  1 是女
     * areaId 区域地址
     * headImg 头像的 URL
     */
    update:function (data) {
        ajax.post({
            url:base+"weixin/member/update.jhtml",
            data:data,
            success:this.fn
        });
    },
    /**
     * 读取会员余额资料
     */
    balance:function () {
        ajax.get({
            url:base+"weixin/member/balance.jhtml",
            success:this.fn
        })
    },
    /**
     * 进行中未到帐金额
     */
    sumer:function(){
        ajax.get({
            url:base+'weixin/member/sumer.jhtml',
            success:this.fn
        });
    },
    /**
     * 钱包充值
     * amount 充值金额
     */
    fill:function (data) {
        ajax.post({
            url:base+"weixin/member/deposit/fill.jhtml",
            data:data,
            success:this.fn
        })
    },
    /**
     * 微信扫码支付提交
     * paymentPluginId （微信扫码支付插件：weixinQrcodePayPlugin）
     * amount 支付金额
     */
    cashier:function (data) {
        ajax.post({
            url:base+"weixin/member/cashier/submit.jhtml",
            data:data,
            success:this.fn
        })
    },
    /**
     * 查询支付状态
     * sn 支付单号
     */
    query:function (data) {
        ajax.post({
            url:base+"weixin/member/cashier/query.jhtml",
            data:data,
            success:this.fn
        })
    },
    /**
     * 提现保存
     * memberBankId 银行编号 对应 bandInfo
     * amount 提现金额
     * enPassword 加密后的支付密码
     */
    cash:function (data) {
        ajax.post({
            url:base+"weixin/member/cash/save.jhtml",
            data:data,
            success:this.fn
        })
    },
    /**
     * 计算提现支付手续费
     * amount 提现金额
     */
    calcFee:function (data) {
        ajax.post({
            url:base+"weixin/member/cash/calculate.jhtml",
            data:data,
            success:this.fn
        })
    },
    /**
     * 提交实名认证
     * name 姓名
     * idcard 身份证号
     * pathFront 身份证正面拍照  url
     * pathBack 身份证反面提照  url
     */
    realNameAuthen:function(data){
        ajax.post({
            url:base+"weixin/member/idcard/save.jhtml",
            data:data,
            success:this.fn
        });
    },
    /**
     * 绑定手机获取验证码
     * mobile 手机号
     */
    sendCode:function(data){
        ajax.post({
            url:base+"weixin/member/sendCode.jhtml",
            data:data,
            success:this.fn
        });
    },
    /**
     * 绑定手机
     * mobile 手机号
     * captcha 验证码
     * inviteCode 邀请码
     */
    bindMobile:function (data) {
        ajax.post({
            url:base+'weixin/member/bind_mobile.jhtml',
            data:data,
            success:this.fn
        });
    },
    /**
     * 找回密码发送验证码
     */
    sendMobile:function () {
        ajax.post({
            url:base+"weixin/member/send_mobile.jhtml",
            success:this.fn
        });
    },
    /**
     * 找回登录密码
     * captcha 验证码
     * newPass 新密码（加密后）
     */
    retrievePassword:function(data){
        ajax.post({
            url:base+'weixin/member/password/retrieve.jhtml',
            data:data,
            success:this.fn
        });
    },
    /**
     * 找回支付密码
     * captcha  手机发送时收到的验证码
     * newPass 新密码（需要加密）
     */
    retrievePayPassword:function(data){
        ajax.post({
            url:base+'weixin/member/payPassword/retrieve.jhtml',
            data:data,
            success:this.fn
        });
    },
    /**
     * 我的推广
     */
    extension:function () {
        ajax.get({
            url:base+'weixin/member/extension.jhtml',
            success:this.fn
        });
    }

};





/**
 * tenant
 */

var tenant = function (fn) {
    this.fn = fn;
};
tenant.prototype = {
    /**
     * 商家列表
     * tenantCategoryId 店铺分类Id
     * areaId           区域Id
     * channelId        频道Id
     * lat         坐标
     * lng         坐标
     * distatce         距离内
     * tagIds           标签Ids
     * communityId      商圈Id
     * isPromotion      优惠商家true，全部商家false或null
     * isUnion          是否是联盟商家
     * keyword          关键字
     * orderType        排序方式（默认排序 weight,点击降序 hitsDesc,评分降序 scoreDesc,日期降序 dateDesc,距离优先 distance）
     * pageSize         分页参数（pageSize每页记录数,pageNumber页码）
     * pageNumber         分页参数（pageSize每页记录数,pageNumber页码）
     */
    list: function (data) {
        ajax.get({
            url: base + "weixin/tenant/list.jhtml",
            data: data,
            success: this.fn
        });

    },
    /**
     * 商家热门搜索词
     */
    hot_search: function () {
        ajax.get({
            url: base + 'weixin/tenant/hot_search.jhtml',
            success: this.fn
        });
    },
    /**
     * 商家详情
     * id 店铺ID
     * lat 纬度
     * lng 经度
     */
    view: function (data) {
        ajax.get({
            url: base + 'weixin/tenant/view.jhtml',
            data: data,
            success: this.fn
        });
    },
    /**
     * 分享
     * id 商家Id
     */
    share:function (data) {
        ajax.get({
            url:base+'weixin/tenant/share.jhtml',
            data:data,
            success:this.fn
        });
    },
    /**
     * 优惠买单分享
     * id 商家Id
     */
    offerToPayShare:function (data) {
        ajax.get({
            url:base+'weixin/tenant/offerToPay/share.jhtml',
            data:data,
            success:this.fn
        });
    },
    /**
     * 附近页分享
     */
    nearbyShare:function () {
        ajax.get({
            url:base+'weixin/tenant/nearby/share.jhtml',
            success:this.fn
        });
    },
    /**
     * 获取商家商品分类
     * tenantId 店铺Id
     */
    productCategory: function (data) {
        ajax.get({
            url: base + 'weixin/productCategoryTenant/all.jhtml',
            data: data,
            success: this.fn
        });
    },
    /**
     * 获取商家门店列表
     * id 店铺Id
     * pageSize 每页记录数
     * pageNumber页码
     */
    deliveryCenterList: function (data) {
        ajax.get({
            url: base + 'weixin/tenant/deliveryCenter/list.jhtml',
            data: data,
            success: this.fn
        });
    },
    /**
     * 查询联盟商家
     * id 商家Id
     * pageSize 每页记录数
     * pageNumber页码
     */
    union:function (data) {
        ajax.get({
            url: base + 'weixin/tenant/union.jhtml',
            data: data,
            success: this.fn
        });
    },
    /**
     * 根据商品条形码查询商品列表
     * id  商家Id
     * barcode  商品条形码
     */
    barcode:function (data) {
        ajax.get({
            url: base + 'weixin/tenant/barcode.jhtml',
            data: data,
            success: this.fn
        });
    },
    /**
     * 添加店铺到收藏
     * id 店铺Id
     */
    favorite:function (data) {
        ajax.post({
            url:base+'weixin/member/favorite/tenant/add.jhtml',
            data:data,
            success:this.fn
        });
    },
    /**
     * 取消店铺收藏
     * id 店铺ID
     */
    delFavorite: function (data) {
        ajax.post({
            url:base+'weixin/member/favorite/tenant/delete.jhtml',
            data:data,
            success:this.fn
        });
    }
};





/**
 * product channel {jsons}
 */

var productChannel = function(fn) {
    this.fn = fn;
};
productChannel.prototype = {
    /**
     * 获取同城频道列表
     */
    list:function () {
        ajax.get({
            url:base+"weixin/product_channel/list.jhtml",
            success:this.fn
        });

    },
    /**
     * 获取频道下的商家分类
     * id 频道id
     */
    tenantCategory:function (data) {
        ajax.get({
            url:base+'weixin/product_channel/tenant_category.jhtml',
            data:data,
            success:this.fn
        });
    }

};





/**
 * 红包
 * Created by WangChao on 11/9 0009.
 */
var redPacket = function (fn) {
    this.fn = fn;
};
redPacket.prototype = {
    /**
     * 我的红包
     * @param data
     * lng 经度
     * lat 纬度
     * pageSize 每页记录数
     * pageNumber 页码
     */
    list: function (data) {
        ajax.get({
            url: base + "weixin/member/redPacket/list.jhtml",
            data: data,
            success: this.fn
        });
    },
    /**
     * 商家红包
     * @param data
     * areaId 区域Id
     * categoryId 分类Id
     * orderType 排序类型（distance 按距离排序;amountSize 按红包大小排序）
     * lng 经度
     * lat 纬度
     * pageSize 每页记录数
     * pageNumber 页码
     */
    tenantRedList: function (data) {
        ajax.get({
            url: base + "weixin/member/redPacket/tenant/list.jhtml",
            data: data,
            success: this.fn
        });
    },
    /**
     * 领取红包
     * @param data
     * id 红包Id
     * guideId  导购Id
     */
    get: function (data) {
        ajax.post({
            url: base + "weixin/member/redPacket/get.jhtml",
            data: data,
            success: this.fn
        });
    },
    /**
     * 使用红包
     * @param data
     * code 红包码
     */
    use: function (data) {
        ajax.get({
            url: base + "weixin/member/redPacket/use.jhtml",
            data: data,
            success: this.fn
        });
    },
    /**
     * 推荐好店
     * @param data
     * areaId 区域Id
     * lng经度
     * lat纬度
     * pageSize 每页记录数
     * pageNumber 页码
     */
    recommendTenant: function (data) {
        ajax.get({
            url: base + "weixin/member/redPacket/tenant/recommend.jhtml",
            data: data,
            success: this.fn
        })
    },
    /**
     * 全部类别
     * @param data
     */
    category:function (data) {
        ajax.get({
            url:base+"weixin/tenantCategory/all.jhtml",
            data:data,
            success: this.fn
        });
    },
    /**
     * 商家红包分享
     */
    share:function (data) {
        ajax.get({
            url:base+"weixin/member/redPacket/share.jhtml",
            data:data,
            success: this.fn
        });
    }

};


var categorys;
function initCategory() {
  categorys = [
   					    {id:"1182",name:"食品饮料",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201605/407b6c68-c2ca-4dca-9038-07442c012762.png",childrens:[
			                  {id:"1841",name:"饮品饮料",tag:"0",image:"",childrens:[
			                         {id:"811",name:"饮料",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/1f13bd6d-a0ab-49da-8e9e-33408fd494ff.png"}
			                        ,{id:"1194",name:"冲调饮品",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/74bbafd3-6ec2-4bbc-a252-cb796fbf8225.png"}
			               ]}
			                 ,{id:"1193",name:"休闲零食",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/63a75303-fb02-48e0-9743-f11492e8d3f5.png",childrens:[
			                         {id:"1562",name:"果冻",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/4153481c-28bb-49b5-8ee6-4512f7954749.png"}
			                        ,{id:"1862",name:"其他零食",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/fae5d660-17a4-47a1-b677-d67b00e89694.png"}
			                        ,{id:"1192",name:"糖果巧克力",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/f3e49447-552e-4ec9-a55a-ac6f5d7113b4.png"}
			                        ,{id:"1191",name:"饼干蛋糕",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/d600ee3d-93d2-4b15-a3fd-a691fcf7c14a.png"}
			                        ,{id:"1497",name:"肉干果脯",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/8d52f874-fcd7-4ad5-b837-94d692de269f.png"}
			                        ,{id:"1498",name:"蜜饯果干",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/094c088b-ed5f-4c69-bb5c-47fbc553fff0.png"}
			               ]}
			                 ,{id:"1700",name:"生鲜蔬果",tag:"0",image:"",childrens:[
			                         {id:"1733",name:"水果",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/1250b82f-ed51-4ee0-88d4-6cc8620a2efd.png"}
			               ]}
			                 ,{id:"1484",name:"酒水",tag:"0",image:"",childrens:[
			                         {id:"1187",name:"国内啤酒",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/801aac07-e2dd-48e9-823d-fac347136797.png"}
			                        ,{id:"806",name:"洋酒",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/2e451cf3-c593-41b0-b750-3a7d656649f4.png"}
			                        ,{id:"805",name:"葡萄酒",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/9d2fafe5-c1bd-4808-a92a-d011f0da8b8c.png"}
			                        ,{id:"807",name:"啤酒",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/f491b571-4ad1-44dc-b834-3af890fa5d4f.png"}
			                        ,{id:"804",name:"白酒",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/f5d203f4-e0c9-450c-95a6-9d22545be2d0.png"}
			                        ,{id:"1494",name:"黄酒",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/e7d19651-f1e4-493a-9a56-da0646e2c1b1.png"}
			               ]}
			                 ,{id:"1561",name:"茗茶",tag:"0",image:"",childrens:[
			                         {id:"1485",name:"青茶",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/a5aaced1-7253-411b-8249-1db3686ec50e.png"}
			                        ,{id:"1404",name:"绿茶",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/2e7d9010-ca11-4e03-9dec-5154bf77ed55.png"}
			                        ,{id:"1405",name:"红茶",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/f25a4a36-755d-4fea-abb3-892e2b67508b.png"}
			                        ,{id:"1491",name:"黑茶",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/3da76f24-dc99-482b-beaf-1beca7573f16.png"}
			                        ,{id:"1492",name:"白茶",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/af3774e1-afbb-44bc-af95-b4cdd8dbd648.png"}
			                        ,{id:"1493",name:"其他茶",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/c60d5d23-14ef-4a1c-8d30-2061b7a25d37.png"}
			               ]}
			                 ,{id:"817",name:"粮油调味",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/ad615072-77ef-41cb-acbe-e1bc3b425beb.png",childrens:[
			                         {id:"1857",name:"方便食品",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/cf594a13-f238-4892-aa0d-5de9af0b5e31.png"}
			                        ,{id:"1177",name:"米面粗粮",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/33dfa70e-8608-4e50-ba76-d3c40e8f4598.png"}
			                        ,{id:"1198",name:"油盐调味",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/3444f245-7391-44f9-9f03-f4a2360ac322.png"}
			                        ,{id:"1500",name:"面食",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/06ecc982-4e75-4266-ab9e-95105d4d57c5.png"}
			               ]}
			                 ,{id:"1495",name:"进口食品",tag:"0",image:"",childrens:[
			                         {id:"815",name:"进口零食",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/ab97bb4d-36c4-4ffd-a1a1-806485b38f11.png"}
			                        ,{id:"816",name:"进口饮品",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/49a03c4f-6abe-43ea-9714-89f3f80affb6.png"}
			               ]}
			                 ,{id:"1851",name:"地方特产",tag:"0",image:"",childrens:[
			                         {id:"1501",name:"新疆",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/4398cd6d-ca0b-4406-8063-fdee2734952a.png"}
			                        ,{id:"1502",name:"北京",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/fe6ba5a3-d57e-4597-8d61-428bbb6c8c7d.png"}
			                        ,{id:"1503",name:"山西",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/1b52972d-2d53-46fd-a6b2-6b1f84a69f8f.png"}
			                        ,{id:"1504",name:"内蒙古",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/554d37dc-2a31-435c-90bf-deb3e21c9675.png"}
			                        ,{id:"1505",name:"福建",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/df9a2e68-f4d2-43b2-89c3-4343f7e26606.png"}
			                        ,{id:"1711",name:"安徽",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/1b52972d-2d53-46fd-a6b2-6b1f84a69f8f.png"}
			                        ,{id:"1506",name:"湖南",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/73e22ad9-e164-497e-8d73-b55258ad05c4.png"}
			                        ,{id:"1507",name:"四川",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/e9ea7b6c-b2c0-4102-a0af-2fa4d5dba0b3.png"}
			                        ,{id:"1508",name:"云南",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/d23a1e64-47cc-4295-b0aa-bb45574ba06c.png"}
			                        ,{id:"1509",name:"其他特产",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/9669af3b-247b-435a-b1e8-d3f9868f0ed1.png"}
			               ]}
			                 ,{id:"1856",name:"保健养生",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/6241b14d-de81-4b08-9537-037fb52d56f7.png",childrens:[
			               ]}
					   ]}
					   ,{id:"1112",name:"母婴儿童",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201605/ad8ed15d-c871-4866-8f0b-6fa1e2fa788c.png",childrens:[
			                  {id:"1515",name:"童装",tag:"0",image:"",childrens:[
			                         {id:"1574",name:"套装",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/925dcb9a-ce20-4d1a-955e-9101085c9608.png"}
			                        ,{id:"1353",name:"裤子/裙子",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/d061c95f-e2e2-4858-b0fb-958ae3d9ec05.png"}
			                        ,{id:"1583",name:"连衣裙",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/53357e8b-f14d-4369-ba4a-9b743a364816.png"}
			                        ,{id:"1584",name:"上衣/T恤",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/baa6402d-1714-4cf9-ae39-ed3020b947f7.png"}
			                        ,{id:"1585",name:"外套",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/bf46dc0d-52a6-4eea-ba02-2aea5b3235c3.png"}
			                        ,{id:"1571",name:"内衣/家居服",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/9b8fad39-2448-4ea0-9a37-b81933485af5.png"}
			                        ,{id:"1549",name:"毛衣",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/4d7295e9-84cf-4da3-98e1-d9ae2db44139.png"}
			               ]}
			                 ,{id:"1575",name:"童鞋",tag:"0",image:"",childrens:[
			                         {id:"1545",name:"学步鞋",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/413fccae-b1f1-477c-83b0-bafeb9a29478.png"}
			                        ,{id:"1577",name:"凉鞋",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/1b79fe90-3377-4ed5-a954-c52389dd2194.png"}
			                        ,{id:"1578",name:"帆布鞋",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/1b2858a0-4c96-4451-b86a-83a8553e82f5.png"}
			                        ,{id:"1543",name:"运动鞋",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/34fd74e4-cb7c-4159-be21-d4c8c52b6dcc.png"}
			                        ,{id:"1544",name:"皮鞋",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/57423f98-f9db-4341-a251-442545db9e53.png"}
			                        ,{id:"1580",name:"雨靴",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/31cd2652-acae-40d5-bfde-b407a92a3694.png"}
			               ]}
			                 ,{id:"1550",name:"婴儿服",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/20ddc92e-2900-4d94-aa97-a299cc75b525.png",childrens:[
			                         {id:"1587",name:"内衣套装",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/78186a96-3a9d-43a3-b691-2f5ff8d82cba.png"}
			                        ,{id:"1588",name:"下装",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/561f769b-639d-4e1a-b08b-8e3910248b86.png"}
			                        ,{id:"1589",name:"婴儿礼盒",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/9b2a1a41-b4c3-416f-a255-446f7fa7374b.png"}
			                        ,{id:"1590",name:"外套",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/fede8912-94e7-4b1a-a412-4f674df60ff0.png"}
			                        ,{id:"1592",name:"上衣",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/2d65ff92-4ebb-4ad9-b634-fd03aab15179.png"}
			               ]}
			                 ,{id:"1514",name:"童车童床",tag:"0",image:"",childrens:[
			                         {id:"1127",name:"婴儿推车",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/b3c777fe-172e-488a-8a36-6ad88d10530f.png"}
			                        ,{id:"1129",name:"学步车",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/6f59b388-73f0-4ac8-a507-2714512f70a0.png"}
			                        ,{id:"1595",name:"安全座椅",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/1c675333-a5c0-4cb2-84b0-0d40aad15341.png"}
			                        ,{id:"1596",name:"腰凳抱被",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/ebc572d6-46ea-48fd-b102-90ee9154ed31.png"}
			                        ,{id:"1126",name:"婴儿床",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/d5a32ac2-9ba1-42d4-abdd-b7bda95f99c8.png"}
			                        ,{id:"1128",name:"餐椅摇椅",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/55b71a88-2196-4bd9-83d0-df0c76ad0146.png"}
			                        ,{id:"1132",name:"儿童玩具车",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/9bfc6a05-e636-469e-9a0e-766d9860c018.png"}
			               ]}
			                 ,{id:"1513",name:"喂哺用品",tag:"0",image:"",childrens:[
			                         {id:"1119",name:"奶瓶奶嘴",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/c0ac8f6a-3b83-4605-9ff1-92eca9f026a0.png"}
			                        ,{id:"1124",name:"碗筷叉勺",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/ef7aaf2b-c24d-4092-86b2-8b0b0954191b.png"}
			                        ,{id:"1125",name:"水壶/水杯",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/a0cb3ae6-76e2-4509-bfb0-18a2e62131e9.png"}
			               ]}
			                 ,{id:"1407",name:"洗护用品",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/c2c53d2c-49f3-447d-ae42-3470b30995cf.png",childrens:[
			                         {id:"1135",name:"洗浴护肤",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/2816e575-a6c3-4ac0-8e5b-b2f28a39b282.png"}
			                        ,{id:"1137",name:"理发器",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/10ff5b9e-1b1f-4a5e-98eb-103149f66ed3.png"}
			                        ,{id:"1138",name:"护理清洁",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/91abebb5-1ace-4141-957f-cec78b7c7ead.png"}
			                        ,{id:"1141",name:"座便器/浴盆",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/cfa45e00-da09-47a8-a9df-56b5ff29677f.png"}
			                        ,{id:"1142",name:"驱蚊防蚊",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/6785500b-472d-4a59-a883-c381efa327c9.png"}
			               ]}
			                 ,{id:"1563",name:"早教玩具",tag:"0",image:"",childrens:[
			                         {id:"1564",name:"玩具",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/547487bc-3048-45f7-983f-0d818e285082.png"}
			                        ,{id:"1568",name:"学习用品/早教",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/5917f198-3ad7-466a-b08f-a6da4d797dc6.png"}
			               ]}
			                 ,{id:"1510",name:"奶粉/辅食",tag:"0",image:"",childrens:[
			                         {id:"1155",name:"奶粉/DHA",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/a5386fb3-86ac-424a-b75d-adecb022efbb.png"}
			                        ,{id:"1156",name:"成人奶粉",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/63edb63d-1226-47d2-9c50-85cc2812fc14.png"}
			                        ,{id:"1146",name:"补充营养素",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/b5b4020b-b042-461d-a662-5e0df0212dbc.png"}
			                        ,{id:"1147",name:"辅食",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/e9e45f8a-5146-48bf-b45a-d4a087eec139.png"}
			                        ,{id:"1150",name:"宝宝零食",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/e26efcbb-615d-41df-996d-a7129c00bd26.png"}
			               ]}
			                 ,{id:"1512",name:"尿裤湿巾",tag:"0",image:"",childrens:[
			                         {id:"1151",name:"婴儿尿裤",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/fedee6d7-38a0-4b68-b9f9-0257b3a93329.png"}
			                        ,{id:"1154",name:"湿巾",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/860e6338-c00b-4fbf-95a6-4fe6d8a1213f.png"}
			                        ,{id:"1153",name:"成人尿裤",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/05163670-9321-43f3-9181-1ccec9c48344.png"}
			               ]}
			                 ,{id:"1607",name:"孕产",tag:"0",image:"",childrens:[
			                         {id:"1609",name:"洗护用品",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/1ca39e6f-0167-4e8f-9f8c-1b83164feb73.png"}
			                        ,{id:"1610",name:"孕妈服饰",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/2376c281-4e7b-4631-9b5f-96897d16688f.png"}
			                        ,{id:"1614",name:"待产用品",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/c832deda-e65c-4f75-a87e-f2ebfca09949.png"}
			               ]}
					   ]}
					   ,{id:"1468",name:"鞋帽箱包",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201605/7d606bcd-a270-43bc-985a-c5ead8a86841.png",childrens:[
			                  {id:"1863",name:"鞋子配件",tag:"0",image:"",childrens:[
			                         {id:"1864",name:"鞋垫",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/5dd775c2-cac2-4c0e-9d87-7279b24b3584.png"}
			               ]}
			                 ,{id:"1470",name:"时尚女鞋",tag:"0",image:"",childrens:[
			                         {id:"1218",name:"单鞋/平底鞋",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/4bd9088b-36bb-4dc3-8b19-4de9a09effb9.png"}
			                        ,{id:"1223",name:"高跟鞋/坡跟鞋",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/3a7f9314-5e5d-48a4-ba24-fcb7f2b2b0cd.png"}
			                        ,{id:"1224",name:"凉鞋/拖鞋",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/cc9be183-98d8-42de-9f9b-79cefa5972ef.png"}
			                        ,{id:"1227",name:"靴子",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/d0f176c3-1d29-4b51-ad06-48a911605e8d.png"}
			               ]}
			                 ,{id:"1473",name:"流行男鞋",tag:"0",image:"",childrens:[
			                         {id:"1215",name:"皮鞋",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/4e472132-8df0-4ae4-99a1-db6950d05c52.png"}
			                        ,{id:"1216",name:"帆布鞋",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/4b90d3f9-1915-472b-ab46-280708886c68.png"}
			                        ,{id:"1217",name:"凉鞋拖鞋",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/70905328-9915-4e0e-bdf9-6b85058f0f32.png"}
			                        ,{id:"1263",name:"男靴",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/d2a3641c-daff-480a-a51c-0f4192f5ddcf.png"}
			                        ,{id:"1266",name:"功能鞋",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/44dd5dbf-2bc4-4f46-ac7f-48013cf18a12.png"}
			                        ,{id:"1267",name:"传统布鞋",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/4c106c57-5dec-47bc-9830-260e0be7d360.png"}
			               ]}
			                 ,{id:"1160",name:"潮流女包",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/e8692510-63a9-4ea4-beaa-24c4261bc0cf.png",childrens:[
			                         {id:"1228",name:"单肩包",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/ea7b9822-d10a-43aa-963a-454811d0fe3a.png"}
			                        ,{id:"1231",name:"手提拿包",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/fc019e0a-8a05-42d4-b853-f29cfc585434.png"}
			                        ,{id:"1235",name:"双肩包",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/477757f2-3e03-4b37-965a-298bc2fb049f.png"}
			                        ,{id:"1234",name:"钱包卡包",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/da68b561-77f8-4e56-9d24-473c1d2d9a23.png"}
			                        ,{id:"1236",name:"功能包",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/c5ec1df9-db31-4923-88f6-cb77b140e196.png"}
			               ]}
			                 ,{id:"1161",name:"精品男包",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/bcb1e82c-33e5-4d39-95e7-7e9a4e6ae8a0.png",childrens:[
			                         {id:"1618",name:"钱包卡包",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/c9c9b5bc-5681-4286-9756-75c7a3820f8b.png"}
			                        ,{id:"1240",name:"单肩背包",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/52644d7d-00fa-40fc-88d4-aadb18b72c63.png"}
			                        ,{id:"1241",name:"双肩背包",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/1e0f93db-9e4b-4cb1-b37f-afcd0102a620.png"}
			                        ,{id:"1229",name:"手提包",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/5b946c78-0b77-4b1a-9149-622ecf08098c.png"}
			                        ,{id:"1239",name:"商务包",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/69d9c059-b99e-40df-9e8f-665530dc1674.png"}
			                        ,{id:"1620",name:"功能包",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/5ccf30c4-cb46-4305-8cf5-5a7b9cbbb54e.png"}
			               ]}
			                 ,{id:"1162",name:"功能箱包",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/76ccb8e9-31f8-4043-9f31-791379a65127.png",childrens:[
			                         {id:"1246",name:"拉杆箱包",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/1fab1510-f0ca-4fc7-80d1-4db771cd454d.png"}
			                        ,{id:"1247",name:"旅行登山包",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/dc713649-958f-4e0d-9bb2-a06dae583ee1.png"}
			                        ,{id:"1248",name:"电脑包",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/11cbbaca-46c4-4376-a863-f97210b95a35.png"}
			                        ,{id:"1253",name:"书包",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/0ee96143-17d2-4d55-9f38-e3e5d8e20778.png"}
			                        ,{id:"1254",name:"其他功能包",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/c6f38a4f-2ca9-465d-b58b-f74a1382ebbb.png"}
			               ]}
			                 ,{id:"1842",name:"潮流伞帽",tag:"0",image:"",childrens:[
			                         {id:"908",name:"帽子",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/5a0d6763-6ca5-4873-a9b7-fde5cb30131b.png"}
			                        ,{id:"909",name:"遮阳伞/雨伞",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/2abc3229-5512-4628-acc4-b9e7faa984d0.png"}
			               ]}
					   ]}
					   ,{id:"1727",name:"数码家电",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/80c7244d-753c-4d09-b2b6-08d91d5228c5.png",childrens:[
			                  {id:"1687",name:"家具电器",tag:"0",image:"",childrens:[
			                         {id:"1693",name:"彩电空调",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201607/ffe0b007-a29c-499d-a99a-8ac8202fb5e3.jpg"}
			               ]}
			                 ,{id:"1694",name:"厨卫电器",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201607/cf984c23-4d65-49a3-9cf8-dbf705987321.jpg",childrens:[
			                         {id:"1685",name:"净水器",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201607/f879774d-db8e-4067-8a3e-a7cb621bff47.jpg"}
			                        ,{id:"1695",name:"洗衣机",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201607/54c1223f-b761-4cbb-844a-8aabe9bf766c.jpg"}
			               ]}
			                 ,{id:"1845",name:"电脑",tag:"0",image:"",childrens:[
			                         {id:"999",name:"笔记本",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/8e01eef8-972c-494f-a2fa-cb5da8c66cea.png"}
			                        ,{id:"1004",name:"台式机",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/0a86f099-812e-40cc-94b5-3293bed01503.png"}
			                        ,{id:"1000",name:"超极本",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/88dd0e4b-f4f9-463e-96f3-cfc39d45587b.png"}
			                        ,{id:"1002",name:"平板电脑",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/0a7df73a-4935-4738-86ed-38156a553a89.png"}
			               ]}
			                 ,{id:"1844",name:"电脑周边",tag:"0",image:"",childrens:[
			                         {id:"1726",name:"电脑配件",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201607/5be5ea8b-b411-4776-ad8a-c526d87ac776.jpg"}
			                        ,{id:"1007",name:"键盘鼠标",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/b1aa8870-55ea-4048-b404-b1cbd0b92b0f.png"}
			                        ,{id:"979",name:"路由器",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/45c6ea50-23e6-44fc-8635-22ca595fdf90.png"}
			                        ,{id:"1011",name:"外置内存",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/fcfc9ae1-d7e6-4795-8038-6f97a532a60f.png"}
			               ]}
			                 ,{id:"1846",name:"手机",tag:"0",image:"",childrens:[
			                         {id:"1719",name:"vivo",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/2205a851-7f00-4410-b718-268411d952e9.png"}
			                        ,{id:"1475",name:"小米手机",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/74fcba4d-8f2d-4d62-b475-0d7dd2a1ab62.png"}
			                        ,{id:"1476",name:"华为",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/3a363bfb-51af-4f81-9fc6-5e676a922a07.png"}
			                        ,{id:"1477",name:"iPhone",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/f7f05074-c7a9-4267-971c-c15bb257afaf.png"}
			                        ,{id:"1478",name:"魅族",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/eb92477a-d9d3-4155-914e-46addb8ffa3f.png"}
			                        ,{id:"1479",name:"三星",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/19b3c33f-7f7d-4d75-99c1-6d18241a5d1a.png"}
			                        ,{id:"1480",name:"oppo",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/ee27d721-e18c-4cc8-b920-2fb66818feb8.png"}
			                        ,{id:"1481",name:"联想",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/c8bd7197-1bf8-4104-87fb-3f4513f5df58.png"}
			                        ,{id:"1482",name:"酷派",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/0f82982e-d4a1-4a51-9a5a-735386325906.png"}
			                        ,{id:"1483",name:"中兴",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/b686730b-aa8d-46b6-a440-c4b4b57131f8.png"}
			               ]}
			                 ,{id:"1725",name:"3C手机配件",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201607/2a5183e2-07cc-4950-80fc-3286d694e9cd.jpg",childrens:[
			                         {id:"1860",name:"电池",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/e30f50b2-0522-421c-94eb-fc60018a3b47.png"}
			               ]}
					   ]}
					   ,{id:"1517",name:"运动户外",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201605/93d97a50-b1be-4818-ad39-9ce114fae27a.png",childrens:[
			                  {id:"1659",name:"运动服装",tag:"0",image:"",childrens:[
			                         {id:"1636",name:"运动外套",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/742538c3-7761-46c9-9c3a-e7130555603f.png"}
			                        ,{id:"1639",name:"运动套装",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/2fc2ff7c-7226-420e-a21b-93cb6722839f.png"}
			                        ,{id:"1641",name:"运动T恤",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/831a1577-b672-480c-8a2e-16efc2d4651e.png"}
			                        ,{id:"1668",name:"运动裤",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/f6effd94-96cf-4ce5-93d2-fa57e816c219.png"}
			                        ,{id:"1669",name:"泳衣",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/adb83807-6542-49f2-9267-7bc5c564fa6a.png"}
			               ]}
			                 ,{id:"1646",name:"运动鞋",tag:"0",image:"",childrens:[
			                         {id:"1655",name:"跑步鞋",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/1ba28b38-dc01-4991-b9d8-f1efecd26523.png"}
			                        ,{id:"1656",name:"篮球鞋",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/31bc9d93-6874-46c7-9ddf-2e71e3a3e3f3.png"}
			                        ,{id:"1527",name:"休闲板鞋",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/7b6990d8-b857-4649-904e-99458fb7a0ad.png"}
			                        ,{id:"1519",name:"男子跑步鞋",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/751639b1-82a3-48a2-9eed-0bcde41ce57d.png"}
			                        ,{id:"1643",name:"其他运动鞋",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/a8537864-cc75-4ccb-9e7a-0bd619cacff9.png"}
			               ]}
			                 ,{id:"1530",name:"运动器材",tag:"0",image:"",childrens:[
			                         {id:"1533",name:"篮球",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/d73d20de-157e-4580-b1f4-35a3f3fda4b0.png"}
			                        ,{id:"1534",name:"足球",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/dc7597dc-d975-4858-9529-a277e15c7699.png"}
			                        ,{id:"1536",name:"乒乓球",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/4c4360fa-82c3-4b7e-95d1-34f5c76c6aad.png"}
			                        ,{id:"1535",name:"羽毛球/拍",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/187131de-bf24-46c5-a535-367213d3faca.png"}
			                        ,{id:"1531",name:"自行车",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/0c14cc17-d48e-4b8e-8d2d-3a822bcd61c1.png"}
			               ]}
			                 ,{id:"1698",name:"运动周边",tag:"0",image:"",childrens:[
			                         {id:"1537",name:"运动护具",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/034d2968-5e5e-45ba-b4c6-ee59fae8242c.png"}
			               ]}
					   ]}
					   ,{id:"856",name:"精品男装",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201605/c16f2fd5-c1ee-49e7-9164-d528f5771545.png",childrens:[
			                  {id:"1443",name:"上衣",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/8f0ecc68-f126-4fe4-91e2-18669787a1ab.png",childrens:[
			                         {id:"1721",name:"T恤/短袖",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/8bf312a3-df3b-4bb4-a551-e4f4d2721547.png"}
			                        ,{id:"1445",name:"衬衫",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/6793b153-067d-46ca-b584-aead8a33fb86.png"}
			                        ,{id:"1449",name:"外套",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/1f879c8b-c8d0-4bdd-af07-90a0a8337079.png"}
			                        ,{id:"1447",name:"卫衣",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/55e2bdec-eb22-421f-823c-29907a12508e.png"}
			                        ,{id:"1448",name:"毛衣",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/e5cafac8-b58f-477b-91f3-953b31dc7b22.png"}
			                        ,{id:"1450",name:"西装",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/a8836f42-de15-44fa-a4d6-e19db6f47d00.png"}
			               ]}
			                 ,{id:"1453",name:"裤子",tag:"0",image:"",childrens:[
			                         {id:"1854",name:"短裤",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/6c63deb6-e2b3-41c4-803c-7505081548ea.png"}
			                        ,{id:"1454",name:"牛仔裤",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/8c21c4df-28eb-4c84-acbf-eab37a919163.png"}
			                        ,{id:"1455",name:"休闲裤/运动裤",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/2cd09ec0-fcfb-4d31-ad72-a0f0c6597bce.png"}
			               ]}
			                 ,{id:"1457",name:"男士内衣",tag:"0",image:"",childrens:[
			                         {id:"1458",name:"内衣裤袜",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/ec38d92c-1ba0-4a95-81e4-08adbf654ad9.png"}
			                        ,{id:"1459",name:"保暖内衣",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/4c1776de-40f9-4ae5-affa-9b8b3cb41d8d.png"}
			                        ,{id:"1460",name:"睡衣",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/c112539b-5717-4c20-a79f-5bb5b7125539.png"}
			               ]}
					   ]}
					   ,{id:"818",name:"潮流女装",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201605/e4b7defb-d8ca-4baa-ad71-643fa16ac38e.png",childrens:[
			                  {id:"1747",name:"防晒服",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/1d908675-2176-409c-825c-3f9f5bc0913b.png",childrens:[
			               ]}
			                 ,{id:"819",name:"流行上装",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/f4d2fbff-1adf-4a77-9a01-cdabcfb9580d.png",childrens:[
			                         {id:"1722",name:"衬衫",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/27374da2-7684-4da2-ba1e-064c43f93e33.png"}
			                        ,{id:"1724",name:"雪纺",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/2b5338f2-febd-469b-81b4-23efaea5d5ba.png"}
			                        ,{id:"1415",name:"毛衣",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/6ad2665f-c5da-40c3-860a-b6fafe7bbb1e.png"}
			                        ,{id:"1416",name:"卫衣",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/25fc604e-780a-482e-90a4-774275d24682.png"}
			                        ,{id:"1428",name:"短袖/T恤",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/89a52636-eb47-4abe-8a12-d944d32fcc8e.png"}
			                        ,{id:"1425",name:"外套",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/e7e925b4-96a0-4d3c-b405-52fa7ccec4cf.png"}
			               ]}
			                 ,{id:"821",name:"裤子/裙子",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/67f176c8-8271-4971-b67b-60e781f66d86.jpg",childrens:[
			                         {id:"883",name:"牛仔裤",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/9f986d03-3132-4a46-8680-f187806cbe66.png"}
			                        ,{id:"1429",name:"休闲时装",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/ba17eb09-015c-4930-a626-a45d1fa2902a.png"}
			                        ,{id:"1430",name:"打底裤",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/99357187-08bd-4b56-806f-7b4aa2f69340.png"}
			                        ,{id:"1431",name:"半身裙",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/818976f0-ef26-4f61-af66-f9057d573e3b.png"}
			                        ,{id:"1432",name:"连衣裙",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/e682d986-1667-4554-a8cd-0c3a4b3f99dc.png"}
			               ]}
			                 ,{id:"820",name:"女士内衣",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/d1f28cf5-2738-451d-ad02-f37fb078c57b.jpg",childrens:[
			                         {id:"1723",name:"吊带背心",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/28b0c979-33b8-4273-ba1a-b89b7dfe5caa.png"}
			                        ,{id:"863",name:"文胸内裤",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/4ac13b8d-3c8e-4915-8d2c-8da79b259172.png"}
			                        ,{id:"1440",name:"睡衣",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/fe5749e7-c48a-42f7-ae65-cec1a28e4e72.png"}
			                        ,{id:"1441",name:"保暖内衣",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/6dc3e927-679b-40d6-b123-b4cf4a313af1.png"}
			                        ,{id:"1442",name:"裤袜",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/ba0e4511-ee34-4c4f-8013-854ec1fc3fe8.png"}
			               ]}
			                 ,{id:"1418",name:"套装",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/d5d9f5e1-cda0-4143-8c7c-3b165bf8b35b.png",childrens:[
			               ]}
					   ]}
					   ,{id:"921",name:"美妆日化",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201605/213d5a62-b5d8-4359-9a3a-7b7f22a08f57.png",childrens:[
			                  {id:"1420",name:"时尚彩妆",tag:"0",image:"",childrens:[
			                         {id:"955",name:"香水",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/ca561d39-e431-4457-a7c4-d1ff55c514e5.png"}
			                        ,{id:"956",name:"底妆修容",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/72883bbb-131d-46fd-bc01-606a0aca6a4a.png"}
			                        ,{id:"958",name:"眼部",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/7cb32b3d-fd9d-4a57-9e61-ce6163afd3fb.png"}
			                        ,{id:"959",name:"唇部",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/d317baa3-2a47-4983-8249-6ae5c275d997.png"}
			                        ,{id:"960",name:"美甲美容",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/dd099add-0fe9-47e8-9b6e-3155cc2edefd.png"}
			               ]}
			                 ,{id:"922",name:"个人护理",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/5ab81bf5-d18f-4150-8062-551ca26cf657.png",childrens:[
			                         {id:"1858",name:"保健用品",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/dbf4172a-1138-460c-9edb-ea2b20dab1ad.png"}
			                        ,{id:"1717",name:"剃须清洁",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/4fe5d0fc-488d-4e64-92bf-b55120f001d1.png"}
			                        ,{id:"929",name:"清洁护肤",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/3207b7e7-b022-4afd-81b4-d6b010108a34.png"}
			                        ,{id:"951",name:"卫生巾/纸巾",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/054953c0-f4fc-4306-9f43-8144f2d62ecb.png"}
			                        ,{id:"948",name:"口腔清洁",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/adb147e8-e216-4d43-a553-28fa5851f947.png"}
			                        ,{id:"940",name:"沐浴清洁剂",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/981f3a73-3535-4eec-abd3-1f259b657eba.png"}
			               ]}
					   ]}
					   ,{id:"1712",name:"日用百货",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/7ccb18f1-fbab-4b64-9c47-36d4d686c4ef.png",childrens:[
			                  {id:"1713",name:"居家日用",tag:"0",image:"",childrens:[
			                         {id:"1859",name:"清洁去污",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/69a80796-d3b4-45e0-b6f4-aa9c342f8abf.png"}
			                        ,{id:"1861",name:"一次性用品",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/c5dd3979-bb38-44ea-aa86-9bb88280a428.png"}
			                        ,{id:"1866",name:"储水用具",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/8a60f54f-3e79-4fc1-9bc2-a5d01a0bcd9e.png"}
			                        ,{id:"1078",name:"净化除味",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/00582c95-ad53-45bb-9b87-4db590a44935.png"}
			               ]}
			                 ,{id:"1714",name:"厨房配件",tag:"0",image:"",childrens:[
			                         {id:"1738",name:"茶具",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201607/320a7589-cf75-4296-9800-ebe625e3f6ba.jpg"}
			                        ,{id:"1033",name:"烹饪锅具",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/a1d82f40-014d-4afd-83c1-59aba5e8f167.jpg"}
			                        ,{id:"1038",name:"茶具/咖啡具",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/c100741a-9e1a-4704-8126-21a52620b741.jpg"}
			                        ,{id:"1037",name:"餐具",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/6b3e9e2a-3c42-41e0-9029-c2de2ffff797.jpg"}
			               ]}
			                 ,{id:"1715",name:"卫浴配件",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/2dc2592d-b495-4d8e-b66e-a648450e81d7.png",childrens:[
			               ]}
			                 ,{id:"1716",name:"收纳必备",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/c0a8c293-41ec-4a73-812f-6e9a9d91660e.png",childrens:[
			               ]}
			                 ,{id:"1718",name:"节庆用品",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/5d40d378-3317-4030-ab67-1b5d9dcaed3e.png",childrens:[
			               ]}
					   ]}
					   ,{id:"1516",name:"钟表配饰",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201605/512a7432-7974-45d9-a038-89c522c7ca0a.png",childrens:[
			                  {id:"1553",name:"眼镜配件",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/a6e1262b-509b-451b-bafe-e801beb4439c.png",childrens:[
			                         {id:"1354",name:"游泳镜",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/0d303e62-12ec-465d-858b-1f558855b3e4.png"}
			                        ,{id:"904",name:"太阳镜",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/adcbb3a1-b1bd-4d66-b821-ffa7709f42c3.png"}
			                        ,{id:"905",name:"眼镜镜框",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/baa85d65-9770-4a05-b6d3-2544018f58cc.png"}
			               ]}
			                 ,{id:"1555",name:"装饰配件",tag:"0",image:"",childrens:[
			                         {id:"912",name:"男士腰带",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/18fa938a-daef-4b21-9221-e88a34349489.png"}
			                        ,{id:"913",name:"手套口罩",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/89fd58fc-4c72-4894-a9a1-4fcabdb0bdac.png"}
			                        ,{id:"918",name:"女士腰带/礼盒",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/b82bc0c1-87b7-4556-94d1-fba06e0f7445.png"}
			                        ,{id:"907",name:"丝巾披肩",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/38345eb4-8b64-4bcf-ac7b-f141e41a4394.png"}
			                        ,{id:"1689",name:"打火机",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201606/3a92bce3-abc9-45c6-ab55-32f6f78e7b9f.png"}
			               ]}
			                 ,{id:"1559",name:"钟表",tag:"0",image:"",childrens:[
			                         {id:"1067",name:"钟饰",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/e028c66e-495c-4d49-971d-a01fabc32837.png"}
			                        ,{id:"1256",name:"手表",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/3e965e40-d8f3-4331-bb4c-cdfa11636ef6.png"}
			                        ,{id:"1259",name:"智能手表",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/0a532d8e-4ec8-4d59-bd71-6505af5c6d3e.png"}
			                        ,{id:"1260",name:"座钟挂钟",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/86eadbbf-6462-44e7-914b-3d413390cc85.png"}
			               ]}
			                 ,{id:"1697",name:"珠宝首饰",tag:"0",image:"",childrens:[
			                         {id:"1706",name:"珠宝玉器",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/1648aaa7-1502-4ba3-adaf-bc546a0d9c79.png"}
			                        ,{id:"915",name:"袖扣",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/d7554439-2cce-4a30-a0ce-43f14df6ce8d.png"}
			                        ,{id:"1399",name:"金银首饰",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/cd409afa-6de7-4100-abbd-05cd4d07ce44.png"}
			               ]}
					   ]}
					   ,{id:"963",name:"办公耗材",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201605/70941c21-d56a-418d-ae38-63cc485b9c16.png",childrens:[
			                  {id:"968",name:"办公设备",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/6255c222-b047-4ad8-ae2b-b7409500541f.png",childrens:[
			                         {id:"1696",name:"考勤机",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/0b95169c-80f1-4bb7-b810-0179b92ed381.png"}
			                        ,{id:"973",name:"打印机/复印机/一体机",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/6e5ec784-11d6-40ad-8bc0-6bcc635c7396.png"}
			                        ,{id:"974",name:"电话传真",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/8488d8f3-c40c-4cc9-9d79-fa6af46dd692.png"}
			                        ,{id:"976",name:"投影仪",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/1f3be213-4f8f-4b24-9028-fa4c69ecd5ae.png"}
			                        ,{id:"1340",name:"保险柜/文件柜",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/1283b044-cc7f-4ace-92dd-1b76e3c7ece8.png"}
			                        ,{id:"1342",name:"点钞机/POS机",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/3430a763-6103-4f54-a2cc-669e0cec00ff.png"}
			                        ,{id:"1348",name:"装订封装机/碎纸机",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/51ee1730-120b-4bbb-8feb-02be4fba2db3.png"}
			               ]}
			                 ,{id:"1339",name:"办公耗材",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/14fe3fec-12ec-45ff-94ce-35834da2f389.png",childrens:[
			                         {id:"1388",name:"纸笔文具",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/89c76e2a-8b2f-4c63-bdcb-222c36b49fa3.png"}
			                        ,{id:"1390",name:"打印耗材",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/509c0de4-bfed-42dd-9479-7619a436da71.png"}
			                        ,{id:"1393",name:"办公文具",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/24fa633e-1e12-499b-bd51-61adc9966138.png"}
			                        ,{id:"1398",name:"画具画材",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/de850178-e62f-436c-b4f2-c54586b239b0.png"}
			               ]}
			                 ,{id:"1850",name:"安全监控",tag:"0",image:"",childrens:[
			                         {id:"1208",name:"DVR",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/4c12d113-3f7c-498c-aaa1-60ca5ab52617.png"}
			                        ,{id:"1209",name:"NVR",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/2b3fe5e5-42f8-4cfe-89e8-23f02c4b2f93.png"}
			                        ,{id:"1210",name:"摄像机",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/2943dbc5-353b-47fb-9b98-7f4bb7aca9d7.png"}
			                        ,{id:"1211",name:"监控耗材",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/38284da6-de28-4284-ae20-55608308e6e0.png"}
			                        ,{id:"1023",name:"威思通盒子",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/0ed3dc96-c24e-4044-bbd2-990355d8ed38.png"}
			               ]}
					   ]}
					   ,{id:"1024",name:"家装软饰",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201605/dc0d2f74-b557-4df5-946a-54231401dc0e.png",childrens:[
			                  {id:"1031",name:"家装家具",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/1f31c630-d195-4011-a834-82a4f3d38736.png",childrens:[
			                         {id:"1063",name:"装饰字画",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/62966406-5331-4c56-b3cb-4e5c0dc04e8b.png"}
			                        ,{id:"1068",name:"装饰摆件",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/da4eadd3-f9e4-4c67-aa9f-dade295c1b5f.png"}
			                        ,{id:"1070",name:"创意家居",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/8ced1cad-a2d1-452c-8378-38dbdad587bd.png"}
			               ]}
			                 ,{id:"1852",name:"照明灯具",tag:"0",image:"",childrens:[
			                         {id:"1039",name:"灯饰照明",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/2e69f7bb-14d2-4c99-9469-1fff7a0e82e9.png"}
			                        ,{id:"1079",name:"台灯",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/086f92b8-3533-493b-bed3-78e916233a73.jpg"}
			               ]}
			                 ,{id:"1320",name:"装饰画",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/0850b944-d8b6-4dac-bdd1-f3df24e2088d.png",childrens:[
			                         {id:"1337",name:"装饰画",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/274aee5a-cc60-4b13-b5e9-d23c730877be.png"}
			               ]}
			                 ,{id:"1025",name:"家装建材",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/c69cbe0d-7ed1-400b-8252-c3dcab30c19c.jpg",childrens:[
			                         {id:"1040",name:"厨房卫浴",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/6d6c8ab0-19a2-4442-957b-ded2f94a000f.png"}
			                        ,{id:"1044",name:"装饰材料",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/f32d243c-d5ea-41e8-8024-e8437b05324c.png"}
			                        ,{id:"1170",name:"门",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/efc5aa96-4360-4d44-84e8-e50210fe8a45.png"}
			               ]}
			                 ,{id:"1028",name:"家具厨具",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/a8e4e218-746a-4508-8949-d88ab898150d.jpg",childrens:[
			                         {id:"1093",name:"书房家具",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/803894d5-7674-4813-8c27-c41de0b64c50.jpg"}
			                        ,{id:"1096",name:"商业办公",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/3b60ba9a-dbd7-4198-8dbb-cc88286fa52d.jpg"}
			                        ,{id:"1090",name:"卧室家具",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/5b81c6bd-3fa5-4d84-8800-f9063f6eeb42.jpg"}
			               ]}
			                 ,{id:"1030",name:"日用家纺",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/beee8567-b108-489b-96ac-02d4fc0a7e2a.png",childrens:[
			                         {id:"1059",name:"地毯地垫",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/8729c458-dbfd-415f-9cbc-4c83e8a46011.png"}
			                        ,{id:"1076",name:"缝纫/针织用品",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/96dd7c09-f9d8-43ef-9b8b-2caa2d3acc85.png"}
			                        ,{id:"1099",name:"床品套件",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/eea956a2-708a-4f81-986d-f9e01be6685a.jpg"}
			                        ,{id:"1100",name:"被子",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/67d6ae35-872a-455a-8f44-9571a3d17c3d.jpg"}
			                        ,{id:"1102",name:"凉席",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/8aa3fed7-c070-4dc2-aca8-1e7c5d329bd1.jpg"}
			                        ,{id:"1110",name:"窗帘/窗纱",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/e1effdb5-6d1b-4687-b748-ed93e5e08639.jpg"}
			               ]}
			                 ,{id:"1085",name:"五金电气",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/df17bf73-c206-4efa-a120-8873c6e0e05d.png",childrens:[
			                         {id:"1048",name:"开关插座",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/70fce6df-49ee-421b-9593-2468d19c3274.png"}
			                        ,{id:"1171",name:"门锁",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/e97c8af8-29ef-418a-a649-b3b3e8d3c3b2.png"}
			               ]}
					   ]}
					   ,{id:"1690",name:"花鸟玩娱",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/bd69f492-6240-4c58-abce-9d967beba77f.png",childrens:[
			                  {id:"1855",name:"渔具",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/ca64a302-ef76-4558-be43-c2f1271d6fdf.png",childrens:[
			               ]}
			                 ,{id:"1691",name:"鲜花园艺",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/abe8ec6e-5509-4c38-a3d2-d7359cee87ca.png",childrens:[
			               ]}
			                 ,{id:"1692",name:"鱼缸喂养",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/c24cdfb0-2782-4699-83b7-10c3f1af53e5.png",childrens:[
			               ]}
			                 ,{id:"1699",name:"鱼食鱼缸",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/efc6803e-bb9b-402a-a91c-58669919257b.png",childrens:[
			               ]}
			                 ,{id:"1853",name:"文化玩娱",tag:"0",image:"",childrens:[
			                         {id:"1865",name:"其他用品",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/7e88f23d-20d3-4cb7-a71e-96cf62bf1678.png"}
			                        ,{id:"1703",name:"书法绘画",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/7a3816a5-d6f4-45a9-ab2f-d42cc8e810ea.png"}
			                        ,{id:"1704",name:"把玩物件",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/2941479f-e672-44fd-8486-ffd9093297bf.png"}
			                        ,{id:"1319",name:"工艺品",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/cdce9b2f-5bb6-4196-bd07-caa34189b279.png"}
			                        ,{id:"1328",name:"根雕木艺",tag:"0",image:"http://image.tiaohuo.com/upload/image/201505/d4e19fa8-88ea-4430-8a2a-41166a76714f.png"}
			                        ,{id:"1332",name:"水晶琉璃仿玉",tag:"0",image:"http://image.tiaohuo.com/upload/image/201509/40e8e825-a880-4fd2-9668-1f457db6c9ce.png"}
			                        ,{id:"1710",name:"其他收藏品",tag:"0",image:"http://cdn.tiaohuo.com/upload/image/201608/b29459c0-c2dd-44eb-8587-83ce6d918a9c.png"}
			               ]}
					   ]}
	]
}
function getCategoryChildRens(id) {
	for(var i=0;i<categorys.length;i++)
	{
	  if (categorys[i].id==id) {
	     return categorys[i].childrens;
	  }
	}	
}


var citys;
function initCity() {
	citys = [
		{id:"1792",name:"随州",status:"none",phonetic:"s",tag:0}
		,{id:"3072",name:"海西",status:"none",phonetic:"h",tag:0}
		,{id:"1281",name:"新余",status:"none",phonetic:"x",tag:0}
		,{id:"514",name:"丹东",status:"none",phonetic:"d",tag:0}
		,{id:"770",name:"黑河",status:"none",phonetic:"h",tag:0}
		,{id:"2050",name:"河源",status:"none",phonetic:"h",tag:0}
		,{id:"2307",name:"攀枝花",status:"none",phonetic:"p",tag:0}
		,{id:"1284",name:"鹰潭",status:"none",phonetic:"y",tag:0}
		,{id:"1540",name:"洛阳",status:"none",phonetic:"l",tag:0}
		,{id:"1796",name:"恩施",status:"none",phonetic:"e",tag:0}
		,{id:"1029",name:"合肥",status:"none",phonetic:"h",tag:0}
		,{id:"2822",name:"铜川",status:"none",phonetic:"t",tag:0}
		,{id:"2567",name:"黔南",status:"none",phonetic:"q",tag:0}
		,{id:"3079",name:"银川",status:"none",phonetic:"y",tag:0}
		,{id:"1288",name:"赣州",status:"none",phonetic:"g",tag:0}
		,{id:"521",name:"锦州",status:"none",phonetic:"j",tag:0}
		,{id:"777",name:"绥化",status:"none",phonetic:"s",tag:0}
		,{id:"2057",name:"阳江",status:"none",phonetic:"y",tag:0}
		,{id:"2313",name:"泸州",status:"none",phonetic:"l",tag:0}
		,{id:"2827",name:"宝鸡",status:"none",phonetic:"b",tag:0}
		,{id:"2062",name:"清远",status:"none",phonetic:"q",tag:0}
		,{id:"3086",name:"石嘴山",status:"none",phonetic:"s",tag:0}
		,{id:"1039",name:"芜湖",status:"none",phonetic:"w",tag:0}
		,{id:"529",name:"营口",status:"none",phonetic:"y",tag:0}
		,{id:"2321",name:"德阳",status:"none",phonetic:"d",tag:0}
		,{id:"1810",name:"长沙",status:"none",phonetic:"z",tag:0}
		,{id:"3090",name:"吴忠",status:"none",phonetic:"w",tag:0}
		,{id:"788",name:"大兴安岭",status:"none",phonetic:"d",tag:0}
		,{id:"1556",name:"平顶山",status:"none",phonetic:"p",tag:0}
		,{id:"2581",name:"昆明",status:"none",phonetic:"k",tag:0}
		,{id:"2071",name:"东莞",status:"none",phonetic:"d",tag:0}
		,{id:"536",name:"阜新",status:"none",phonetic:"f",tag:0}
		,{id:"1048",name:"蚌埠",status:"none",phonetic:"b",tag:0}
		,{id:"2072",name:"中山",status:"none",phonetic:"z",tag:0}
		,{id:"2328",name:"绵阳",status:"none",phonetic:"m",tag:0}
		,{id:"2840",name:"咸阳",status:"none",phonetic:"x",tag:0}
		,{id:"3096",name:"固原",status:"none",phonetic:"g",tag:0}
		,{id:"2073",name:"潮州",status:"none",phonetic:"c",tag:0}
		,{id:"1307",name:"吉安",status:"none",phonetic:"j",tag:0}
		,{id:"1820",name:"株洲",status:"none",phonetic:"z",tag:0}
		,{id:"2077",name:"揭阳",status:"none",phonetic:"j",tag:0}
		,{id:"3102",name:"中卫",status:"none",phonetic:"z",tag:0}
		,{id:"1567",name:"安阳",status:"none",phonetic:"a",tag:0}
		,{id:"544",name:"辽阳",status:"none",phonetic:"l",tag:0}
		,{id:"1056",name:"淮南",status:"none",phonetic:"h",tag:0}
		,{id:"2338",name:"广元",status:"none",phonetic:"g",tag:0}
		,{id:"2083",name:"云浮",status:"none",phonetic:"y",tag:0}
		,{id:"2596",name:"曲靖",status:"none",phonetic:"q",tag:0}
		,{id:"1830",name:"湘潭",status:"none",phonetic:"x",tag:0}
		,{id:"1063",name:"马鞍山",status:"none",phonetic:"m",tag:0}
		,{id:"2855",name:"渭南",status:"none",phonetic:"w",tag:0}
		,{id:"552",name:"盘锦",status:"none",phonetic:"p",tag:0}
		,{id:"1321",name:"宜春",status:"none",phonetic:"y",tag:0}
		,{id:"1577",name:"鹤壁",status:"none",phonetic:"h",tag:0}
		,{id:"2090",name:"南宁",status:"none",phonetic:"n",tag:0}
		,{id:"2346",name:"遂宁",status:"none",phonetic:"s",tag:0}
		,{id:"811",name:"南京",status:"none",phonetic:"n",tag:0}
		,{id:"1836",name:"衡阳",status:"none",phonetic:"h",tag:0}
		,{id:"557",name:"铁岭",status:"none",phonetic:"t",tag:0}
		,{id:"1070",name:"淮北",status:"none",phonetic:"h",tag:0}
		,{id:"2606",name:"玉溪",status:"none",phonetic:"y",tag:0}
		,{id:"1583",name:"新乡",status:"none",phonetic:"x",tag:0}
		,{id:"2352",name:"内江",status:"none",phonetic:"n",tag:0}
		,{id:"1075",name:"铜陵",status:"none",phonetic:"t",tag:0}
		,{id:"2867",name:"延安",status:"none",phonetic:"y",tag:0}
		,{id:"1332",name:"抚州",status:"none",phonetic:"f",tag:0}
		,{id:"565",name:"朝阳",status:"none",phonetic:"c",tag:0}
		,{id:"2358",name:"乐山",status:"none",phonetic:"l",tag:0}
		,{id:"2103",name:"柳州",status:"none",phonetic:"l",tag:0}
		,{id:"1080",name:"安庆",status:"none",phonetic:"a",tag:0}
		,{id:"2616",name:"保山",status:"none",phonetic:"b",tag:0}
		,{id:"825",name:"无锡",status:"none",phonetic:"w",tag:0}
		,{id:"1849",name:"邵阳",status:"none",phonetic:"s",tag:0}
		,{id:"1596",name:"焦作",status:"none",phonetic:"j",tag:0}
		,{id:"573",name:"葫芦岛",status:"none",phonetic:"h",tag:0}
		,{id:"2622",name:"昭通",status:"none",phonetic:"z",tag:0}
		,{id:"1344",name:"上饶",status:"none",phonetic:"s",tag:0}
		,{id:"2881",name:"汉中",status:"none",phonetic:"h",tag:0}
		,{id:"834",name:"徐州",status:"none",phonetic:"x",tag:0}
		,{id:"2114",name:"桂林",status:"none",phonetic:"g",tag:0}
		,{id:"2370",name:"南充",status:"none",phonetic:"n",tag:0}
		,{id:"1092",name:"黄山",status:"none",phonetic:"h",tag:0}
		,{id:"581",name:"长春",status:"none",phonetic:"z",tag:0}
		,{id:"1862",name:"岳阳",status:"none",phonetic:"y",tag:0}
		,{id:"1607",name:"濮阳",status:"none",phonetic:"p",tag:0}
		,{id:"2634",name:"丽江",status:"none",phonetic:"l",tag:0}
		,{id:"2380",name:"眉山",status:"none",phonetic:"m",tag:0}
		,{id:"845",name:"常州",status:"none",phonetic:"c",tag:0}
		,{id:"2893",name:"榆林",status:"none",phonetic:"y",tag:0}
		,{id:"334",name:"汾西",status:"none",phonetic:"f",tag:0}
		,{id:"1358",name:"济南",status:"none",phonetic:"j",tag:0}
		,{id:"1614",name:"许昌",status:"none",phonetic:"x",tag:0}
		,{id:"592",name:"吉林",status:"none",phonetic:"j",tag:0}
		,{id:"1872",name:"常德",status:"none",phonetic:"c",tag:0}
		,{id:"2640",name:"普洱",status:"none",phonetic:"p",tag:0}
		,{id:"337",name:"吕梁",status:"none",phonetic:"l",tag:0}
		,{id:"2387",name:"宜宾",status:"none",phonetic:"y",tag:0}
		,{id:"2132",name:"梧州",status:"none",phonetic:"w",tag:0}
		,{id:"853",name:"苏州",status:"none",phonetic:"s",tag:0}
		,{id:"1109",name:"阜阳",status:"none",phonetic:"f",tag:0}
		,{id:"1621",name:"漯河",status:"none",phonetic:"l",tag:0}
		,{id:"1369",name:"青岛",status:"none",phonetic:"q",tag:0}
		,{id:"3161",name:"克孜勒苏",status:"none",phonetic:"k",tag:0}
		,{id:"602",name:"四平",status:"none",phonetic:"s",tag:0}
		,{id:"1882",name:"张家界",status:"none",phonetic:"z",tag:0}
		,{id:"2906",name:"安康",status:"none",phonetic:"a",tag:0}
		,{id:"1627",name:"三门峡",status:"none",phonetic:"s",tag:0}
		,{id:"2651",name:"临沧",status:"none",phonetic:"l",tag:0}
		,{id:"2140",name:"北海",status:"none",phonetic:"b",tag:0}
		,{id:"1118",name:"宿州",status:"none",phonetic:"s",tag:0}
		,{id:"2398",name:"广安",status:"none",phonetic:"g",tag:0}
		,{id:"3166",name:"喀什",status:"none",phonetic:"k",tag:0}
		,{id:"863",name:"南通",status:"none",phonetic:"n",tag:0}
		,{id:"1887",name:"益阳",status:"none",phonetic:"y",tag:0}
		,{id:"352",name:"呼和浩特",status:"none",phonetic:"h",tag:0}
		,{id:"609",name:"辽源",status:"none",phonetic:"l",tag:0}
		,{id:"2145",name:"防城港",status:"none",phonetic:"f",tag:0}
		,{id:"1634",name:"南阳",status:"none",phonetic:"n",tag:0}
		,{id:"2404",name:"达州",status:"none",phonetic:"d",tag:0}
		,{id:"2660",name:"楚雄",status:"none",phonetic:"c",tag:0}
		,{id:"2917",name:"商洛",status:"none",phonetic:"s",tag:0}
		,{id:"614",name:"通化",status:"none",phonetic:"t",tag:0}
		,{id:"1382",name:"淄博",status:"none",phonetic:"z",tag:0}
		,{id:"1894",name:"郴州",status:"none",phonetic:"c",tag:0}
		,{id:"2150",name:"钦州",status:"none",phonetic:"q",tag:0}
		,{id:"872",name:"连云港",status:"none",phonetic:"l",tag:0}
		,{id:"362",name:"包头",status:"none",phonetic:"b",tag:0}
		,{id:"2155",name:"贵港",status:"none",phonetic:"g",tag:0}
		,{id:"1132",name:"亳州",status:"none",phonetic:"b",tag:0}
		,{id:"2412",name:"雅安",status:"none",phonetic:"y",tag:0}
		,{id:"622",name:"白山",status:"none",phonetic:"b",tag:0}
		,{id:"2926",name:"兰州",status:"none",phonetic:"l",tag:0}
		,{id:"1391",name:"枣庄",status:"none",phonetic:"z",tag:0}
		,{id:"2671",name:"红河",status:"none",phonetic:"h",tag:0}
		,{id:"880",name:"淮安",status:"none",phonetic:"h",tag:0}
		,{id:"1648",name:"商丘",status:"none",phonetic:"s",tag:0}
		,{id:"1137",name:"池州",status:"none",phonetic:"c",tag:0}
		,{id:"2161",name:"玉林",status:"none",phonetic:"y",tag:0}
		,{id:"1906",name:"永州",status:"none",phonetic:"y",tag:0}
		,{id:"372",name:"乌海",status:"none",phonetic:"w",tag:0}
		,{id:"3188",name:"伊犁",status:"none",phonetic:"y",tag:0}
		,{id:"629",name:"松原",status:"none",phonetic:"s",tag:0}
		,{id:"2421",name:"巴中",status:"none",phonetic:"b",tag:0}
		,{id:"1142",name:"宣城",status:"none",phonetic:"x",tag:0}
		,{id:"1398",name:"东营",status:"none",phonetic:"d",tag:0}
		,{id:"1399",name:"东营",status:"none",phonetic:"d",tag:0}
		,{id:"2935",name:"嘉峪关",status:"none",phonetic:"j",tag:0}
		,{id:"376",name:"赤峰",status:"none",phonetic:"c",tag:0}
		,{id:"2168",name:"百色",status:"none",phonetic:"b",tag:0}
		,{id:"2936",name:"金昌",status:"none",phonetic:"j",tag:0}
		,{id:"889",name:"盐城",status:"none",phonetic:"y",tag:0}
		,{id:"1658",name:"信阳",status:"none",phonetic:"x",tag:0}
		,{id:"2426",name:"资阳",status:"none",phonetic:"z",tag:0}
		,{id:"635",name:"白城",status:"none",phonetic:"b",tag:0}
		,{id:"2939",name:"白银",status:"none",phonetic:"b",tag:0}
		,{id:"1404",name:"烟台",status:"none",phonetic:"y",tag:0}
		,{id:"2685",name:"文山",status:"none",phonetic:"w",tag:0}
		,{id:"1918",name:"怀化",status:"none",phonetic:"h",tag:0}
		,{id:"1151",name:"福州",status:"none",phonetic:"f",tag:0}
		,{id:"2431",name:"阿坝",status:"none",phonetic:"a",tag:0}
		,{id:"3199",name:"塔城",status:"none",phonetic:"t",tag:0}
		,{id:"641",name:"延边",status:"none",phonetic:"y",tag:0}
		,{id:"2945",name:"天水",status:"none",phonetic:"t",tag:0}
		,{id:"899",name:"扬州",status:"none",phonetic:"y",tag:0}
		,{id:"389",name:"通辽",status:"none",phonetic:"t",tag:0}
		,{id:"1669",name:"周口",status:"none",phonetic:"z",tag:0}
		,{id:"2181",name:"贺州",status:"none",phonetic:"h",tag:0}
		,{id:"2694",name:"西双版纳",status:"none",phonetic:"x",tag:0}
		,{id:"1417",name:"潍坊",status:"none",phonetic:"w",tag:0}
		,{id:"2953",name:"武威",status:"none",phonetic:"w",tag:0}
		,{id:"906",name:"镇江",status:"none",phonetic:"z",tag:0}
		,{id:"2186",name:"河池",status:"none",phonetic:"h",tag:0}
		,{id:"2698",name:"大理",status:"none",phonetic:"d",tag:0}
		,{id:"651",name:"哈尔滨",status:"none",phonetic:"h",tag:0}
		,{id:"1931",name:"娄底",status:"none",phonetic:"l",tag:0}
		,{id:"1165",name:"厦门",status:"none",phonetic:"s",tag:0}
		,{id:"2445",name:"甘孜",status:"none",phonetic:"g",tag:0}
		,{id:"398",name:"鄂尔多斯",status:"none",phonetic:"e",tag:0}
		,{id:"2958",name:"张掖",status:"none",phonetic:"z",tag:0}
		,{id:"1680",name:"驻马店",status:"none",phonetic:"z",tag:0}
		,{id:"913",name:"泰州",status:"none",phonetic:"t",tag:0}
		,{id:"1937",name:"湘西",status:"none",phonetic:"x",tag:0}
		,{id:"1172",name:"莆田",status:"none",phonetic:"p",tag:0}
		,{id:"3220",name:"台北",status:"none",phonetic:"t",tag:0}
		,{id:"2965",name:"平凉",status:"none",phonetic:"p",tag:0}
		,{id:"3221",name:"高雄",status:"none",phonetic:"g",tag:0}
		,{id:"1430",name:"济宁",status:"none",phonetic:"j",tag:0}
		,{id:"2198",name:"来宾",status:"none",phonetic:"l",tag:0}
		,{id:"3222",name:"台南",status:"none",phonetic:"t",tag:0}
		,{id:"407",name:"呼伦贝尔",status:"none",phonetic:"h",tag:0}
		,{id:"2711",name:"德宏",status:"none",phonetic:"d",tag:0}
		,{id:"3223",name:"台中",status:"none",phonetic:"t",tag:0}
		,{id:"920",name:"宿迁",status:"none",phonetic:"s",tag:0}
		,{id:"2712",name:"瑞丽",status:"none",phonetic:"r",tag:0}
		,{id:"3224",name:"金门",status:"none",phonetic:"j",tag:0}
		,{id:"3225",name:"南投",status:"none",phonetic:"n",tag:0}
		,{id:"1178",name:"三明",status:"none",phonetic:"s",tag:0}
		,{id:"3226",name:"基隆",status:"none",phonetic:"j",tag:0}
		,{id:"1947",name:"广州",status:"none",phonetic:"g",tag:0}
		,{id:"3227",name:"新竹",status:"none",phonetic:"x",tag:0}
		,{id:"3228",name:"嘉义",status:"none",phonetic:"j",tag:0}
		,{id:"1693",name:"武汉",status:"none",phonetic:"w",tag:0}
		,{id:"2205",name:"崇左",status:"none",phonetic:"c",tag:0}
		,{id:"2717",name:"怒江",status:"none",phonetic:"n",tag:0}
		,{id:"2973",name:"酒泉",status:"none",phonetic:"j",tag:0}
		,{id:"3229",name:"新北",status:"none",phonetic:"x",tag:0}
		,{id:"670",name:"齐齐哈尔",status:"none",phonetic:"q",tag:0}
		,{id:"3230",name:"宜兰",status:"none",phonetic:"y",tag:0}
		,{id:"927",name:"杭州",status:"none",phonetic:"h",tag:0}
		,{id:"3231",name:"新竹",status:"none",phonetic:"x",tag:0}
		,{id:"2464",name:"凉山",status:"none",phonetic:"l",tag:0}
		,{id:"3232",name:"桃园",status:"none",phonetic:"t",tag:0}
		,{id:"3233",name:"苗栗",status:"none",phonetic:"m",tag:0}
		,{id:"2722",name:"迪庆",status:"none",phonetic:"d",tag:0}
		,{id:"3234",name:"彰化",status:"none",phonetic:"z",tag:0}
		,{id:"1443",name:"泰安",status:"none",phonetic:"t",tag:0}
		,{id:"3235",name:"嘉义",status:"none",phonetic:"j",tag:0}
		,{id:"3236",name:"云林",status:"none",phonetic:"y",tag:0}
		,{id:"421",name:"巴彦淖尔",status:"none",phonetic:"b",tag:0}
		,{id:"2981",name:"庆阳",status:"none",phonetic:"q",tag:0}
		,{id:"3237",name:"屏东",status:"none",phonetic:"p",tag:0}
		,{id:"2214",name:"海口",status:"none",phonetic:"h",tag:0}
		,{id:"3238",name:"台东",status:"none",phonetic:"t",tag:0}
		,{id:"1191",name:"泉州",status:"none",phonetic:"q",tag:0}
		,{id:"2727",name:"拉萨",status:"none",phonetic:"l",tag:0}
		,{id:"3239",name:"花莲",status:"none",phonetic:"h",tag:0}
		,{id:"1960",name:"韶关",status:"none",phonetic:"s",tag:0}
		,{id:"3240",name:"澎湖",status:"none",phonetic:"p",tag:0}
		,{id:"3241",name:"中正",status:"none",phonetic:"z",tag:0}
		,{id:"1450",name:"威海",status:"none",phonetic:"w",tag:0}
		,{id:"3242",name:"大同",status:"none",phonetic:"d",tag:0}
		,{id:"1707",name:"黄石",status:"none",phonetic:"h",tag:0}
		,{id:"2219",name:"三亚",status:"none",phonetic:"s",tag:0}
		,{id:"3243",name:"中山",status:"none",phonetic:"z",tag:0}
		,{id:"3244",name:"松山",status:"none",phonetic:"s",tag:0}
		,{id:"429",name:"乌兰察布",status:"none",phonetic:"w",tag:0}
		,{id:"941",name:"宁波",status:"none",phonetic:"n",tag:0}
		,{id:"3245",name:"大安",status:"none",phonetic:"d",tag:0}
		,{id:"2990",name:"定西",status:"none",phonetic:"d",tag:0}
		,{id:"3246",name:"万华",status:"none",phonetic:"w",tag:0}
		,{id:"687",name:"鸡西",status:"none",phonetic:"j",tag:0}
		,{id:"1455",name:"日照",status:"none",phonetic:"r",tag:0}
		,{id:"3247",name:"信义",status:"none",phonetic:"x",tag:0}
		,{id:"2736",name:"昌都",status:"none",phonetic:"c",tag:0}
		,{id:"3248",name:"士林",status:"none",phonetic:"s",tag:0}
		,{id:"3249",name:"北投",status:"none",phonetic:"b",tag:0}
		,{id:"1714",name:"十堰",status:"none",phonetic:"s",tag:0}
		,{id:"3250",name:"内湖",status:"none",phonetic:"n",tag:0}
		,{id:"1971",name:"深圳",status:"none",phonetic:"s",tag:0}
		,{id:"2483",name:"贵阳",status:"none",phonetic:"g",tag:0}
		,{id:"3251",name:"南港",status:"none",phonetic:"n",tag:0}
		,{id:"1204",name:"漳州",status:"none",phonetic:"z",tag:0}
		,{id:"1460",name:"莱芜",status:"none",phonetic:"l",tag:0}
		,{id:"3252",name:"文山",status:"none",phonetic:"w",tag:0}
		,{id:"2998",name:"陇南",status:"none",phonetic:"l",tag:0}
		,{id:"1463",name:"临沂",status:"none",phonetic:"l",tag:0}
		,{id:"3255",name:"新兴",status:"none",phonetic:"x",tag:0}
		,{id:"3256",name:"前金",status:"none",phonetic:"q",tag:0}
		,{id:"441",name:"兴安盟",status:"none",phonetic:"x",tag:0}
		,{id:"697",name:"鹤岗",status:"none",phonetic:"h",tag:0}
		,{id:"953",name:"温州",status:"none",phonetic:"w",tag:0}
		,{id:"3257",name:"芩雅",status:"none",phonetic:"q",tag:0}
		,{id:"1978",name:"珠海",status:"none",phonetic:"z",tag:0}
		,{id:"3258",name:"盐埕",status:"none",phonetic:"y",tag:0}
		,{id:"1723",name:"宜昌",status:"none",phonetic:"y",tag:0}
		,{id:"3259",name:"鼓山",status:"none",phonetic:"g",tag:0}
		,{id:"2748",name:"山南",status:"none",phonetic:"s",tag:0}
		,{id:"3260",name:"旗津",status:"none",phonetic:"q",tag:0}
		,{id:"701",name:"兴安",status:"none",phonetic:"x",tag:0}
		,{id:"3261",name:"前镇",status:"none",phonetic:"q",tag:0}
		,{id:"1982",name:"汕头",status:"none",phonetic:"s",tag:0}
		,{id:"2494",name:"六盘水",status:"none",phonetic:"l",tag:0}
		,{id:"3262",name:"三民",status:"none",phonetic:"s",tag:0}
		,{id:"3263",name:"左营",status:"none",phonetic:"z",tag:0}
		,{id:"448",name:"锡林郭勒",status:"none",phonetic:"x",tag:0}
		,{id:"1216",name:"南平",status:"none",phonetic:"n",tag:0}
		,{id:"3008",name:"临夏",status:"none",phonetic:"l",tag:0}
		,{id:"3264",name:"楠梓",status:"none",phonetic:"n",tag:0}
		,{id:"3265",name:"小港",status:"none",phonetic:"x",tag:0}
		,{id:"706",name:"双鸭山",status:"none",phonetic:"s",tag:0}
		,{id:"3266",name:"仁爱",status:"none",phonetic:"r",tag:0}
		,{id:"2499",name:"遵义",status:"none",phonetic:"z",tag:0}
		,{id:"3267",name:"信义",status:"none",phonetic:"x",tag:0}
		,{id:"1476",name:"德州",status:"none",phonetic:"d",tag:0}
		,{id:"3268",name:"中正",status:"none",phonetic:"z",tag:0}
		,{id:"965",name:"嘉兴",status:"none",phonetic:"j",tag:0}
		,{id:"3269",name:"中山",status:"none",phonetic:"z",tag:0}
		,{id:"1990",name:"佛山",status:"none",phonetic:"f",tag:0}
		,{id:"3270",name:"安乐",status:"none",phonetic:"a",tag:0}
		,{id:"3271",name:"暖暖",status:"none",phonetic:"n",tag:0}
		,{id:"3272",name:"七堵",status:"none",phonetic:"q",tag:0}
		,{id:"2761",name:"日喀则",status:"none",phonetic:"r",tag:0}
		,{id:"3017",name:"甘南",status:"none",phonetic:"g",tag:0}
		,{id:"3273",name:"中西",status:"none",phonetic:"z",tag:0}
		,{id:"715",name:"大庆",status:"none",phonetic:"d",tag:0}
		,{id:"1227",name:"龙岩",status:"none",phonetic:"l",tag:0}
		,{id:"1996",name:"江门",status:"none",phonetic:"j",tag:0}
		,{id:"461",name:"阿拉善",status:"none",phonetic:"a",tag:0}
		,{id:"973",name:"湖州",status:"none",phonetic:"h",tag:0}
		,{id:"3277",name:"安平",status:"none",phonetic:"a",tag:0}
		,{id:"3278",name:"安南",status:"none",phonetic:"a",tag:0}
		,{id:"1488",name:"聊城",status:"none",phonetic:"l",tag:0}
		,{id:"3281",name:"香山",status:"none",phonetic:"x",tag:0}
		,{id:"466",name:"沈阳",status:"none",phonetic:"s",tag:0}
		,{id:"2514",name:"安顺",status:"none",phonetic:"a",tag:0}
		,{id:"979",name:"绍兴",status:"none",phonetic:"s",tag:0}
		,{id:"1235",name:"宁德",status:"none",phonetic:"n",tag:0}
		,{id:"1747",name:"鄂州",status:"none",phonetic:"e",tag:0}
		,{id:"3027",name:"西宁",status:"none",phonetic:"x",tag:0}
		,{id:"2004",name:"湛江",status:"none",phonetic:"z",tag:0}
		,{id:"725",name:"伊春",status:"none",phonetic:"y",tag:0}
		,{id:"1751",name:"荆门",status:"none",phonetic:"j",tag:0}
		,{id:"3287",name:"北屯",status:"none",phonetic:"b",tag:0}
		,{id:"3288",name:"西屯",status:"none",phonetic:"x",tag:0}
		,{id:"1497",name:"滨州",status:"none",phonetic:"b",tag:0}
		,{id:"3289",name:"南屯",status:"none",phonetic:"n",tag:0}
		,{id:"986",name:"金华",status:"none",phonetic:"j",tag:0}
		,{id:"3035",name:"海东",status:"none",phonetic:"h",tag:0}
		,{id:"2780",name:"那曲",status:"none",phonetic:"n",tag:0}
		,{id:"1757",name:"孝感",status:"none",phonetic:"x",tag:0}
		,{id:"1246",name:"南昌",status:"none",phonetic:"n",tag:0}
		,{id:"2014",name:"茂名",status:"none",phonetic:"m",tag:0}
		,{id:"480",name:"大连",status:"none",phonetic:"d",tag:0}
		,{id:"3296",name:"九龙城",status:"none",phonetic:"j",tag:0}
		,{id:"1505",name:"菏泽",status:"none",phonetic:"h",tag:0}
		,{id:"3297",name:"油尖旺",status:"none",phonetic:"y",tag:0}
		,{id:"2530",name:"铜仁",status:"none",phonetic:"t",tag:0}
		,{id:"3042",name:"海北",status:"none",phonetic:"h",tag:0}
		,{id:"3298",name:"深水埗",status:"none",phonetic:"s",tag:0}
		,{id:"3299",name:"黄大仙",status:"none",phonetic:"h",tag:0}
		,{id:"996",name:"衢州",status:"none",phonetic:"q",tag:0}
		,{id:"3300",name:"观塘",status:"none",phonetic:"g",tag:0}
		,{id:"1765",name:"荆州",status:"none",phonetic:"j",tag:0}
		,{id:"2021",name:"肇庆",status:"none",phonetic:"z",tag:0}
		,{id:"3301",name:"中西",status:"none",phonetic:"z",tag:0}
		,{id:"743",name:"佳木斯",status:"none",phonetic:"j",tag:0}
		,{id:"2791",name:"阿里",status:"none",phonetic:"a",tag:0}
		,{id:"3047",name:"黄南",status:"none",phonetic:"h",tag:0}
		,{id:"1256",name:"景德镇",status:"none",phonetic:"j",tag:0}
		,{id:"2280",name:"成都",status:"none",phonetic:"c",tag:0}
		,{id:"3306",name:"大埔",status:"none",phonetic:"d",tag:0}
		,{id:"491",name:"鞍山",status:"none",phonetic:"a",tag:0}
		,{id:"1003",name:"舟山",status:"none",phonetic:"z",tag:0}
		,{id:"3307",name:"沙田",status:"none",phonetic:"s",tag:0}
		,{id:"1516",name:"郑州",status:"none",phonetic:"z",tag:0}
		,{id:"3052",name:"海南",status:"none",phonetic:"h",tag:0}
		,{id:"3308",name:"西贡",status:"none",phonetic:"x",tag:0}
		,{id:"1261",name:"萍乡",status:"none",phonetic:"p",tag:0}
		,{id:"2541",name:"黔西南",status:"none",phonetic:"q",tag:0}
		,{id:"3309",name:"元朗",status:"none",phonetic:"y",tag:0}
		,{id:"1774",name:"黄冈",status:"none",phonetic:"h",tag:0}
		,{id:"2030",name:"惠州",status:"none",phonetic:"h",tag:0}
		,{id:"3310",name:"屯门",status:"none",phonetic:"t",tag:0}
		,{id:"2799",name:"林芝",status:"none",phonetic:"l",tag:0}
		,{id:"3311",name:"荃湾",status:"none",phonetic:"q",tag:0}
		,{id:"1008",name:"台州",status:"none",phonetic:"t",tag:0}
		,{id:"3312",name:"葵青",status:"none",phonetic:"k",tag:0}
		,{id:"3313",name:"离岛",status:"none",phonetic:"l",tag:0}
		,{id:"754",name:"七台河",status:"none",phonetic:"q",tag:0}
		,{id:"3058",name:"果洛",status:"none",phonetic:"g",tag:0}
		,{id:"499",name:"抚顺",status:"none",phonetic:"f",tag:0}
		,{id:"1267",name:"九江",status:"none",phonetic:"j",tag:0}
		,{id:"2036",name:"梅州",status:"none",phonetic:"m",tag:0}
		,{id:"2550",name:"黔东南",status:"none",phonetic:"q",tag:0}
		,{id:"759",name:"牡丹江",status:"none",phonetic:"m",tag:0}
		,{id:"2808",name:"西安",status:"none",phonetic:"x",tag:0}
		,{id:"1529",name:"开封",status:"none",phonetic:"k",tag:0}
		,{id:"1785",name:"咸宁",status:"none",phonetic:"x",tag:0}
		,{id:"3065",name:"玉树",status:"none",phonetic:"y",tag:0}
		,{id:"1018",name:"丽水",status:"none",phonetic:"l",tag:0}
		,{id:"507",name:"本溪",status:"none",phonetic:"b",tag:0}
		,{id:"3323",name:"中国",status:"none",phonetic:"z",tag:0}
		,{id:"2300",name:"自贡",status:"none",phonetic:"z",tag:0}
		,{id:"3324",name:"滨湖区",status:"none",phonetic:"b",tag:0}
		,{id:"2045",name:"汕尾",status:"none",phonetic:"s",tag:0}
		,{id:"926",name:"浙江",status:"none",phonetic:"z",tag:0}
		,{id:"792",name:"上海",status:"none",phonetic:"s",tag:0}
		,{id:"1028",name:"安徽",status:"none",phonetic:"a",tag:0}
		,{id:"1",name:"北京",status:"none",phonetic:"b",tag:0}
		,{id:"1357",name:"山东",status:"none",phonetic:"s",tag:0}
		,{id:"219",name:"山西",status:"none",phonetic:"s",tag:0}
		,{id:"1515",name:"河南",status:"none",phonetic:"h",tag:0}
		,{id:"35",name:"河北",status:"none",phonetic:"h",tag:0}
		,{id:"2580",name:"云南",status:"none",phonetic:"y",tag:0}
		,{id:"2482",name:"贵州",status:"none",phonetic:"g",tag:0}
		,{id:"2279",name:"四川",status:"none",phonetic:"s",tag:0}
		,{id:"1946",name:"广东",status:"none",phonetic:"g",tag:0}
		,{id:"2089",name:"广西",status:"none",phonetic:"g",tag:0}
		,{id:"1150",name:"福建",status:"none",phonetic:"f",tag:0}
		,{id:"1245",name:"江西",status:"none",phonetic:"j",tag:0}
		,{id:"1809",name:"湖南",status:"none",phonetic:"h",tag:0}
		,{id:"1692",name:"湖北",status:"none",phonetic:"h",tag:0}
		,{id:"465",name:"辽宁",status:"none",phonetic:"l",tag:0}
		,{id:"580",name:"吉林",status:"none",phonetic:"j",tag:0}
		,{id:"650",name:"黑龙江",status:"none",phonetic:"h",tag:0}
		,{id:"2807",name:"陕西",status:"none",phonetic:"s",tag:0}
		,{id:"2925",name:"甘肃",status:"none",phonetic:"g",tag:0}
		,{id:"3078",name:"宁夏",status:"none",phonetic:"n",tag:0}
		,{id:"351",name:"内蒙古",status:"none",phonetic:"n",tag:0}
		,{id:"3026",name:"青海",status:"none",phonetic:"q",tag:0}
		,{id:"3106",name:"新疆",status:"none",phonetic:"x",tag:0}
		,{id:"2240",name:"重庆",status:"none",phonetic:"z",tag:0}
		,{id:"18",name:"天津",status:"none",phonetic:"t",tag:0}
		,{id:"2726",name:"西藏",status:"none",phonetic:"x",tag:0}
		,{id:"2213",name:"海南",status:"none",phonetic:"h",tag:0}
		,{id:"3292",name:"香港",status:"none",phonetic:"x",tag:0}
		,{id:"3314",name:"澳门",status:"none",phonetic:"a",tag:0}
		,{id:"3219",name:"台湾",status:"none",phonetic:"t",tag:0}
		,{id:"36",name:"石家庄",status:"none",phonetic:"s",tag:0}
		,{id:"60",name:"唐山",status:"none",phonetic:"t",tag:0}
		,{id:"75",name:"秦皇岛",status:"none",phonetic:"q",tag:0}
		,{id:"83",name:"邯郸",status:"none",phonetic:"h",tag:0}
		,{id:"103",name:"邢台",status:"none",phonetic:"x",tag:0}
		,{id:"123",name:"保定",status:"none",phonetic:"b",tag:0}
		,{id:"149",name:"张家口",status:"none",phonetic:"z",tag:0}
		,{id:"167",name:"承德",status:"none",phonetic:"c",tag:0}
		,{id:"179",name:"沧州",status:"none",phonetic:"c",tag:0}
		,{id:"196",name:"廊坊",status:"none",phonetic:"l",tag:0}
		,{id:"207",name:"衡水",status:"none",phonetic:"h",tag:0}
		,{id:"220",name:"太原",status:"none",phonetic:"t",tag:0}
		,{id:"231",name:"大同",status:"none",phonetic:"d",tag:0}
		,{id:"243",name:"阳泉",status:"none",phonetic:"y",tag:0}
		,{id:"249",name:"长治",status:"none",phonetic:"z",tag:0}
		,{id:"263",name:"晋城",status:"none",phonetic:"j",tag:0}
		,{id:"271",name:"朔州",status:"none",phonetic:"s",tag:0}
		,{id:"278",name:"晋中",status:"none",phonetic:"j",tag:0}
		,{id:"290",name:"运城",status:"none",phonetic:"y",tag:0}
		,{id:"304",name:"忻州",status:"none",phonetic:"x",tag:0}
		,{id:"319",name:"临汾",status:"none",phonetic:"l",tag:0}
		,{id:"3107",name:"乌鲁木齐",status:"none",phonetic:"w",tag:0}
		,{id:"3116",name:"克拉玛依",status:"none",phonetic:"k",tag:0}
		,{id:"3121",name:"吐鲁番",status:"none",phonetic:"t",tag:0}
		,{id:"3125",name:"哈密",status:"none",phonetic:"h",tag:0}
		,{id:"3129",name:"昌吉",status:"none",phonetic:"c",tag:0}
		,{id:"3137",name:"博尔塔拉",status:"none",phonetic:"b",tag:0}
		,{id:"3141",name:"巴音郭楞",status:"none",phonetic:"b",tag:0}
		,{id:"3151",name:"阿克苏",status:"none",phonetic:"a",tag:0}
	]
}
function getAreas(phonetic) {
	var areas = [];
	for(var i=0;i<citys.length;i++)
	{
		if (citys[i].phonetic==phonetic) {
			areas.push(citys[i]);
		}
	}
	return areas;
}


function getTagAreas(status) {
	var areas = [];
	for(var i=0;i<citys.length;i++)
	{
		if (citys[i].status==status) {
			areas.push(citys[i]);
		}
	}
	return areas;
}


function getCityName(name){
	var areas = [];
	for(var i=0;i<citys.length;i++)
	{
		if (citys[i].name.indexOf(name)!= -1 ) {
			areas.push(citys[i]);
		}
	}
	console.log(areas);
	return areas;
}





/**
 * 订单
 * Created by WangChao on 11/15 0015.
 */
var order = function (fn) {
    this.fn = fn;
};

order.prototype = {
    /**
     * 我的订单列表
     * type {unshipped 待发货, unpaid 待支付, unreciver 待签收, unreview 待评价}
     * pageSize 每页记录数
     * pageNumber 页码
     */
    list: function (data) {
        ajax.get({
            url: base + "weixin/member/order/list.jhtml",
            data: data,
            success: this.fn
        });
    },
    /**
     * 订单明细
     * id 子订单Id
     */
    view:function (data) {
        ajax.get({
            url: base + "weixin/member/order/view.jhtml",
            data: data,
            success: this.fn
        });
    },
    /**
     * 确认订单页
     */
    confirmOrder: function () {
        ajax.get({
            url: base + 'weixin/member/order/info.jhtml',
            success: this.fn
        });
    },
    /**
     * 计算费用（确认订单页面选择配送方式、支付方式、优惠券后调用）
     * paymentMethodId 支付方式Id
     * shippingMethodId 配送方式Id
     * codes    优惠码（数组）
     */
    calculate: function (data) {
        ajax.post({
            url: base + 'weixin/member/order/calculate.jhtml',
            data: data,
            traditional: true,
            success: this.fn
        });
    },
    /**
     * 检测邀请码是否合法
     * code 邀请码
     */
    inviteCode: function (data) {
        ajax.get({
            url: base + 'weixin/member/invite_code.jhtml',
            data: data,
            success: this.fn
        });
    },
    /**
     * 确认下单
     * receiverId 收货地址编号
     * paymentMethodId 支付方式编号
     * shippingMethodId 配送方式编号
     * memo 备注
     * extensionId 导购、分享者编号
     * deliveryCenterIds 门店Id（数组）
     * codes 优惠码（数组）
     */
    create: function (data) {
        ajax.post({
            url: base + 'weixin/member/order/create.jhtml',
            data: data,
            traditional: true,
            success: this.fn
        });
    },
    /**
     * 提醒卖家发货/退货
     * id 子订单Id
     */
    remind: function (data) {
        ajax.post({
            url: base + 'weixin/member/order/remind.jhtml',
            data: data,
            success: this.fn
        })
    },
    /**
     * 取消订单(未发货前)
     * id 子订单Id
     */
    refund: function (data) {
        ajax.post({
            url: base + 'weixin/member/order/refund.jhtml',
            data: data,
            success: this.fn
        });
    },
    /**
     * 退货
     * id 子订单Id
     */
    return: function (data) {
        ajax.post({
            url: base + 'weixin/member/order/return.jhtml',
            data: data,
            success: this.fn
        });
    },
    /**
     * 签收（买家）
     * id 子订单Id
     */
    confirm: function (data) {
        ajax.post({
            url: base + 'weixin/member/order/confirm.jhtml',
            data: data,
            success: this.fn
        });
    },
    /**
     * 发起支付（单个子订单）
     * id 子订单Id
     */
    tradePayment: function (data) {
        ajax.post({
            url: base + 'weixin/member/order/payment/' + data.id + '.jhtml',
            data: data,
            success: this.fn
        });
    },
    /**
     * 发起支付--整单合并支付
     * sn 订单号
     */
    payment:function (data) {
        ajax.post({
            url:base+'weixin/member/order/payment.jhtml',
            data:data,
            success:this.fn
        });
    },
    /**
     * 打开付款单
     * sn 付款单号
     */
    paymentView:function (data) {
        ajax.post({
            url:base+'weixin/member/order/paymentView.jhtml',
            data:data,
            success:this.fn
        })
    },
    /**
     * 提交支付
     * paymentPluginId  支付插件
     * sn 支付单号
     */
    paymentSubmit:function (data) {
        ajax.post({
            url:base+'weixin/payment/submit.jhtml',
            data:data,
            success:this.fn
        });
    },
    /**
     * 查询三方物流动态
     * sn   物流单号
     */
    deliveryQuery:function (data) {
        ajax.get({
            url:base+'app/member/order/delivery_query.jhtml',
            data:data,
            success:this.fn
        });
    },
    /**
     * 打开订单
     * sn 订单号
     */
    orderView:function (data) {
        ajax.post({
            url:base+'weixin/member/order/orderView.jhtml',
            data:data,
            success:this.fn
        })
    }

};


/**
 * 商品
 */

var product = function (fn) {
    this.fn = fn;
};
product.prototype = {
    /**
     * 商品列表
     * productCategoryId 平台分类 id
     * communityId 商圈
     * keyword 搜索关键词
     * tagIds 商品签标
     * brandId 品牌
     * startPrice endPrice 介位段
     * isTop 是否置顶
     * isGift 是否是赠品
     * isOutOfStock 是否库存不足
     * orderType 排序 {综合排序 weight,置顶降序 topDesc, 价格升序 priceAsc,价格降序 priceDesc,销量降序 salesDesc,评分降序 scoreDesc, 日期降序 dateDesc,人气降序 hitsDesc}
     */
    list: function (data) {
        ajax.get({
            url: base + "weixin/product/list.jhtml",
            data: data,
            success: this.fn
        });
    },
    /**
     * 商品详情
     * id 商品Id
     */
    view: function (data) {
        ajax.get({
            url: base + 'weixin/product/view.jhtml',
            data: data,
            success: this.fn
        });
    },
    /**
     * 商品详情页分享
     * id 商品Id
     */
    share:function(data){
        ajax.get({
            url:base+'weixin/product/share.jhtml',
            data:data,
            success:this.fn
        });
    },
    /**
     * 分类页分享
     */
    categoryShare:function () {
        ajax.get({
            url:base+'weixin/product/category/share.jhtml',
            success:this.fn
        })
    },
    /**
     * 获取指定商家的商品列表
     * id 商家编号
     * productCategoryTenantId 商家分类 id
     * keyword 搜索关键词
     * tagIds 商品签标(2新品,5推荐,1热销)
     * brandId 品牌
     * startPrice endPrice 介位段
     * orderType 排序 {综合排序 weight,置顶降序 topDesc, 价格升序 priceAsc,价格降序 priceDesc,销量降序 salesDesc,评分降序 scoreDesc, 日期降序 dateDesc,人气降序 hitsDesc}
     */
    listT: function (data) {
        ajax.get({
            url: base + 'weixin/product/list/' + data.id + '.jhtml',
            data: data,
            success: this.fn
        });
    },
    /**
     * 邻家好货，指联盟商品的商品
     * id 商家Id
     */
    unions: function (data) {
        ajax.get({
            url: base + 'weixin/product/unions.jhtml',
            data: data,
            success: this.fn
        });
    },
    /**
     * 获取推荐，搭配商品列表
     * id 商品Id
     */
    recommend: function (data) {
        ajax.get({
            url: base + 'weixin/product/recommend.jhtml',
            data: data,
            success: this.fn
        });
    },
    /**
     * 商品热门搜索词
     */
    hot_search: function () {
        ajax.get({
            url: base + 'weixin/product/hot_search.jhtml',
            success: this.fn
        });
    },
    /**
     * 添加商品到收藏
     * id 商品Id
     */
    favorite: function (data) {
        ajax.post({
            url: base + 'weixin/member/favorite/product/add.jhtml',
            data: data,
            success: this.fn
        });
    },
    /**
     * 取消商品收藏
     * id 商品Id
     */
    delFavorite: function (data) {
        ajax.post({
            url:base+'weixin/member/favorite/product/delete.jhtml',
            data:data,
            success:this.fn
        });
    }
};






/**
 * 购物车
 * Created by WangChao on 11/18 0018.
 */
var cart = function (fn) {
    this.fn = fn;
};
cart.prototype = {
    /**
     * 购物车列表
     */
    list: function () {
        ajax.get({
            url: base + 'weixin/cart/list.jhtml',
            success: this.fn
        });
    },
    /**
     * 编辑数量
     * id 购物项Id
     * quantity 数量
     */
    edit:function (data) {
        ajax.post({
            url: base + 'weixin/cart/edit.jhtml',
            data:data,
            success: this.fn
        });
    },
    /**
     * 添加至购物车
     * id 商品Id
     * quantity 数量
     * type (buy为立即购买)
     */
    add:function (data) {
        ajax.post({
            url: base + 'weixin/cart/add.jhtml',
            data:data,
            success: this.fn
        });
    },
    /**
     * 选择
     * ids 购物项Id(数组)
     * flag 是否选中
     */
    selected:function (data) {
        ajax.post({
            url: base + 'weixin/cart/selected.jhtml',
            data:data,
            traditional:true,
            success: this.fn
        });
    },
    /**
     * 删除
     * ids 商品id(数组)
     */
    delete:function (data) {
        ajax.post({
            url: base + 'weixin/cart/delete.jhtml',
            data:data,
            traditional:true,
            success: this.fn
        });
    }

};



/**
 * 银行卡
 * Created by WangChao on 11/21 0021.
 */
var bank=function (fn) {
    this.fn=fn;
};

bank.prototype={
    /**
     * 我的银行卡
     */
    list:function () {
        ajax.get({
            url:base+'weixin/member/bank/list.jhtml',
            success:this.fn
        });
    },
    /**
     * 支持的银行
     */
    bankInfoList:function () {
        ajax.get({
            url:base+'weixin/member/bank/bank_info/list.jhtml',
            success:this.fn
        });
    },
    /**
     * 添加银行卡发送手机验证码
     * @param data
     * mobile 手机号
     */
    sendCode:function (data) {
        ajax.post({
            url:base+'weixin/member/bank/sendCode.jhtml',
            data:data,
            success:this.fn
        });
    },
    /**
     * 新增银行卡
     * captcha 验证码
     * bankInfoId 银行Id
     * cardNo 卡号
     * depositUser 开户名
     * idCardNo 证件号
     */
    save:function (data) {
        ajax.post({
            url:base+'weixin/member/bank/save.jhtml',
            data:data,
            success:this.fn
        });
    },
    /**
     * 删除银行卡
     * @param data
     * id 银行卡Id
     */
    delete:function (data) {
        ajax.post({
            url:base+'weixin/member/bank/delete.jhtml',
            data:data,
            success:this.fn
        });
    }

};


/**
 * 账单
 * Created by WangChao on 11/21 0021.
 */
var deposit=function (fn) {
    this.fn=fn;
};
deposit.prototype={
    list:function (data) {
        /**
         * 本人账单流水明细
         * begin_date 开始时间
         * end_date 结束时间
         * pageSize 页大小
         * pageNumber 页码
         */
        ajax.get({
            url:base+'weixin/member/deposit/list.jhtml',
            data:data,
            success:this.fn
        });
    },
    /**
     * 本人账单统计
     * begin_date 开始时间
     * end_date 结束时间
     */
    sumer:function (data) {
        ajax.get({
            url:base+'weixin/member/deposit/sumer.jhtml',
            data:data,
            success:this.fn
        });
    }
};


/**
 * 收藏
 * Created by WangChao on 11/21 0021.
 */
var favorite=function (fn) {
    this.fn=fn;
};
favorite.prototype={
    /**
     * 我收藏的商品
     * pageSize 页大小
     * pageNumber 页码
     */
    productList:function (data) {
        ajax.get({
            url: base+'weixin/member/favorite/product/list.jhtml',
            data:data,
            success:this.fn
        });
    },
    /**
     * 我收藏的商家
     * lng 经度
     * lat 纬度
     * pageSize 页大小
     * pageNumber 页码
     */
    tenantList:function (data) {
        ajax.get({
            url: base+'weixin/member/favorite/tenant/list.jhtml',
            data:data,
            success:this.fn
        });
    },
    /**
     * 我收藏的导购
     * pageSize 页大小
     * pageNumber 页码
     */
    guideList:function (data) {
        ajax.get({
            url: base+'weixin/member/favorite/guide/list.jhtml',
            data:data,
            success:this.fn
        });
    }

};



/**
 * 收货地址
 * Created by WangChao on 2016/11/23.
 */
var receiver = function (fn) {
    this.fn = fn;
};
receiver.prototype = {
    /**
     * 收货地址列表
     */
    list: function () {
        ajax.get({
            url: base + 'weixin/member/receiver/list.jhtml',
            success: this.fn
        });
    },
    /**
     * 保存收货地址
     * areaId 区域Id
     * consignee 收货人
     * address 详细地址
     * phone 电话
     */
    save: function (data) {
        ajax.post({
            url: base + 'weixin/member/receiver/save.jhtml',
            data: data,
            success: this.fn
        });
    },
    /**
     * 编辑页
     * id 收货地址Id
     */
    view:function (data) {
        ajax.get({
            url:base+'weixin/member/receiver/view.jhtml',
            data:data,
            success:this.fn
        });
    },
    /**
     * 修改收货地址
     * id 收货地址Id
     * areaId 区域Id
     * consignee 收货人
     * address 详细地址
     * phone 电话
     */
    update:function (data) {
        ajax.post({
            url:base+'weixin/member/receiver/update.jhtml',
            data:data,
            success:this.fn
        });
    },
    /**
     * 删除收货地址
     * id 收货地址Id
     */
    delete:function (data) {
        ajax.post({
            url:base+'weixin/member/receiver/delete.jhtml',
            data:data,
            success:this.fn
        });
    },
    /**
     * 收货地址设为默认
     * id 收货地址Id
     */
    setDefault:function (data) {
        ajax.post({
            url:base+'weixin/member/receiver/setIsDefault.jhtml',
            data:data,
            success:this.fn
        });
    }
};


/**
 * Created by WangChao on 2016/12/2.
 */
var review = function (fn) {
    this.fn = fn
};
review.prototype = {
    /**
     * 订单评价页
     * tradeId 子订单Id
     */
    view: function (data) {
        ajax.get({
            url: base + 'weixin/member/review/view.jhtml',
            data: data,
            success: this.fn
        });
    },
    /**
     * 订单、商品评价提交（使用FormData方式提交）
     * tradeId    子订单Id(订单评论时传)
     * orderItemId    商品项Id(商品评论时传)
     * score  商品、商家评分
     * assistant    导购评分
     * content    内容
     * flag  评论对象(trade订单评论,product商品评论)
     * images[{file 文件}]  图片集合
     * isAnonym 是否匿名
     */
    submit: function (data) {
        ajax.post({
            url: base + 'weixin/member/review/add.jhtml',
            data: data,
            contentType: false,
            processData: false,
            success: this.fn
        });
    },
    /**
     * 订单、商品评价提交
     * tradeId    子订单Id(订单评论时传)
     * orderItemId    商品项Id(商品评论时传)
     * score  商品、商家评分
     * assistant    导购评分
     * content    内容
     * flag  评论对象(trade订单评论,product商品评论)
     * images[{file 文件}]  图片集合
     * isAnonym 是否匿名
     */
    submit1: function (data) {
        ajax.post({
            url: base + 'weixin/member/review/add.jhtml',
            data: data,
            success: this.fn
        });
    },
    /**
     * 商品评价列表
     * id 商品Id
     * pageSize 页大小
     * pageNumber 页码
     */
    list: function (data) {
        ajax.get({
            url: base + 'weixin/member/review/list.jhtml',
            data: data,
            success: this.fn
        });
    }
};



/**
 * 导购
 * Created by Administrator on 16/11/10.
 */
var employee = function (fn) {
    this.fn = fn;
};
employee.prototype = {
    /**
     * 企业导购列表
     * id 店铺Id
     * pageSize 每页记录数
     * pageNumber 页码
     */
    list: function (data) {
        ajax.get({
            url: base + "weixin/tenant/guide/list.jhtml",
            data: data,
            success: this.fn
        });
    },
    /**
     * 实体店导购列表
     * id 实体店Id
     * pageSize 每页记录数
     * pageNumber 页码
     */
    listDc: function (data) {
        ajax.get({
            url: base + "weixin/delivery_center/employee/list.jhtml",
            data: data,
            success: this.fn
        });
    },
    /**
     * 添加导购到收藏
     * id 员工ID(employeeId)
     */
    favorite:function(data){
        ajax.post({
            url: base + "weixin/member/favorite/guide/add.jhtml",
            data: data,
            success: this.fn
        });
    },
    /**
     * 取消导购收藏
     * id 员工ID(employeeId)
     */
    delFavorite:function(data){
        ajax.post({
            url: base + "weixin/member/favorite/guide/delete.jhtml",
            data: data,
            success: this.fn
        });
    }
};



/**
 * 实体店
 * Created by WangChao on 2016/12/7.
 */
var deliveryCenter = function (fn) {
    this.fn = fn;
};
deliveryCenter.prototype = {
    /**
     * 获取实体店详情
     * id 实体店Id
     */
    view: function (data) {
        ajax.get({
            url: base + 'weixin/delivery_center/view.jhtml',
            data: data,
            success: this.fn
        });
    }
};



/**
 * 优惠买单
 * Created by WangChao on 2016/12/10.
 */

var paybill = function (fn) {
    this.fn = fn;
};
paybill.prototype = {
    /**
     * 优惠买单数据获取
     * id 店铺Id
     */
    buyreduce: function (data) {
        ajax.get({
            url: base + 'weixin/pay/bill/buyreduce/' + data.id + '.jhtml',
            data: data,
            success: this.fn
        });
    },
    /**
     * 根据用户输入的金额，获取平台立减和店铺优惠券
     * id 店铺Id
     * amount 消费金额
     * noAmount 不参与金额
     */
    getAmount:function(data){
        ajax.post({
            url:base+'weixin/pay/bill/get/amount.jhtml',
            data:data,
            success:this.fn
        });
    },
    /**
     * 买单立减订单提交
     * id 店铺Id
     * amount 消费金额
     * noAmount 不参与金额
     * deliveryCenterId 门店Id
     */
    submit:function (data) {
        ajax.post({
            url:base+'weixin/member/pay/bill/get/amount.jhtml',
            data:data,
            success:this.fn
        })
    },
    /**
     * 根据经纬度获取实体店地址
     * id 店铺Id
     * lat 纬度
     * lng 经度
     */
    deliveryCenter:function (data) {
        ajax.get({
            url:base+'weixin/pay/bill/deliver/center.jhtml',
            data:data,
            success:this.fn
        });
    }
};



/**
 * 访问记录
 * Created by WangChao on 2016/12/15.
 */
var visitRecord = function (fn) {
    this.fn = fn;
};
visitRecord.prototype = {
    /**
     * 添加访问记录
     *
     * tenantId    店铺Id
     * productId   商品Id
     * visitType   访问类型  (无线网wifi,C端app,购物屏pad,微信weixin)
     * machineType 设备类型  (手机mobile,平板pad,电脑pc)
     */
    add: function (data) {
        ajax.post({
            url: base + 'weixin/visitRecord/add.jhtml',
            data: data,
            success: this.fn
        });
    }
};


/**
 * 消息
 * Created by WangChao on 2016/12/15.
 */
var message=function (fn) {
    this.fn=fn
};
message.prototype={
    /**
     * 消息列表
     * type 消息类型（订单提醒order,账单提醒account,系统消息message）
     * pageSize 页大小
     * pageNumber 页码
     */
    list:function (data) {
        ajax.get({
            url:base+'weixin/member/message/list.jhtml',
            data:data,
            success:this.fn
        });
    },
    /**
     * 未读消息数
     */
    count:function (data) {
        ajax.get({
            url:base+'weixin/member/message/count.jhtml',
            data:data,
            success:this.fn
        });
    }
};



/**
 * 活动
 * Created by WangChao on 2016/12/23.
 */
var activity=function (fn) {
    this.fn=fn;
};
activity.prototype={

    /**
     * linkId 链接Id
     */
    union:function(data){
        ajax.get({
            url:base+'weixin/activity/union/activity.jhtml',
            data:data,
            success:this.fn
        })
    }
};

